<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Correspondence Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="Anastasios Panagiotelis" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/rglwidgetClass/rgl.css" rel="stylesheet" />
    <script src="libs/rglwidgetClass/rglClass.src.js"></script>
    <script src="libs/CanvasMatrix4/CanvasMatrix.src.js"></script>
    <script src="libs/rglWebGL-binding/rglWebGL.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="mtheme.css" type="text/css" />
    <link rel="stylesheet" href="mod.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Correspondence Analysis
## High Dimensional Data Analysis
### Anastasios Panagiotelis
### Lecture 11

---


class: inverse, center, middle

# Motivation



---

# Non-metric data

- So far we have looked at dimension reduction methods such as PCA
and MDS where:&lt;!--D--&gt;
--

  - The number of variables is large&lt;!--D--&gt;
--

  - The data are (mostly) metric data&lt;!--D--&gt;
--

- Today we cover tools for understanding the relationships
between nominal/categorical data.&lt;!--D--&gt;
--

- We focus on the case where there are only two variables, but
a potentially large number of categories for each variable.

---

# Outline

- First we revise the cross tabulation, a useful summary for
nominal data.&lt;!--D--&gt;
--

- We then cover ways to visualise the information in a cross tab.&lt;!--D--&gt;
--

- Ultimately we will discuss Correspondence Analysis which
can be applied to large tables.&lt;!--D--&gt;
--

- We cover applications of Correspondence Analysis in the real
world including with text data.

---

class: inverse, center, middle

# A basic analysis
---

# Beer example

- A cross tab can be created in R using the `table`
function.  The input is either&lt;!--D--&gt;
--

  - A single matrix or data frame with 2 columns/variables&lt;!--D--&gt;
--

  - One vector for each variable&lt;!--D--&gt;
--

- The output is a *table* object.&lt;!--D--&gt;
--

- Let’s try it with the Beer data which can be found on Moodle.

---

# Beer example

- We look at two categorical variables&lt;!--D--&gt;
--

  - Availabilty
  - Light&lt;!--D--&gt;
--

- The number of categories for availability is 2 (National/Regional)&lt;!--D--&gt;
--

- The number of categories for light is 2 (Light/non-light).  

---

# Doing it in R




```r
load('Beer.RData')
Beer %&gt;%
  select(light,avail)%&gt;% 
  table%&gt;% #Creates Tables
  addmargins()-&gt; #Includes totals
  crosstab
```

---

# The table


```r
print(crosstab)
```

```
##           avail
## light      National Regional Sum
##   NONLIGHT        7       21  28
##   LIGHT           5        2   7
##   Sum            12       23  35
```

---

# What do we see?

- There are more beers available at a regional level.&lt;!--D--&gt;
--

- The nationally available beers are just as likely to be light or non-light.&lt;!--D--&gt;
--

- Regional beers are overwhelmingly non-light.&lt;!--D--&gt;
--

- But is there a way we can visualise this?

---

# How to visualise?

- In this small example we can think of four sets of coordinates&lt;!--D--&gt;
--

  - Coordinates for national&lt;!--D--&gt;
--

  - Coordinates for regional&lt;!--D--&gt;
--

  - Coordinates for non-light&lt;!--D--&gt;
--

  - Coordinates for light&lt;!--D--&gt;
--

- Let's plot these

---

# Plot

&lt;img src="CA_files/figure-html/2dplot-1.png" style="display: block; margin: auto;" /&gt;

---

# Summary 

- Even on this very basic plot we can see an association between light beers and national availability&lt;!--D--&gt; 
--

- However what do we do with&lt;!--D--&gt; 
--

  - Large cross tabulations &lt;!--D--&gt;
--

  - Non-square cross tabulations &lt;!--D--&gt;
--

- To solve these issues **Correspondence Analysis** can be used.  It is more complicated than simply plotting rows and columns in the cross tab 

---

class: inverse, center, middle

# A Bigger Cross Tab

---

# Breakfast example 

- The table on the next slide is reproduced from Bendixen, M., (2003).&lt;!--D--&gt;
--

  - Different *breakfast* foods (e.g. CER=cereal, MUE=muesli), with a total of 8 categories.&lt;!--D--&gt; 
--

  - Different *attributes* of those foods (‘Healthy’, ‘Economical’, ‘Tasteless’) with a total of 14 categories.&lt;!--D--&gt;
--

- Survey asked to match attributes to breakfasts.&lt;!--D--&gt; 
--

- A cross tab shows the frequency with which each food was matched to each attribute. 

---

# Breakfast example 

&lt;div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; "&gt;&lt;table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; BE &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; CER &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; FRF &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; MUE &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; POR &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; STF &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; TT &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; YOG &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Economical &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Expensive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Family Favourite &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Healthy &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 38 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Long Prepare &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Nutritious &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Quick &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Summer &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasteless &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasty &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Treat &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Weekdays &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Weekends &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 56 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Winter &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt;

---

# Visualising this 

We can visualise this using Correspondence Analysis which requires the `ca` package. 

 
 ```r
 library(ca) 
 caout&lt;-ca(breakfastct) 
 plot(caout) 
 ```

 You need to install the `ca` package first 

---

# Visualising this 

&lt;img src="CA_files/figure-html/breakfastcap-1.png" style="display: block; margin: auto;" /&gt;

---

# What can we see? 

- Towards the top of the plot are categories like *Expensive*, *Healthy* and *Nutritious*.  There are associated with *Muesli (MUE)* and *Fresh Fruit(FRF)*.&lt;!--D--&gt; 
--

- The left of the plot has the catgeory *Long Prepare*, with *Bacon and Eggs (BE)* closest to this point.&lt;!--D--&gt; 
--

- *Cereal (CER)* is associated with *Weekdays*.&lt;!--D--&gt; 
--

- What else? 

---

# Correspondence Analysis 

- The plot is easy to interpret.  Categories that are close to one 
 another on the plot have a strong association with one 
 another.&lt;!--D--&gt; 
--

- This is the case when we compare&lt;!--D--&gt;  
--

  + Two categories in the rows of the table,&lt;!--D--&gt; 
--

  + Two categories in the column of the table,&lt;!--D--&gt;
--

  + A category in the row of the cross tab with  a category in the column of a cross tab&lt;!--D--&gt; 
--

- What about the remaining output? 

---

# Other output 

 
 ```r
 summary(caout,row=FALSE,column=FALSE) 
 ```
 
 ```
 ## 
 ## Principal inertias (eigenvalues):
 ## 
 ##  dim    value      %   cum%   scree plot               
 ##  1      0.193095  52.5  52.5  *************            
 ##  2      0.077731  21.1  73.6  *****                    
 ##  3      0.043854  11.9  85.6  ***                      
 ##  4      0.032804   8.9  94.5  **                       
 ##  5      0.012257   3.3  97.8  *                        
 ##  6      0.005687   1.5  99.4                           
 ##  7      0.002363   0.6 100.0                           
 ##         -------- -----                                 
 ##  Total: 0.367791 100.0
 ```

---

# Connection to PCA/MDS 

- There are similarities with material covered in PCA and MDS &lt;!--D--&gt;
--

  - We visualise with a biplot. &lt;!--D--&gt; 
--

  - Terms such as **eigenvalues** and **scree plot** reappear.&lt;!--D--&gt; 
--

- In PCA/MDS the aim was to maximise variance or minimise strain.&lt;!--D--&gt;
--

- In CA the aim is to maximise **inertia**. 

---

# Inertia 

- Categorical data are not ordinal.&lt;!--D--&gt;   
--

  - We cannot measure dependence in categorical data by seeing whether 'large' values of one variable coincide with 'large' values of the other variable.&lt;!--D--&gt; 
--

  - We cannot use correlation.&lt;!--D--&gt; 
--

- Inertia is a measure of the dependence in categorical data, closely related to the chi square statistic from a test of independence between two categorical variables.&lt;!--D--&gt; 
--

- Let us quickly revise this. 

---

# Chi Square test 

- Suppose we have two variables&lt;!--D--&gt; 
--

  + Variable 1 has two categories A and B&lt;!--D--&gt; 
--

  + Variable 2 has two categories X and Y &lt;!--D--&gt;
--

- Assume Variable 1 and 2 are independent&lt;!--D--&gt;  
--

- On the next slide we will have an incomplete cross tab 

---

# Cross Tab 

 |V1 \ V2|   X  |     Y   | Total  | 
 |------:|:-----|---------|:------:| 
 |   A   |      |         |     50 | 
 |   B   |      |         |     50 | 
 |Total  |   20 |    80   |    100 | 

 If variable 1 and variable 2 are independent then what numbers do you expect to be in the empty cells? 

---

# Cross Tab 


 |V1 \ V2|   X  |     Y   | Total  | 
 |------:|:-----|---------|:------:| 
 |   A   |   10 |    40   |     50 | 
 |   B   |   10 |    40   |     50 | 
 |Total  |   20 |    80   |    100 | 

 Under independence  

 - `\(\mbox{Pr}(A,X)=\mbox{Pr}(A)\mbox{Pr}(X)\)` 
 - `\(\mbox{Pr}(B,X)=\mbox{Pr}(B)\mbox{Pr}(X)\)` 
 - `\(\mbox{Pr}(A,Y)=\mbox{Pr}(A)\mbox{Pr}(Y)\)` 
 - `\(\mbox{Pr}(B,Y)=\mbox{Pr}(B)\mbox{Pr}(Y)\)` 

---

# Independence is boring 

- Independence is not interesting.&lt;!--D--&gt; 
--

- We cannot draw any conclusions about association between categories across different variables.&lt;!--D--&gt; 
--

- If we were to do the crude plot from the beer example, all points would lie in the same direction.&lt;!--D--&gt;
--

- In correspondence analysis, for perfect independence all row and column categories fall on a single point. 

---

# Random variation

- Even for independence, due to randomness we may actually get a table like this: 

|V1 \ V2|   X  |     Y   | Total  | 
|------:|:-----|---------|:------:| 
|   A   |   12 |    38   |     50 | 
|   B   |   8  |    42   |     50 | 
|Total  |   20 |    80   |    100 | 

- How do we know whether the variables are truly independent and not due to random variation? 

---

# The chi square test 

 For the chi square test, in each cell we compute 

 `$$\frac{(O_{ij}-E_{ij})^2}{E_{ij}}$$` 

where `\(O_{ij}\)` is the observed count in each cell and `\(E_{ij}\)` is the expected count in each cell. 

---

# Chi Square Statistic


The chi square statistic is 

 `$$\chi^2=\sum\limits_{i=1}^{r}\sum\limits_{j=1}^{c}\frac{(O_{ij}-E_{ij})^2}{E_{ij}}$$` 

 where `\(r\)` and `\(c\)` are the number of rows and columns in the cross tab respectively. 

---

# The chi square test 

- If the variables are truly independent then it is unlikely that one would observe large values of `\(\chi^2\)` &lt;!--D--&gt;
--

- In this case we reject the null and conclude the variables are dependent.&lt;!--D--&gt; 
--

- However, we can also think of the `\(\chi^2\)` stat as a measure of dependence where:&lt;!--D--&gt; 
--

  - Small values indicate low dependence 
  - Large values indicate high dependence 

---

# Inertia 

- Correspondence analysis is based on a similar idea.&lt;!--D--&gt; 
--

- However the counts in each cell `\(O_i\)` and `\(E_i\)` are replaced with probabilities `\(o_{ij}=\frac{O_{ij}}{n}\)` and `\(e_{ij}=E_{ij}/n\)`.&lt;!--D--&gt; 
--

- Each count is dividided by `\(n\)` which is the total of all cell counts (i.e. `\(r\times c\)`).&lt;!--D--&gt; 
--

- Instead of the `\(\chi^2\)` we get inertia defined as 
 `$$\mbox{Inertia}=\frac{\chi^2}{n}$$` 

---

# Correspondence Analysis 

- Correspondence analysis is about explaining as much inertia as possible with a small number of dimensions.&lt;!--D--&gt; 
--

- Instead of the original rows and columns in the cross tab, a small number of linear combinations of these rows and columns are formed.&lt;!--D--&gt; 
--

- A good approximation to the original cross tab could be be reconstructed from these linear combinations.

---


# Geometric Interpretation 

- Each column category can be plotted in `\(r\)`-dimensions.&lt;!--D--&gt; 
--

- Each row category can be plotted in `\(c\)`-dimensions.&lt;!--D--&gt;
--

- Correspondence Analysis rotates both of these to provide the most interesting 'optimal' 2D visualisation&lt;!--D--&gt; 
--

- Here 'optimal' refers to maximising inertia. 

---

# Back to the output 

 
 ```r
 summary(caout,row=FALSE,column=FALSE) 
 ```
 
 ```
 ## 
 ## Principal inertias (eigenvalues):
 ## 
 ##  dim    value      %   cum%   scree plot               
 ##  1      0.193095  52.5  52.5  *************            
 ##  2      0.077731  21.1  73.6  *****                    
 ##  3      0.043854  11.9  85.6  ***                      
 ##  4      0.032804   8.9  94.5  **                       
 ##  5      0.012257   3.3  97.8  *                        
 ##  6      0.005687   1.5  99.4                           
 ##  7      0.002363   0.6 100.0                           
 ##         -------- -----                                 
 ##  Total: 0.367791 100.0
 ```

---

# How to intepret this 

- Eigenvalues previously told us:&lt;!--D--&gt; 
--

  - The variance explained by each principal component in PCA.&lt;!--D--&gt; 
--

  - Give some indication of the Goodness of fit for MDS.&lt;!--D--&gt; 
--

- In CA the eigenvalues tell us the proportion of inertia explained by the solution.&lt;!--D--&gt; 
--

- A 2D solution is usually used for visualisation.&lt;!--D--&gt;   
--

- In the breakfast example the visualisation explains 73.6% of the inertia. 

---
class:inverse, middle, center

# Matrix decompositions

---

# Matrix decompositions

- Wherever dimension reduction is used there is usually a matrix decomposition hidden somewhere.
--

- In this case, the matrix that is decomposed is related to the cross tab.
--

- In particular consider the values

`$$m_{ij}=\frac{o_{ij}-e_{ij}}{\sqrt{e_{ij}}}$$`

---

# What about CA?

- Now consider a matrix `\({\mathbf M}\)` with `\(m_{ij}\)` in the `\(i^{th}\)` row and `\(j^{th}\)` column.&lt;!--D--&gt;
--

- Let the SVD of this matrix be
`$${\mathbf M}={\mathbf U}{\mathbf D}{\mathbf V}'$$`&lt;!--D--&gt;
--

- We will consider&lt;!--D--&gt;
--

  + Post-multiplying by `\({\mathbf V}\)`
  + Pre-multiplying by `\({\mathbf U}'\)`

---

# Post-multiplying by `\({\mathbf V}\)`

- This gives `\({\mathbf U}{\mathbf D}{\mathbf V}'{\mathbf V}={\mathbf U}{\mathbf D}\)`&lt;!--D--&gt;
--

- We get a *factor score* for each row category that is a linear combination of all column categories.&lt;!--D--&gt;
--

- These are a bit like principal components for the row categories.

---

# Pre-multiplying by `\({\mathbf U}'\)`

- This gives `\({\mathbf U}'{\mathbf U}{\mathbf D}{\mathbf V}'={\mathbf D}{\mathbf V}'\)`&lt;!--D--&gt;
--

- We get a *factor score* for each column category that is a linear combination of all row categories.
--

- These are a bit like principal components for the column categories.

---

# On the same plot

- All the information can be summarised in a single plot using the biplot&lt;!--D--&gt;
--

- For CA the symmetric normalisation is often used.&lt;!--D--&gt;
--

- This means we plot the first two columns of `\({\mathbf U}{\mathbf D}^{1/2}\)` and `\({\mathbf V}{\mathbf D}^{1/2}\)`&lt;!--D--&gt;
--

- This way we do not prioritise a more accurate representation neither for rows nor for columns.

---
class: inverse, middle center
# Application
---

# Example: Hotel Reviews 

- For an interesting example related to marketing consider hotel reviews.&lt;!--D--&gt; 
--

- Many websites provide user reviews.&lt;!--D--&gt; 
--

- The words in each review can be scraped from the web&lt;!--D--&gt; 
--

- In the following example eight hotels in Melbourne were considered&lt;!--D--&gt; 
--

  - Four that were highly rated: Crown Towers, Adelphi, Larwill and QT&lt;!--D--&gt; 
--

  - Four that were not highly rated: Mercure, FlagstaffCity, Citiclub, Hotel Sophia 

---

# Example: Hotel Reviews 

- For each hotel, 100 reviews were scraped.&lt;!--D--&gt; 
--

- So called *stop words* ('the', 'a', 'is') were removed as were the names of the hotels.&lt;!--D--&gt; 
--

- The 20 most frequent words used for each hotel.&lt;!--D--&gt; 
--

- Combining these lists for 8 hotels led to 63 words (some words appear on multiple top 20 lists) 
---

# Example: Hotel Reviews 

- Jaccard similarity could be used to do MDS&lt;!--D--&gt; 
--

- However there are two interesting things that will not be captured by such an analysis&lt;!--D--&gt; 
--

  + The frequency with which words appear is important.&lt;!--D--&gt; 
--

  + The association between the hotels and words.
  
---

# Example: Hotel Reviews 

- On Moodle you will find a cross tab featuring the frequency with which each word appeared on each review 
 &lt;div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:350px; "&gt;&lt;table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;"&gt;
  &lt;thead&gt;
   &lt;tr&gt;
    &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt;   &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; Adelphi &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; Citiclub &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; CrownTowers &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; FlagstaffCity &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; HotelSophia &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; Larwill &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; Mercure &lt;/th&gt;
    &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; QT &lt;/th&gt;
   &lt;/tr&gt;
  &lt;/thead&gt;
 &lt;tbody&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; amazing &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; bar &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 48 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; bathroom &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; bed &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; booked &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; breakfast &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; city &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; clean &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; close &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; club &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; comfortable &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; cross &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; crown &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; crystal &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; dear &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 97 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 47 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; enjoyed &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; experience &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; fantastic &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; feedback &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; forward &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; free &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; friendly &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; good &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 67 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; great &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 71 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 52 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 95 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; hear &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; hello &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; helpful &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; hi &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; hotel &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 172 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 67 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; leave &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; location &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; lovely &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; melbourne &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; much &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 40 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; my &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 40 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; night &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 53 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; nights &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; noise &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; north &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; old &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; park &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; parking &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; place &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; positive &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; really &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; receive &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; reception &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; review &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 98 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; room &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 81 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; rooms &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 53 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; service &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 30 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 40 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; southern &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; staff &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 35 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; station &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; stay &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 86 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 71 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 58 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; stayed &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; taking &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 99 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; team &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; thank &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 127 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 38 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; time &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 86 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 99 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; towers &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 69 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; walk &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td style="text-align:left;"&gt; wonderful &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 48 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
    &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;&lt;/div&gt;
---

# Example: Hotel Reviews 

The data can be loaded and correspondence analysis can be carried out using 

 
 ```r
 load('hotels.RData') 
 hoteltable%&gt;%ca%&gt;%plot 
 ```

---

# Example: Hotel Reviews 

 &lt;img src="CA_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;

---

# Conclusions 

- Towards the bottom left of the plot are words like *wonderful*, *amazing* and *fantastic*. &lt;!--D--&gt;
--

  + The more highly rated hotels *Crown Towers*, *QT* and *Adelphi* are closer towards the bottom left&lt;!--D--&gt; 
--

- Towards the top of the plot the words *noise* and *club* appear together with the *Citiclub* hotel&lt;!--D--&gt; 
--

  + This suggests that there may be complaints about noise from a night club. 

---

# Conclusions 

- Towards the right of the plot the word *old* appears as does *Hotel Sophia* and *Flagstaff*&lt;!--D--&gt; 
--

  + These are lower rated hotels, the age of the hotels may be a problem.&lt;!--D--&gt; 
--

- Can you see anything else?
---

# Example: Hotel Reviews 

 
 ```
 ## 
 ## Principal inertias (eigenvalues):
 ## 
 ##  dim    value      %   cum%   scree plot               
 ##  1      0.199004  27.1  27.1  *******                  
 ##  2      0.184450  25.1  52.2  ******                   
 ##  3      0.155095  21.1  73.3  *****                    
 ##  4      0.075622  10.3  83.6  ***                      
 ##  5      0.058206   7.9  91.5  **                       
 ##  6      0.038432   5.2  96.7  *                        
 ##  7      0.024115   3.3 100.0  *                        
 ##         -------- -----                                 
 ##  Total: 0.734923 100.0
 ```

---

# Example: Hotel Reviews 

<div id="rgl20721" style="width:864px;height:576px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl20721">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":false,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":1,"objects":{"7":{"id":7,"type":"lines","material":{"lit":false},"vertices":[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],"colors":[[0,0,0,1]],"centers":[[0,0,0],[0,0,0]],"ignoreExtent":false,"flags":64},"8":{"id":8,"type":"text","material":{"lit":false},"vertices":[[0,-1.33899998664856,-1.33899998664856]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,-1.33899998664856,-1.33899998664856]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"9":{"id":9,"type":"text","material":{"lit":false},"vertices":[[-1.33899998664856,0,-1.33899998664856]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[-1.33899998664856,0,-1.33899998664856]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"10":{"id":10,"type":"text","material":{"lit":false},"vertices":[[-1.33899998664856,-1.33899998664856,0]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[-1.33899998664856,-1.33899998664856,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"11":{"id":11,"type":"linestrip","material":{"lit":false},"vertices":[[-0.778827726840973,0,0],[2.47337770462036,0,0]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"centers":[[-0.778827726840973,0,0],[2.47337770462036,0,0]],"ignoreExtent":false,"flags":64},"12":{"id":12,"type":"linestrip","material":{"lit":false},"vertices":[[0,-1.64463353157043,0],[0,1.60682201385498,0]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"centers":[[0,-1.64463353157043,0],[0,1.60682201385498,0]],"ignoreExtent":false,"flags":64},"13":{"id":13,"type":"linestrip","material":{"lit":false},"vertices":[[0,0,-1.2811918258667],[0,0,1.85086750984192]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"centers":[[0,0,-1.2811918258667],[0,0,1.85086750984192]],"ignoreExtent":false,"flags":64},"14":{"id":14,"type":"text","material":{"lit":false},"vertices":[[2.50589990615845,0,0]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"texts":[["1"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[2.50589990615845,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"15":{"id":15,"type":"text","material":{"lit":false},"vertices":[[0,1.63934409618378,0]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"texts":[["2"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[0,1.63934409618378,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"16":{"id":16,"type":"text","material":{"lit":false},"vertices":[[0,0,1.88338959217072]],"colors":[[0.200000002980232,0.200000002980232,0.200000002980232,1]],"texts":[["3"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[0,0,1.88338959217072]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"17":{"id":17,"type":"spheres","material":{"size":1},"vertices":[[-0.43338343501091,-0.622348487377167,-0.285049915313721],[-0.217718079686165,-0.234769225120544,-0.880652844905853],[0.665268003940582,-0.0783587396144867,0.21533727645874],[0.409264624118805,-0.0231844410300255,-0.286602258682251],[0.47468301653862,0.285434573888779,0.506478011608124],[0.748244404792786,-0.121260419487953,0.0701127573847771],[0.336904048919678,-0.335104525089264,0.0317085161805153],[0.932890057563782,0.110550120472908,0.149448826909065],[0.600804388523102,0.0430747233331203,-0.0898467749357224],[-0.66063529253006,0.791201114654541,0.999851822853088],[0.27292999625206,-0.320349276065826,-0.177711427211761],[2.47337770462036,-0.00806775316596031,0.431304186582565],[-0.770310997962952,-1.61745119094849,1.7804114818573],[-0.778827726840973,-1.64463353157043,1.85086750984192],[-0.39593368768692,-0.568477809429169,0.0838350504636765],[-0.380610466003418,0.164792403578758,-0.16243802011013],[-0.300035297870636,-0.457727819681168,-0.414945393800735],[-0.36803063750267,-0.339335799217224,-0.495346516370773],[-0.440894722938538,0.347440958023071,-0.0110002299770713],[-0.365030646324158,1.00964307785034,0.451717704534531],[0.954667508602142,-0.0291396994143724,0.049798097461462],[0.035347942262888,-0.152137011289597,-0.251877158880234],[0.361504703760147,0.444555670022964,0.19183512032032],[-0.156824603676796,0.0298911426216364,-0.25863179564476],[-0.319009304046631,-0.506128489971161,-0.174919620156288],[-0.320143461227417,-0.380587667226791,-1.2811918258667],[0.233408316969872,-0.0140602625906467,-0.298597097396851],[-0.111082270741463,-0.310371488332748,-1.10584485530853],[0.0799673944711685,0.28131902217865,0.112057708203793],[-0.418823212385178,-0.333117574453354,-0.590038239955902],[0.142918631434441,-0.0929159447550774,-0.186709731817245],[-0.24594746530056,-0.386644840240479,-0.618941068649292],[0.133677378296852,-0.436273068189621,-0.111251838505268],[-0.309774190187454,0.291114211082458,-0.170664831995964],[0.192781448364258,-0.322522222995758,0.10871908813715],[0.24046865105629,0.327188611030579,0.279512494802475],[0.36178395152092,0.297298938035965,0.256665617227554],[-0.22926276922226,1.3574800491333,0.537655413150787],[0.55933141708374,-0.0708650127053261,0.0419090874493122],[0.977113664150238,-0.0473663024604321,-0.0114596616476774],[0.321409046649933,-0.187760442495346,-0.744235038757324],[0.721975862979889,-0.159910142421722,0.0166743341833353],[0.534648716449738,-0.077769823372364,0.0713772028684616],[-0.423318266868591,0.984046101570129,0.433243662118912],[0.0544148460030556,-0.150346115231514,-0.566836893558502],[-0.620977461338043,1.60682201385498,0.709886431694031],[1.31195962429047,-0.0881088897585869,0.326990902423859],[-0.392210990190506,0.25937807559967,0.118595704436302],[0.482784241437912,-0.111168868839741,0.170069992542267],[0.105770669877529,0.0984250009059906,-0.00831703655421734],[-0.308235436677933,0.096828930079937,0.0450909659266472],[2.47337770462036,-0.00806775316596031,0.431304186582565],[0.0741723030805588,-0.221739143133163,-0.252596497535706],[2.10369324684143,0.107174746692181,0.404695957899094],[-0.111237205564976,-0.0142876002937555,0.0410854630172253],[0.305703222751617,-0.0911427736282349,0.165860712528229],[-0.431737661361694,0.521575748920441,-0.0923319458961487],[-0.507561445236206,-0.611992537975311,-0.0523226000368595],[-0.45362600684166,0.230013698339462,0.0808607190847397],[-0.281882286071777,0.28712272644043,-0.168902635574341],[-0.773291885852814,-1.62696504592896,1.80507111549377],[1.01615476608276,-0.173053294420242,0.154826924204826],[-0.433491319417953,-0.462498039007187,-0.425005167722702]],"colors":[[0.400000005960464,0.400000005960464,1,1]],"radii":[[0.0133650461211801]],"centers":[[-0.43338343501091,-0.622348487377167,-0.285049915313721],[-0.217718079686165,-0.234769225120544,-0.880652844905853],[0.665268003940582,-0.0783587396144867,0.21533727645874],[0.409264624118805,-0.0231844410300255,-0.286602258682251],[0.47468301653862,0.285434573888779,0.506478011608124],[0.748244404792786,-0.121260419487953,0.0701127573847771],[0.336904048919678,-0.335104525089264,0.0317085161805153],[0.932890057563782,0.110550120472908,0.149448826909065],[0.600804388523102,0.0430747233331203,-0.0898467749357224],[-0.66063529253006,0.791201114654541,0.999851822853088],[0.27292999625206,-0.320349276065826,-0.177711427211761],[2.47337770462036,-0.00806775316596031,0.431304186582565],[-0.770310997962952,-1.61745119094849,1.7804114818573],[-0.778827726840973,-1.64463353157043,1.85086750984192],[-0.39593368768692,-0.568477809429169,0.0838350504636765],[-0.380610466003418,0.164792403578758,-0.16243802011013],[-0.300035297870636,-0.457727819681168,-0.414945393800735],[-0.36803063750267,-0.339335799217224,-0.495346516370773],[-0.440894722938538,0.347440958023071,-0.0110002299770713],[-0.365030646324158,1.00964307785034,0.451717704534531],[0.954667508602142,-0.0291396994143724,0.049798097461462],[0.035347942262888,-0.152137011289597,-0.251877158880234],[0.361504703760147,0.444555670022964,0.19183512032032],[-0.156824603676796,0.0298911426216364,-0.25863179564476],[-0.319009304046631,-0.506128489971161,-0.174919620156288],[-0.320143461227417,-0.380587667226791,-1.2811918258667],[0.233408316969872,-0.0140602625906467,-0.298597097396851],[-0.111082270741463,-0.310371488332748,-1.10584485530853],[0.0799673944711685,0.28131902217865,0.112057708203793],[-0.418823212385178,-0.333117574453354,-0.590038239955902],[0.142918631434441,-0.0929159447550774,-0.186709731817245],[-0.24594746530056,-0.386644840240479,-0.618941068649292],[0.133677378296852,-0.436273068189621,-0.111251838505268],[-0.309774190187454,0.291114211082458,-0.170664831995964],[0.192781448364258,-0.322522222995758,0.10871908813715],[0.24046865105629,0.327188611030579,0.279512494802475],[0.36178395152092,0.297298938035965,0.256665617227554],[-0.22926276922226,1.3574800491333,0.537655413150787],[0.55933141708374,-0.0708650127053261,0.0419090874493122],[0.977113664150238,-0.0473663024604321,-0.0114596616476774],[0.321409046649933,-0.187760442495346,-0.744235038757324],[0.721975862979889,-0.159910142421722,0.0166743341833353],[0.534648716449738,-0.077769823372364,0.0713772028684616],[-0.423318266868591,0.984046101570129,0.433243662118912],[0.0544148460030556,-0.150346115231514,-0.566836893558502],[-0.620977461338043,1.60682201385498,0.709886431694031],[1.31195962429047,-0.0881088897585869,0.326990902423859],[-0.392210990190506,0.25937807559967,0.118595704436302],[0.482784241437912,-0.111168868839741,0.170069992542267],[0.105770669877529,0.0984250009059906,-0.00831703655421734],[-0.308235436677933,0.096828930079937,0.0450909659266472],[2.47337770462036,-0.00806775316596031,0.431304186582565],[0.0741723030805588,-0.221739143133163,-0.252596497535706],[2.10369324684143,0.107174746692181,0.404695957899094],[-0.111237205564976,-0.0142876002937555,0.0410854630172253],[0.305703222751617,-0.0911427736282349,0.165860712528229],[-0.431737661361694,0.521575748920441,-0.0923319458961487],[-0.507561445236206,-0.611992537975311,-0.0523226000368595],[-0.45362600684166,0.230013698339462,0.0808607190847397],[-0.281882286071777,0.28712272644043,-0.168902635574341],[-0.773291885852814,-1.62696504592896,1.80507111549377],[1.01615476608276,-0.173053294420242,0.154826924204826],[-0.433491319417953,-0.462498039007187,-0.425005167722702]],"ignoreExtent":false,"flags":3},"18":{"id":18,"type":"text","material":{"lit":false},"vertices":[[-0.43338343501091,-0.378489315509796,-0.128446951508522],[-0.217718079686165,0.00908993743360043,-0.724049866199493],[0.665268003940582,0.165500432252884,0.3719402551651],[0.409264624118805,0.220674723386765,-0.129999279975891],[0.47468301653862,0.529293775558472,0.663080990314484],[0.748244404792786,0.122598752379417,0.226715728640556],[0.336904048919678,-0.0912453606724739,0.188311487436295],[0.932890057563782,0.354409277439117,0.306051790714264],[0.600804388523102,0.286933898925781,0.0667561963200569],[-0.66063529253006,1.03506028652191,1.15645480155945],[0.27292999625206,-0.0764901041984558,-0.0211084540933371],[2.47337770462036,0.23579141497612,0.587907135486603],[-0.770310997962952,-1.37359201908112,1.93701446056366],[-0.778827726840973,-1.40077435970306,2.00747060775757],[-0.39593368768692,-0.324618637561798,0.240438014268875],[-0.380610466003418,0.40865159034729,-0.00583505118265748],[-0.300035297870636,-0.213868662714958,-0.258342415094376],[-0.36803063750267,-0.0954766348004341,-0.338743567466736],[-0.440894722938538,0.591300129890442,0.145602732896805],[-0.365030646324158,1.25350224971771,0.608320713043213],[0.954667508602142,0.214719474315643,0.206401064991951],[0.035347942262888,0.091722160577774,-0.0952741876244545],[0.361504703760147,0.688414871692657,0.348438084125519],[-0.156824603676796,0.273750305175781,-0.102028831839561],[-0.319009304046631,-0.262269288301468,-0.0183166489005089],[-0.320143461227417,-0.136728510260582,-1.12458884716034],[0.233408316969872,0.229798913002014,-0.141994133591652],[-0.111082270741463,-0.0665123164653778,-0.949241936206818],[0.0799673944711685,0.525178194046021,0.268660694360733],[-0.418823212385178,-0.0892584100365639,-0.433435261249542],[0.142918631434441,0.150943219661713,-0.0301067586988211],[-0.24594746530056,-0.142785653471947,-0.462338119745255],[0.133677378296852,-0.192413881421089,0.0453511290252209],[-0.309774190187454,0.534973382949829,-0.0140618681907654],[0.192781448364258,-0.0786630362272263,0.265322059392929],[0.24046865105629,0.571047782897949,0.436115473508835],[0.36178395152092,0.541158080101013,0.413268595933914],[-0.22926276922226,1.60133922100067,0.694258391857147],[0.55933141708374,0.172994151711464,0.198512062430382],[0.977113664150238,0.196492865681648,0.145143300294876],[0.321409046649933,0.0560987330973148,-0.587632060050964],[0.721975862979889,0.0839490219950676,0.173277303576469],[0.534648716449738,0.166089341044426,0.22798016667366],[-0.423318266868591,1.2279052734375,0.589846611022949],[0.0544148460030556,0.093513049185276,-0.410233944654465],[-0.620977461338043,1.85068118572235,0.866489410400391],[1.31195962429047,0.155750274658203,0.483593851327896],[-0.392210990190506,0.503237247467041,0.275198668241501],[0.482784241437912,0.132690295577049,0.326672971248627],[0.105770669877529,0.342284172773361,0.148285925388336],[-0.308235436677933,0.340688109397888,0.201693937182426],[2.47337770462036,0.23579141497612,0.587907135486603],[0.0741723030805588,0.0221200194209814,-0.0959935411810875],[2.10369324684143,0.351033926010132,0.561298906803131],[-0.111237205564976,0.22957156598568,0.197688430547714],[0.305703222751617,0.152716398239136,0.322463691234589],[-0.431737661361694,0.765434920787811,0.0642710253596306],[-0.507561445236206,-0.368133366107941,0.104280367493629],[-0.45362600684166,0.473872870206833,0.237463682889938],[-0.281882286071777,0.5309818983078,-0.0122996661812067],[-0.773291885852814,-1.38310587406158,1.96167409420013],[1.01615476608276,0.0708058774471283,0.311429888010025],[-0.433491319417953,-0.218638882040977,-0.268402189016342]],"colors":[[0,0,1,1]],"texts":[["amazing"],["bar"],["bathroom"],["bed"],["booked"],["breakfast"],["city"],["clean"],["close"],["club"],["comfortable"],["cross"],["crown"],["crystal"],["dear"],["enjoyed"],["experience"],["fantastic"],["feedback"],["forward"],["free"],["friendly"],["good"],["great"],["hear"],["hello"],["helpful"],["hi"],["hotel"],["leave"],["location"],["lovely"],["melbourne"],["much"],["my"],["night"],["nights"],["noise"],["north"],["old"],["park"],["parking"],["place"],["positive"],["really"],["receive"],["reception"],["review"],["room"],["rooms"],["service"],["southern"],["staff"],["station"],["stay"],["stayed"],["taking"],["team"],["thank"],["time"],["towers"],["walk"],["wonderful"]],"cex":[[0.95]],"adj":[[0.5,0.5]],"centers":[[-0.43338343501091,-0.378489315509796,-0.128446951508522],[-0.217718079686165,0.00908993743360043,-0.724049866199493],[0.665268003940582,0.165500432252884,0.3719402551651],[0.409264624118805,0.220674723386765,-0.129999279975891],[0.47468301653862,0.529293775558472,0.663080990314484],[0.748244404792786,0.122598752379417,0.226715728640556],[0.336904048919678,-0.0912453606724739,0.188311487436295],[0.932890057563782,0.354409277439117,0.306051790714264],[0.600804388523102,0.286933898925781,0.0667561963200569],[-0.66063529253006,1.03506028652191,1.15645480155945],[0.27292999625206,-0.0764901041984558,-0.0211084540933371],[2.47337770462036,0.23579141497612,0.587907135486603],[-0.770310997962952,-1.37359201908112,1.93701446056366],[-0.778827726840973,-1.40077435970306,2.00747060775757],[-0.39593368768692,-0.324618637561798,0.240438014268875],[-0.380610466003418,0.40865159034729,-0.00583505118265748],[-0.300035297870636,-0.213868662714958,-0.258342415094376],[-0.36803063750267,-0.0954766348004341,-0.338743567466736],[-0.440894722938538,0.591300129890442,0.145602732896805],[-0.365030646324158,1.25350224971771,0.608320713043213],[0.954667508602142,0.214719474315643,0.206401064991951],[0.035347942262888,0.091722160577774,-0.0952741876244545],[0.361504703760147,0.688414871692657,0.348438084125519],[-0.156824603676796,0.273750305175781,-0.102028831839561],[-0.319009304046631,-0.262269288301468,-0.0183166489005089],[-0.320143461227417,-0.136728510260582,-1.12458884716034],[0.233408316969872,0.229798913002014,-0.141994133591652],[-0.111082270741463,-0.0665123164653778,-0.949241936206818],[0.0799673944711685,0.525178194046021,0.268660694360733],[-0.418823212385178,-0.0892584100365639,-0.433435261249542],[0.142918631434441,0.150943219661713,-0.0301067586988211],[-0.24594746530056,-0.142785653471947,-0.462338119745255],[0.133677378296852,-0.192413881421089,0.0453511290252209],[-0.309774190187454,0.534973382949829,-0.0140618681907654],[0.192781448364258,-0.0786630362272263,0.265322059392929],[0.24046865105629,0.571047782897949,0.436115473508835],[0.36178395152092,0.541158080101013,0.413268595933914],[-0.22926276922226,1.60133922100067,0.694258391857147],[0.55933141708374,0.172994151711464,0.198512062430382],[0.977113664150238,0.196492865681648,0.145143300294876],[0.321409046649933,0.0560987330973148,-0.587632060050964],[0.721975862979889,0.0839490219950676,0.173277303576469],[0.534648716449738,0.166089341044426,0.22798016667366],[-0.423318266868591,1.2279052734375,0.589846611022949],[0.0544148460030556,0.093513049185276,-0.410233944654465],[-0.620977461338043,1.85068118572235,0.866489410400391],[1.31195962429047,0.155750274658203,0.483593851327896],[-0.392210990190506,0.503237247467041,0.275198668241501],[0.482784241437912,0.132690295577049,0.326672971248627],[0.105770669877529,0.342284172773361,0.148285925388336],[-0.308235436677933,0.340688109397888,0.201693937182426],[2.47337770462036,0.23579141497612,0.587907135486603],[0.0741723030805588,0.0221200194209814,-0.0959935411810875],[2.10369324684143,0.351033926010132,0.561298906803131],[-0.111237205564976,0.22957156598568,0.197688430547714],[0.305703222751617,0.152716398239136,0.322463691234589],[-0.431737661361694,0.765434920787811,0.0642710253596306],[-0.507561445236206,-0.368133366107941,0.104280367493629],[-0.45362600684166,0.473872870206833,0.237463682889938],[-0.281882286071777,0.5309818983078,-0.0122996661812067],[-0.773291885852814,-1.38310587406158,1.96167409420013],[1.01615476608276,0.0708058774471283,0.311429888010025],[-0.433491319417953,-0.218638882040977,-0.268402189016342]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"19":{"id":19,"type":"triangles","material":{"size":1},"vertices":[[-0.315864950418472,-0.145101651549339,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.252974838018417],[-0.291007101535797,-0.145101651549339,-0.26851099729538],[-0.291007101535797,-0.145101651549339,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.252974838018417],[-0.291007101535797,-0.120243787765503,-0.26851099729538],[-0.291007101535797,-0.120243787765503,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.252974838018417],[-0.315864950418472,-0.120243787765503,-0.26851099729538],[-0.315864950418472,-0.120243787765503,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.252974838018417],[-0.315864950418472,-0.145101651549339,-0.26851099729538],[-0.291007101535797,-0.145101651549339,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.284047156572342],[-0.315864950418472,-0.145101651549339,-0.26851099729538],[-0.291007101535797,-0.120243787765503,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.284047156572342],[-0.291007101535797,-0.145101651549339,-0.26851099729538],[-0.315864950418472,-0.120243787765503,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.284047156572342],[-0.291007101535797,-0.120243787765503,-0.26851099729538],[-0.315864950418472,-0.145101651549339,-0.26851099729538],[-0.303436011075974,-0.132672712206841,-0.284047156572342],[-0.315864950418472,-0.120243787765503,-0.26851099729538],[-0.286405473947525,0.743400633335114,0.273193180561066],[-0.273976534605026,0.755829572677612,0.288729339838028],[-0.26154762506485,0.743400633335114,0.273193180561066],[-0.26154762506485,0.743400633335114,0.273193180561066],[-0.273976534605026,0.755829572677612,0.288729339838028],[-0.26154762506485,0.768258512020111,0.273193180561066],[-0.26154762506485,0.768258512020111,0.273193180561066],[-0.273976534605026,0.755829572677612,0.288729339838028],[-0.286405473947525,0.768258512020111,0.273193180561066],[-0.286405473947525,0.768258512020111,0.273193180561066],[-0.273976534605026,0.755829572677612,0.288729339838028],[-0.286405473947525,0.743400633335114,0.273193180561066],[-0.26154762506485,0.743400633335114,0.273193180561066],[-0.273976534605026,0.755829572677612,0.257657021284103],[-0.286405473947525,0.743400633335114,0.273193180561066],[-0.26154762506485,0.768258512020111,0.273193180561066],[-0.273976534605026,0.755829572677612,0.257657021284103],[-0.26154762506485,0.743400633335114,0.273193180561066],[-0.286405473947525,0.768258512020111,0.273193180561066],[-0.273976534605026,0.755829572677612,0.257657021284103],[-0.26154762506485,0.768258512020111,0.273193180561066],[-0.286405473947525,0.743400633335114,0.273193180561066],[-0.273976534605026,0.755829572677612,0.257657021284103],[-0.286405473947525,0.768258512020111,0.273193180561066],[-0.35986328125,-0.71875935792923,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.74444568157196],[-0.335005432367325,-0.71875935792923,0.728909552097321],[-0.335005432367325,-0.71875935792923,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.74444568157196],[-0.335005432367325,-0.693901479244232,0.728909552097321],[-0.335005432367325,-0.693901479244232,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.74444568157196],[-0.35986328125,-0.693901479244232,0.728909552097321],[-0.35986328125,-0.693901479244232,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.74444568157196],[-0.35986328125,-0.71875935792923,0.728909552097321],[-0.335005432367325,-0.71875935792923,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.713373363018036],[-0.35986328125,-0.71875935792923,0.728909552097321],[-0.335005432367325,-0.693901479244232,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.713373363018036],[-0.335005432367325,-0.71875935792923,0.728909552097321],[-0.35986328125,-0.693901479244232,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.713373363018036],[-0.335005432367325,-0.693901479244232,0.728909552097321],[-0.35986328125,-0.71875935792923,0.728909552097321],[-0.347434341907501,-0.706330418586731,0.713373363018036],[-0.35986328125,-0.693901479244232,0.728909552097321],[0.817256808280945,-0.0180254746228456,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.14836411178112],[0.842114627361298,-0.0180254746228456,0.132827937602997],[0.842114627361298,-0.0180254746228456,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.14836411178112],[0.842114627361298,0.00683238543570042,0.132827937602997],[0.842114627361298,0.00683238543570042,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.14836411178112],[0.817256808280945,0.00683238543570042,0.132827937602997],[0.817256808280945,0.00683238543570042,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.14836411178112],[0.817256808280945,-0.0180254746228456,0.132827937602997],[0.842114627361298,-0.0180254746228456,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.117291778326035],[0.817256808280945,-0.0180254746228456,0.132827937602997],[0.842114627361298,0.00683238543570042,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.117291778326035],[0.842114627361298,-0.0180254746228456,0.132827937602997],[0.817256808280945,0.00683238543570042,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.117291778326035],[0.842114627361298,0.00683238543570042,0.132827937602997],[0.817256808280945,-0.0180254746228456,0.132827937602997],[0.829685747623444,-0.00559654459357262,0.117291778326035],[0.817256808280945,0.00683238543570042,0.132827937602997],[1.12135231494904,-0.0156569872051477,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.189506858587265],[1.14621007442474,-0.0156569872051477,0.173970684409142],[1.14621007442474,-0.0156569872051477,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.189506858587265],[1.14621007442474,0.0092008737847209,0.173970684409142],[1.14621007442474,0.0092008737847209,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.189506858587265],[1.12135231494904,0.0092008737847209,0.173970684409142],[1.12135231494904,0.0092008737847209,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.189506858587265],[1.12135231494904,-0.0156569872051477,0.173970684409142],[1.14621007442474,-0.0156569872051477,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.158434525132179],[1.12135231494904,-0.0156569872051477,0.173970684409142],[1.14621007442474,0.0092008737847209,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.158434525132179],[1.14621007442474,-0.0156569872051477,0.173970684409142],[1.12135231494904,0.0092008737847209,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.158434525132179],[1.14621007442474,0.0092008737847209,0.173970684409142],[1.12135231494904,-0.0156569872051477,0.173970684409142],[1.13378119468689,-0.00322805647738278,0.158434525132179],[1.12135231494904,0.0092008737847209,0.173970684409142],[0.0813301354646683,-0.0986942127346992,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.315323740243912],[0.106187991797924,-0.0986942127346992,-0.330859899520874],[0.106187991797924,-0.0986942127346992,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.315323740243912],[0.106187991797924,-0.0738363564014435,-0.330859899520874],[0.106187991797924,-0.0738363564014435,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.315323740243912],[0.0813301354646683,-0.0738363564014435,-0.330859899520874],[0.0813301354646683,-0.0738363564014435,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.315323740243912],[0.0813301354646683,-0.0986942127346992,-0.330859899520874],[0.106187991797924,-0.0986942127346992,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.346396058797836],[0.0813301354646683,-0.0986942127346992,-0.330859899520874],[0.106187991797924,-0.0738363564014435,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.346396058797836],[0.106187991797924,-0.0986942127346992,-0.330859899520874],[0.0813301354646683,-0.0738363564014435,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.346396058797836],[0.106187991797924,-0.0738363564014435,-0.330859899520874],[0.0813301354646683,-0.0986942127346992,-0.330859899520874],[0.0937590673565865,-0.0862652808427811,-0.346396058797836],[0.0813301354646683,-0.0738363564014435,-0.330859899520874],[0.267196714878082,-0.0135947009548545,0.00190304405987263],[0.279625654220581,-0.00116577045992017,0.0174392070621252],[0.292054563760757,-0.0135947009548545,0.00190304405987263],[0.292054563760757,-0.0135947009548545,0.00190304405987263],[0.279625654220581,-0.00116577045992017,0.0174392070621252],[0.292054563760757,0.0112631591036916,0.00190304405987263],[0.292054563760757,0.0112631591036916,0.00190304405987263],[0.279625654220581,-0.00116577045992017,0.0174392070621252],[0.267196714878082,0.0112631591036916,0.00190304405987263],[0.267196714878082,0.0112631591036916,0.00190304405987263],[0.279625654220581,-0.00116577045992017,0.0174392070621252],[0.267196714878082,-0.0135947009548545,0.00190304405987263],[0.292054563760757,-0.0135947009548545,0.00190304405987263],[0.279625654220581,-0.00116577045992017,-0.0136331180110574],[0.267196714878082,-0.0135947009548545,0.00190304405987263],[0.292054563760757,0.0112631591036916,0.00190304405987263],[0.279625654220581,-0.00116577045992017,-0.0136331180110574],[0.292054563760757,-0.0135947009548545,0.00190304405987263],[0.267196714878082,0.0112631591036916,0.00190304405987263],[0.279625654220581,-0.00116577045992017,-0.0136331180110574],[0.292054563760757,0.0112631591036916,0.00190304405987263],[0.267196714878082,-0.0135947009548545,0.00190304405987263],[0.279625654220581,-0.00116577045992017,-0.0136331180110574],[0.267196714878082,0.0112631591036916,0.00190304405987263],[-0.18699549138546,-0.187583297491074,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.518045127391815],[-0.162137627601624,-0.187583297491074,-0.533581256866455],[-0.162137627601624,-0.187583297491074,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.518045127391815],[-0.162137627601624,-0.162725448608398,-0.533581256866455],[-0.162137627601624,-0.162725448608398,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.518045127391815],[-0.18699549138546,-0.162725448608398,-0.533581256866455],[-0.18699549138546,-0.162725448608398,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.518045127391815],[-0.18699549138546,-0.187583297491074,-0.533581256866455],[-0.162137627601624,-0.187583297491074,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.54911744594574],[-0.18699549138546,-0.187583297491074,-0.533581256866455],[-0.162137627601624,-0.162725448608398,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.54911744594574],[-0.162137627601624,-0.187583297491074,-0.533581256866455],[-0.18699549138546,-0.162725448608398,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.54911744594574],[-0.162137627601624,-0.162725448608398,-0.533581256866455],[-0.18699549138546,-0.187583297491074,-0.533581256866455],[-0.174566566944122,-0.175154373049736,-0.54911744594574],[-0.18699549138546,-0.162725448608398,-0.533581256866455]],"normals":[[0,0.780868470668793,-0.624695420265198],[0,0.780868470668793,-0.624695420265198],[0,0.780868470668793,-0.624695420265198],[-0.780869245529175,0,-0.624694466590881],[-0.780869245529175,0,-0.624694466590881],[-0.780869245529175,0,-0.624694466590881],[0,-0.780868947505951,-0.624695003032684],[0,-0.780868947505951,-0.624695003032684],[0,-0.780868947505951,-0.624695003032684],[0.780868470668793,0,-0.624695420265198],[0.780868470668793,0,-0.624695420265198],[0.780868470668793,0,-0.624695420265198],[0,0.780868470668793,0.624695420265198],[0,0.780868470668793,0.624695420265198],[0,0.780868470668793,0.624695420265198],[-0.780869245529175,0,0.624694466590881],[-0.780869245529175,0,0.624694466590881],[-0.780869245529175,0,0.624694466590881],[0,-0.780868947505951,0.624695003032684],[0,-0.780868947505951,0.624695003032684],[0,-0.780868947505951,0.624695003032684],[0.780868470668793,0,0.624695420265198],[0.780868470668793,0,0.624695420265198],[0.780868470668793,0,0.624695420265198],[0,0.780868470668793,-0.624695420265198],[0,0.780868470668793,-0.624695420265198],[0,0.780868470668793,-0.624695420265198],[-0.780869245529175,0,-0.624694526195526],[-0.780869245529175,0,-0.624694526195526],[-0.780869245529175,0,-0.624694526195526],[0,-0.780868470668793,-0.624695420265198],[0,-0.780868470668793,-0.624695420265198],[0,-0.780868470668793,-0.624695420265198],[0.780868530273438,0,-0.624695420265198],[0.780868530273438,0,-0.624695420265198],[0.780868530273438,0,-0.624695420265198],[0,0.780868470668793,0.624695420265198],[0,0.780868470668793,0.624695420265198],[0,0.780868470668793,0.624695420265198],[-0.780869245529175,0,0.624694526195526],[-0.780869245529175,0,0.624694526195526],[-0.780869245529175,0,0.624694526195526],[0,-0.780868470668793,0.624695420265198],[0,-0.780868470668793,0.624695420265198],[0,-0.780868470668793,0.624695420265198],[0.780868530273438,0,0.624695420265198],[0.780868530273438,0,0.624695420265198],[0.780868530273438,0,0.624695420265198],[0,0.78086793422699,-0.62469619512558],[0,0.78086793422699,-0.62469619512558],[0,0.78086793422699,-0.62469619512558],[-0.780868709087372,0,-0.624695301055908],[-0.780868709087372,0,-0.624695301055908],[-0.780868709087372,0,-0.624695301055908],[0,-0.78086793422699,-0.62469619512558],[0,-0.78086793422699,-0.62469619512558],[0,-0.78086793422699,-0.62469619512558],[0.78086793422699,0,-0.624696135520935],[0.78086793422699,0,-0.624696135520935],[0.78086793422699,0,-0.624696135520935],[0,0.780869126319885,0.62469470500946],[0,0.780869126319885,0.62469470500946],[0,0.780869126319885,0.62469470500946],[-0.780869841575623,0,0.624693810939789],[-0.780869841575623,0,0.624693810939789],[-0.780869841575623,0,0.624693810939789],[0,-0.780869126319885,0.62469470500946],[0,-0.780869126319885,0.62469470500946],[0,-0.780869126319885,0.62469470500946],[0.780869126319885,0,0.624694645404816],[0.780869126319885,0,0.624694645404816],[0.780869126319885,0,0.624694645404816],[0,0.78086906671524,-0.624694764614105],[0,0.78086906671524,-0.624694764614105],[0,0.78086906671524,-0.624694764614105],[-0.780870318412781,0,-0.624693274497986],[-0.780870318412781,0,-0.624693274497986],[-0.780870318412781,0,-0.624693274497986],[0,-0.78086906671524,-0.624694764614105],[0,-0.78086906671524,-0.624694764614105],[0,-0.78086906671524,-0.624694764614105],[0.780868768692017,0,-0.624695003032684],[0.780868768692017,0,-0.624695003032684],[0.780868768692017,0,-0.624695003032684],[0,0.780868709087372,0.624695062637329],[0,0.780868709087372,0.624695062637329],[0,0.780868709087372,0.624695062637329],[-0.780869901180267,0,0.624693512916565],[-0.780869901180267,0,0.624693512916565],[-0.780869901180267,0,0.624693512916565],[0,-0.780868709087372,0.624695062637329],[0,-0.780868709087372,0.624695062637329],[0,-0.780868709087372,0.624695062637329],[0.780868470668793,0,0.624695360660553],[0.780868470668793,0,0.624695360660553],[0.780868470668793,0,0.624695360660553],[0,0.780869007110596,-0.62469482421875],[0,0.780869007110596,-0.62469482421875],[0,0.780869007110596,-0.62469482421875],[-0.780870318412781,0,-0.624693274497986],[-0.780870318412781,0,-0.624693274497986],[-0.780870318412781,0,-0.624693274497986],[0,-0.780869007110596,-0.624694764614105],[0,-0.780869007110596,-0.624694764614105],[0,-0.780869007110596,-0.624694764614105],[0.780870318412781,0,-0.624693274497986],[0.780870318412781,0,-0.624693274497986],[0.780870318412781,0,-0.624693274497986],[0,0.780868709087372,0.624695122241974],[0,0.780868709087372,0.624695122241974],[0,0.780868709087372,0.624695122241974],[-0.780869901180267,0,0.62469357252121],[-0.780869901180267,0,0.62469357252121],[-0.780869901180267,0,0.62469357252121],[0,-0.780868709087372,0.624695062637329],[0,-0.780868709087372,0.624695062637329],[0,-0.780868709087372,0.624695062637329],[0.780869901180267,0,0.62469357252121],[0.780869901180267,0,0.62469357252121],[0.780869901180267,0,0.62469357252121],[0,0.780868709087372,-0.624695181846619],[0,0.780868709087372,-0.624695181846619],[0,0.780868709087372,-0.624695181846619],[-0.780868887901306,0,-0.624695003032684],[-0.780868887901306,0,-0.624695003032684],[-0.780868887901306,0,-0.624695003032684],[0,-0.780868887901306,-0.624695003032684],[0,-0.780868887901306,-0.624695003032684],[0,-0.780868887901306,-0.624695003032684],[0.780868709087372,0,-0.624695181846619],[0.780868709087372,0,-0.624695181846619],[0.780868709087372,0,-0.624695181846619],[0,0.780868709087372,0.624695181846619],[0,0.780868709087372,0.624695181846619],[0,0.780868709087372,0.624695181846619],[-0.780868887901306,0,0.624695003032684],[-0.780868887901306,0,0.624695003032684],[-0.780868887901306,0,0.624695003032684],[0,-0.780868887901306,0.624695003032684],[0,-0.780868887901306,0.624695003032684],[0,-0.780868887901306,0.624695003032684],[0.780868709087372,0,0.624695181846619],[0.780868709087372,0,0.624695181846619],[0.780868709087372,0,0.624695181846619],[0,0.780868828296661,-0.624695062637329],[0,0.780868828296661,-0.624695062637329],[0,0.780868828296661,-0.624695062637329],[-0.78086930513382,0,-0.624694406986237],[-0.78086930513382,0,-0.624694406986237],[-0.78086930513382,0,-0.624694406986237],[0,-0.780868828296661,-0.624695062637329],[0,-0.780868828296661,-0.624695062637329],[0,-0.780868828296661,-0.624695062637329],[0.780868530273438,0,-0.624695301055908],[0.780868530273438,0,-0.624695301055908],[0.780868530273438,0,-0.624695301055908],[0,0.780868768692017,0.624695062637329],[0,0.780868768692017,0.624695062637329],[0,0.780868768692017,0.624695062637329],[-0.78086930513382,0,0.624694406986237],[-0.78086930513382,0,0.624694406986237],[-0.78086930513382,0,0.624694406986237],[0,-0.780868768692017,0.624695062637329],[0,-0.780868768692017,0.624695062637329],[0,-0.780868768692017,0.624695062637329],[0.780868530273438,0,0.624695301055908],[0.780868530273438,0,0.624695301055908],[0.780868530273438,0,0.624695301055908],[0,0.780868291854858,-0.624695718288422],[0,0.780868291854858,-0.624695718288422],[0,0.780868291854858,-0.624695718288422],[-0.78086793422699,0,-0.624696135520935],[-0.78086793422699,0,-0.624696135520935],[-0.78086793422699,0,-0.624696135520935],[0,-0.780868291854858,-0.624695718288422],[0,-0.780868291854858,-0.624695718288422],[0,-0.780868291854858,-0.624695718288422],[0.780868291854858,0,-0.624695718288422],[0.780868291854858,0,-0.624695718288422],[0.780868291854858,0,-0.624695718288422],[0,0.780869483947754,0.624694228172302],[0,0.780869483947754,0.624694228172302],[0,0.780869483947754,0.624694228172302],[-0.780869126319885,0,0.624694645404816],[-0.780869126319885,0,0.624694645404816],[-0.780869126319885,0,0.624694645404816],[0,-0.780869483947754,0.624694228172302],[0,-0.780869483947754,0.624694228172302],[0,-0.780869483947754,0.624694228172302],[0.780869424343109,0,0.624694228172302],[0.780869424343109,0,0.624694228172302],[0.780869424343109,0,0.624694228172302]],"colors":[[1,0.400000005960464,0.400000005960464,1]],"centers":[[-0.303436040878296,-0.140958666801453,-0.263332277536392],[-0.295150071382523,-0.132672727108002,-0.263332277536392],[-0.303436011075974,-0.12438677251339,-0.263332277536392],[-0.311721980571747,-0.132672727108002,-0.263332277536392],[-0.303436011075974,-0.140958666801453,-0.273689746856689],[-0.295150071382523,-0.132672727108002,-0.273689746856689],[-0.303436040878296,-0.12438677251339,-0.273689746856689],[-0.311721980571747,-0.132672727108002,-0.273689746856689],[-0.273976564407349,0.747543573379517,0.278371930122375],[-0.265690594911575,0.755829572677612,0.278371930122375],[-0.273976534605026,0.764115571975708,0.278371930122375],[-0.2822625041008,0.755829572677612,0.278371930122375],[-0.273976534605026,0.747543573379517,0.268014460802078],[-0.265690594911575,0.755829572677612,0.268014460802078],[-0.273976564407349,0.764115571975708,0.268014460802078],[-0.2822625041008,0.755829572677612,0.268014460802078],[-0.347434371709824,-0.714616417884827,0.73408830165863],[-0.33914840221405,-0.706330478191376,0.73408830165863],[-0.347434371709824,-0.69804447889328,0.73408830165863],[-0.355720281600952,-0.706330418586731,0.73408830165863],[-0.347434371709824,-0.714616417884827,0.723730802536011],[-0.33914840221405,-0.706330418586731,0.723730802536011],[-0.347434371709824,-0.69804447889328,0.723730802536011],[-0.355720281600952,-0.706330478191376,0.723730802536011],[0.829685807228088,-0.0138824982568622,0.138006672263145],[0.837971687316895,-0.00559654459357262,0.138006672263145],[0.829685688018799,0.00268940883688629,0.138006672263145],[0.821399867534637,-0.00559654459357262,0.138006672263145],[0.829685688018799,-0.0138824982568622,0.127649217844009],[0.837971687316895,-0.00559654459357262,0.127649217844009],[0.829685807228088,0.00268940883688629,0.127649217844009],[0.821399867534637,-0.00559654459357262,0.127649217844009],[1.13378131389618,-0.0115140108391643,0.17914941906929],[1.14206719398499,-0.00322805694304407,0.17914941906929],[1.13378119468689,0.00505789741873741,0.17914941906929],[1.12549531459808,-0.00322805671021342,0.17914941906929],[1.13378119468689,-0.0115140108391643,0.168791979551315],[1.14206719398499,-0.00322805671021342,0.168791979551315],[1.13378131389618,0.00505789741873741,0.168791979551315],[1.12549531459808,-0.00322805694304407,0.168791979551315],[0.0937590748071671,-0.0945512354373932,-0.325681179761887],[0.102045021951199,-0.0862652882933617,-0.325681179761887],[0.0937590599060059,-0.0779793336987495,-0.325681179761887],[0.0854731202125549,-0.0862652882933617,-0.325681179761887],[0.0937590599060059,-0.0945512354373932,-0.336038649082184],[0.102045021951199,-0.0862652882933617,-0.336038649082184],[0.0937590748071671,-0.0779793336987495,-0.336038649082184],[0.0854731202125549,-0.0862652882933617,-0.336038649082184],[0.279625654220581,-0.009451724588871,0.00708176521584392],[0.287911593914032,-0.00116577092558146,0.00708176521584392],[0.279625654220581,0.0071201822720468,0.00708176521584392],[0.27133971452713,-0.00116577092558146,0.00708176521584392],[0.279625654220581,-0.009451724588871,-0.00327567663043737],[0.287911593914032,-0.00116577092558146,-0.00327567663043737],[0.279625654220581,0.0071201822720468,-0.00327567663043737],[0.27133971452713,-0.00116577092558146,-0.00327567663043737],[-0.174566566944122,-0.183440327644348,-0.52840256690979],[-0.16628061234951,-0.175154373049736,-0.52840256690979],[-0.174566566944122,-0.166868433356285,-0.52840256690979],[-0.182852536439896,-0.175154373049736,-0.52840256690979],[-0.174566566944122,-0.183440327644348,-0.538760006427765],[-0.16628061234951,-0.175154373049736,-0.538760006427765],[-0.174566566944122,-0.166868433356285,-0.538760006427765],[-0.182852536439896,-0.175154373049736,-0.538760006427765]],"ignoreExtent":false,"flags":3},"20":{"id":20,"type":"text","material":{"lit":false},"vertices":[[-0.303436011075974,0.111186452209949,-0.11190801858902],[-0.273976534605026,0.999688744544983,0.429796159267426],[-0.347434341907501,-0.46247124671936,0.88551253080368],[0.829685747623444,0.238262623548508,0.289430916309357],[1.13378119468689,0.240631118416786,0.33057364821434],[0.0937590673565865,0.15759389102459,-0.174256935715675],[0.279625654220581,0.242693394422531,0.158506006002426],[-0.174566566944122,0.0687047988176346,-0.376978307962418]],"colors":[[1,0,0,1]],"texts":[["Adelphi"],["Citiclub"],["CrownTowers"],["FlagstaffCity"],["HotelSophia"],["Larwill"],["Mercure"],["QT"]],"cex":[[0.95]],"adj":[[0.5,0.5]],"centers":[[-0.303436011075974,0.111186452209949,-0.11190801858902],[-0.273976534605026,0.999688744544983,0.429796159267426],[-0.347434341907501,-0.46247124671936,0.88551253080368],[0.829685747623444,0.238262623548508,0.289430916309357],[1.13378119468689,0.240631118416786,0.33057364821434],[0.0937590673565865,0.15759389102459,-0.174256935715675],[0.279625654220581,0.242693394422531,0.158506006002426],[-0.174566566944122,0.0687047988176346,-0.376978307962418]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"5":{"id":5,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"4":{"id":4,"type":"background","material":{"fog":true},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","flags":0},"6":{"id":6,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","flags":0},"1":{"id":1,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":1,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,11.2797040939331],"modelMatrix":[[1,0,0,-0.856853604316711],[0,0.342020153999329,0.939692616462708,-0.36791056394577],[0,-0.939692616462708,0.342020153999329,-11.3110885620117],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-40.6620292663574],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-0.792192757129669,2.50589990615845,-1.65799856185913,1.85068118572235,-1.2945568561554,2.00747060775757],"windowRect":[105,123,361,379],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"/home/anastasios/R/x86_64-pc-linux-gnu-library/3.6/rgl/fonts/FreeSans.ttf","maxClipPlanes":8,"glVersion":3,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5],"subscenes":[],"flags":2643},"27":{"id":27,"type":"linestrip","material":{"alpha":0.498039215803146,"lit":false,"depth_test":"always","isTransparent":true},"vertices":[[0,0,-0.999000012874603],[1,0,-0.999000012874603],[1,1,-0.999000012874603],[0,1,-0.999000012874603],[0,0,-0.999000012874603]],"colors":[[0,0,0,0.498039215803146]],"centers":[[0,0,-0.999000012874603],[1,0,-0.999000012874603],[1,1,-0.999000012874603],[0,1,-0.999000012874603],[0,0,-0.999000012874603]],"ignoreExtent":false,"flags":32864}},"crosstalk":{"key":[null],"group":"","id":0,"options":[null]},"width":864,"height":576,"brushId":27,"sphereVerts":{"vb":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0746578340503426,0.146446609406726,0.212607523691814,0.270598050073099,0.318189645143208,0.353553390593274,0.375330277517865,0.38268343236509,0.375330277517865,0.353553390593274,0.318189645143208,0.270598050073099,0.212607523691814,0.146446609406726,0.0746578340503426,0,0,0.137949689641472,0.270598050073099,0.392847479193551,0.5,0.587937801209679,0.653281482438188,0.693519922661074,0.707106781186547,0.693519922661074,0.653281482438188,0.587937801209679,0.5,0.392847479193551,0.270598050073099,0.137949689641472,0,0,0.180239955501737,0.353553390593274,0.513279967159337,0.653281482438188,0.768177756711416,0.853553390593274,0.906127446352888,0.923879532511287,0.906127446352888,0.853553390593274,0.768177756711416,0.653281482438188,0.513279967159337,0.353553390593274,0.180239955501737,0,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186548,0.831469612302545,0.923879532511287,0.98078528040323,1,0.98078528040323,0.923879532511287,0.831469612302545,0.707106781186548,0.555570233019602,0.38268343236509,0.195090322016128,0,0,0.180239955501737,0.353553390593274,0.513279967159337,0.653281482438188,0.768177756711416,0.853553390593274,0.906127446352888,0.923879532511287,0.906127446352888,0.853553390593274,0.768177756711416,0.653281482438188,0.513279967159337,0.353553390593274,0.180239955501737,0,0,0.137949689641472,0.270598050073099,0.392847479193551,0.5,0.587937801209679,0.653281482438188,0.693519922661074,0.707106781186548,0.693519922661074,0.653281482438188,0.587937801209679,0.5,0.392847479193551,0.270598050073099,0.137949689641472,0,0,0.0746578340503427,0.146446609406726,0.212607523691814,0.270598050073099,0.318189645143209,0.353553390593274,0.375330277517865,0.38268343236509,0.375330277517865,0.353553390593274,0.318189645143209,0.270598050073099,0.212607523691814,0.146446609406726,0.0746578340503427,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0,-0.0746578340503427,-0.146446609406726,-0.212607523691814,-0.270598050073099,-0.318189645143209,-0.353553390593274,-0.375330277517865,-0.38268343236509,-0.375330277517865,-0.353553390593274,-0.318189645143209,-0.270598050073099,-0.212607523691814,-0.146446609406726,-0.0746578340503427,-0,-0,-0.137949689641472,-0.270598050073099,-0.392847479193551,-0.5,-0.587937801209679,-0.653281482438188,-0.693519922661074,-0.707106781186548,-0.693519922661074,-0.653281482438188,-0.587937801209679,-0.5,-0.392847479193551,-0.270598050073099,-0.137949689641472,-0,-0,-0.180239955501737,-0.353553390593274,-0.513279967159337,-0.653281482438188,-0.768177756711416,-0.853553390593274,-0.906127446352888,-0.923879532511287,-0.906127446352888,-0.853553390593274,-0.768177756711416,-0.653281482438188,-0.513279967159337,-0.353553390593274,-0.180239955501737,-0,-0,-0.195090322016128,-0.38268343236509,-0.555570233019602,-0.707106781186548,-0.831469612302545,-0.923879532511287,-0.98078528040323,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186548,-0.555570233019602,-0.38268343236509,-0.195090322016128,-0,-0,-0.180239955501737,-0.353553390593274,-0.513279967159337,-0.653281482438188,-0.768177756711416,-0.853553390593274,-0.906127446352888,-0.923879532511287,-0.906127446352888,-0.853553390593274,-0.768177756711416,-0.653281482438188,-0.513279967159337,-0.353553390593274,-0.180239955501737,-0,-0,-0.137949689641472,-0.270598050073099,-0.392847479193551,-0.5,-0.587937801209679,-0.653281482438188,-0.693519922661074,-0.707106781186547,-0.693519922661074,-0.653281482438188,-0.587937801209679,-0.5,-0.392847479193551,-0.270598050073099,-0.137949689641472,-0,-0,-0.0746578340503426,-0.146446609406726,-0.212607523691814,-0.270598050073099,-0.318189645143208,-0.353553390593274,-0.375330277517865,-0.38268343236509,-0.375330277517865,-0.353553390593274,-0.318189645143208,-0.270598050073099,-0.212607523691814,-0.146446609406726,-0.0746578340503426,-0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186547,-0.555570233019602,-0.38268343236509,-0.195090322016128,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186547,0.831469612302545,0.923879532511287,0.98078528040323,1],[0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186548,0.831469612302545,0.923879532511287,0.98078528040323,1,0.98078528040323,0.923879532511287,0.831469612302545,0.707106781186548,0.555570233019602,0.38268343236509,0.195090322016128,0,0,0.180239955501737,0.353553390593274,0.513279967159337,0.653281482438188,0.768177756711416,0.853553390593274,0.906127446352888,0.923879532511287,0.906127446352888,0.853553390593274,0.768177756711416,0.653281482438188,0.513279967159337,0.353553390593274,0.180239955501737,0,0,0.137949689641472,0.270598050073099,0.392847479193551,0.5,0.587937801209679,0.653281482438188,0.693519922661074,0.707106781186548,0.693519922661074,0.653281482438188,0.587937801209679,0.5,0.392847479193551,0.270598050073099,0.137949689641472,0,0,0.0746578340503426,0.146446609406726,0.212607523691814,0.270598050073099,0.318189645143209,0.353553390593274,0.375330277517865,0.38268343236509,0.375330277517865,0.353553390593274,0.318189645143209,0.270598050073099,0.212607523691814,0.146446609406726,0.0746578340503426,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0,-0.0746578340503426,-0.146446609406726,-0.212607523691814,-0.270598050073099,-0.318189645143208,-0.353553390593274,-0.375330277517865,-0.38268343236509,-0.375330277517865,-0.353553390593274,-0.318189645143208,-0.270598050073099,-0.212607523691814,-0.146446609406726,-0.0746578340503426,-0,-0,-0.137949689641472,-0.270598050073099,-0.392847479193551,-0.5,-0.587937801209679,-0.653281482438188,-0.693519922661074,-0.707106781186547,-0.693519922661074,-0.653281482438188,-0.587937801209679,-0.5,-0.392847479193551,-0.270598050073099,-0.137949689641472,-0,-0,-0.180239955501737,-0.353553390593274,-0.513279967159337,-0.653281482438188,-0.768177756711416,-0.853553390593274,-0.906127446352888,-0.923879532511287,-0.906127446352888,-0.853553390593274,-0.768177756711416,-0.653281482438188,-0.513279967159337,-0.353553390593274,-0.180239955501737,-0,-0,-0.195090322016128,-0.38268343236509,-0.555570233019602,-0.707106781186548,-0.831469612302545,-0.923879532511287,-0.98078528040323,-1,-0.98078528040323,-0.923879532511287,-0.831469612302545,-0.707106781186548,-0.555570233019602,-0.38268343236509,-0.195090322016128,-0,-0,-0.180239955501737,-0.353553390593274,-0.513279967159337,-0.653281482438188,-0.768177756711416,-0.853553390593274,-0.906127446352888,-0.923879532511287,-0.906127446352888,-0.853553390593274,-0.768177756711416,-0.653281482438188,-0.513279967159337,-0.353553390593274,-0.180239955501737,-0,-0,-0.137949689641472,-0.270598050073099,-0.392847479193551,-0.5,-0.58793780120968,-0.653281482438188,-0.693519922661074,-0.707106781186548,-0.693519922661074,-0.653281482438188,-0.58793780120968,-0.5,-0.392847479193551,-0.270598050073099,-0.137949689641472,-0,-0,-0.0746578340503427,-0.146446609406726,-0.212607523691814,-0.270598050073099,-0.318189645143209,-0.353553390593274,-0.375330277517866,-0.38268343236509,-0.375330277517866,-0.353553390593274,-0.318189645143209,-0.270598050073099,-0.212607523691814,-0.146446609406726,-0.0746578340503427,-0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0746578340503427,0.146446609406726,0.212607523691814,0.270598050073099,0.318189645143209,0.353553390593274,0.375330277517865,0.38268343236509,0.375330277517865,0.353553390593274,0.318189645143209,0.270598050073099,0.212607523691814,0.146446609406726,0.0746578340503427,0,0,0.137949689641472,0.270598050073098,0.392847479193551,0.5,0.587937801209679,0.653281482438188,0.693519922661074,0.707106781186547,0.693519922661074,0.653281482438188,0.587937801209679,0.5,0.392847479193551,0.270598050073098,0.137949689641472,0,0,0.180239955501737,0.353553390593274,0.513279967159337,0.653281482438188,0.768177756711416,0.853553390593274,0.906127446352888,0.923879532511287,0.906127446352888,0.853553390593274,0.768177756711416,0.653281482438188,0.513279967159337,0.353553390593274,0.180239955501737,0,0,0.195090322016128,0.38268343236509,0.555570233019602,0.707106781186548,0.831469612302545,0.923879532511287,0.98078528040323,1,0.98078528040323,0.923879532511287,0.831469612302545,0.707106781186548,0.555570233019602,0.38268343236509,0.195090322016128,0]],"it":[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270],[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288],[18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271]],"material":[],"normals":null,"texcoords":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1]]},"context":{"shiny":false,"rmarkdown":"xaringan::moon_reader"},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script>&lt;script&gt;/*
* Copyright (C) 2009 Apple Inc. All Rights Reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions
* are met:
* 1. Redistributions of source code must retain the above copyright
*    notice, this list of conditions and the following disclaimer.
* 2. Redistributions in binary form must reproduce the above copyright
*    notice, this list of conditions and the following disclaimer in the
*    documentation and/or other materials provided with the distribution.
*
* THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY
* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
* PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR
* CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
* EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
* PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
* PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
* Copyright (2016) Duncan Murdoch - fixed CanvasMatrix4.ortho,
* cleaned up.
*/
/*
CanvasMatrix4 class
This class implements a 4x4 matrix. It has functions which
duplicate the functionality of the OpenGL matrix stack and
glut functions.
IDL:
[
Constructor(in CanvasMatrix4 matrix),           // copy passed matrix into new CanvasMatrix4
Constructor(in sequence&lt;float&gt; array)           // create new CanvasMatrix4 with 16 floats (row major)
Constructor()                                   // create new CanvasMatrix4 with identity matrix
]
interface CanvasMatrix4 {
attribute float m11;
attribute float m12;
attribute float m13;
attribute float m14;
attribute float m21;
attribute float m22;
attribute float m23;
attribute float m24;
attribute float m31;
attribute float m32;
attribute float m33;
attribute float m34;
attribute float m41;
attribute float m42;
attribute float m43;
attribute float m44;
void load(in CanvasMatrix4 matrix);                 // copy the values from the passed matrix
void load(in sequence&lt;float&gt; array);                // copy 16 floats into the matrix
sequence&lt;float&gt; getAsArray();                       // return the matrix as an array of 16 floats
WebGLFloatArray getAsCanvasFloatArray();           // return the matrix as a WebGLFloatArray with 16 values
void makeIdentity();                                // replace the matrix with identity
void transpose();                                   // replace the matrix with its transpose
void invert();                                      // replace the matrix with its inverse
void translate(in float x, in float y, in float z); // multiply the matrix by passed translation values on the right
void scale(in float x, in float y, in float z);     // multiply the matrix by passed scale values on the right
void rotate(in float angle,                         // multiply the matrix by passed rotation values on the right
in float x, in float y, in float z);    // (angle is in degrees)
void multRight(in CanvasMatrix matrix);             // multiply the matrix by the passed matrix on the right
void multLeft(in CanvasMatrix matrix);              // multiply the matrix by the passed matrix on the left
void ortho(in float left, in float right,           // multiply the matrix by the passed ortho values on the right
in float bottom, in float top,
in float near, in float far);
void frustum(in float left, in float right,         // multiply the matrix by the passed frustum values on the right
in float bottom, in float top,
in float near, in float far);
void perspective(in float fovy, in float aspect,    // multiply the matrix by the passed perspective values on the right
in float zNear, in float zFar);
void lookat(in float eyex, in float eyey, in float eyez,    // multiply the matrix by the passed lookat
in float ctrx, in float ctry, in float ctrz,    // values on the right
in float upx, in float upy, in float upz);
}
*/
CanvasMatrix4 = function(m)
{
if (typeof m == 'object') {
if ("length" in m &amp;&amp; m.length &gt;= 16) {
this.load(m[0], m[1], m[2], m[3], m[4], m[5], m[6], m[7], m[8], m[9], m[10], m[11], m[12], m[13], m[14], m[15]);
return;
}
else if (m instanceof CanvasMatrix4) {
this.load(m);
return;
}
}
this.makeIdentity();
};
CanvasMatrix4.prototype.load = function()
{
if (arguments.length == 1 &amp;&amp; typeof arguments[0] == 'object') {
var matrix = arguments[0];
if ("length" in matrix &amp;&amp; matrix.length == 16) {
this.m11 = matrix[0];
this.m12 = matrix[1];
this.m13 = matrix[2];
this.m14 = matrix[3];
this.m21 = matrix[4];
this.m22 = matrix[5];
this.m23 = matrix[6];
this.m24 = matrix[7];
this.m31 = matrix[8];
this.m32 = matrix[9];
this.m33 = matrix[10];
this.m34 = matrix[11];
this.m41 = matrix[12];
this.m42 = matrix[13];
this.m43 = matrix[14];
this.m44 = matrix[15];
return;
}
if (arguments[0] instanceof CanvasMatrix4) {
this.m11 = matrix.m11;
this.m12 = matrix.m12;
this.m13 = matrix.m13;
this.m14 = matrix.m14;
this.m21 = matrix.m21;
this.m22 = matrix.m22;
this.m23 = matrix.m23;
this.m24 = matrix.m24;
this.m31 = matrix.m31;
this.m32 = matrix.m32;
this.m33 = matrix.m33;
this.m34 = matrix.m34;
this.m41 = matrix.m41;
this.m42 = matrix.m42;
this.m43 = matrix.m43;
this.m44 = matrix.m44;
return;
}
}
this.makeIdentity();
};
CanvasMatrix4.prototype.getAsArray = function()
{
return [
this.m11, this.m12, this.m13, this.m14,
this.m21, this.m22, this.m23, this.m24,
this.m31, this.m32, this.m33, this.m34,
this.m41, this.m42, this.m43, this.m44
];
};
CanvasMatrix4.prototype.getAsWebGLFloatArray = function()
{
return new WebGLFloatArray(this.getAsArray());
};
CanvasMatrix4.prototype.makeIdentity = function()
{
this.m11 = 1;
this.m12 = 0;
this.m13 = 0;
this.m14 = 0;
this.m21 = 0;
this.m22 = 1;
this.m23 = 0;
this.m24 = 0;
this.m31 = 0;
this.m32 = 0;
this.m33 = 1;
this.m34 = 0;
this.m41 = 0;
this.m42 = 0;
this.m43 = 0;
this.m44 = 1;
};
CanvasMatrix4.prototype.transpose = function()
{
var tmp = this.m12;
this.m12 = this.m21;
this.m21 = tmp;
tmp = this.m13;
this.m13 = this.m31;
this.m31 = tmp;
tmp = this.m14;
this.m14 = this.m41;
this.m41 = tmp;
tmp = this.m23;
this.m23 = this.m32;
this.m32 = tmp;
tmp = this.m24;
this.m24 = this.m42;
this.m42 = tmp;
tmp = this.m34;
this.m34 = this.m43;
this.m43 = tmp;
};
CanvasMatrix4.prototype.invert = function()
{
// Calculate the 4x4 determinant
// If the determinant is zero,
// then the inverse matrix is not unique.
var det = this._determinant4x4();
if (Math.abs(det) &lt; 1e-8)
return null;
this._makeAdjoint();
// Scale the adjoint matrix to get the inverse
this.m11 /= det;
this.m12 /= det;
this.m13 /= det;
this.m14 /= det;
this.m21 /= det;
this.m22 /= det;
this.m23 /= det;
this.m24 /= det;
this.m31 /= det;
this.m32 /= det;
this.m33 /= det;
this.m34 /= det;
this.m41 /= det;
this.m42 /= det;
this.m43 /= det;
this.m44 /= det;
};
CanvasMatrix4.prototype.translate = function(x,y,z)
{
if (x === undefined)
x = 0;
if (y === undefined)
y = 0;
if (z === undefined)
z = 0;
var matrix = new CanvasMatrix4();
matrix.m41 = x;
matrix.m42 = y;
matrix.m43 = z;
this.multRight(matrix);
};
CanvasMatrix4.prototype.scale = function(x,y,z)
{
if (x === undefined)
x = 1;
if (z === undefined) {
if (y === undefined) {
y = x;
z = x;
}
else
z = 1;
}
else if (y === undefined)
y = x;
var matrix = new CanvasMatrix4();
matrix.m11 = x;
matrix.m22 = y;
matrix.m33 = z;
this.multRight(matrix);
};
CanvasMatrix4.prototype.rotate = function(angle,x,y,z)
{
// angles are in degrees. Switch to radians
angle = angle / 180 * Math.PI;
angle /= 2;
var sinA = Math.sin(angle);
var cosA = Math.cos(angle);
var sinA2 = sinA * sinA;
// normalize
var length = Math.sqrt(x * x + y * y + z * z);
if (length === 0) {
// bad vector, just use something reasonable
x = 0;
y = 0;
z = 1;
} else if (length != 1) {
x /= length;
y /= length;
z /= length;
}
var mat = new CanvasMatrix4();
// optimize case where axis is along major axis
if (x == 1 &amp;&amp; y === 0 &amp;&amp; z === 0) {
mat.m11 = 1;
mat.m12 = 0;
mat.m13 = 0;
mat.m21 = 0;
mat.m22 = 1 - 2 * sinA2;
mat.m23 = 2 * sinA * cosA;
mat.m31 = 0;
mat.m32 = -2 * sinA * cosA;
mat.m33 = 1 - 2 * sinA2;
mat.m14 = mat.m24 = mat.m34 = 0;
mat.m41 = mat.m42 = mat.m43 = 0;
mat.m44 = 1;
} else if (x === 0 &amp;&amp; y == 1 &amp;&amp; z === 0) {
mat.m11 = 1 - 2 * sinA2;
mat.m12 = 0;
mat.m13 = -2 * sinA * cosA;
mat.m21 = 0;
mat.m22 = 1;
mat.m23 = 0;
mat.m31 = 2 * sinA * cosA;
mat.m32 = 0;
mat.m33 = 1 - 2 * sinA2;
mat.m14 = mat.m24 = mat.m34 = 0;
mat.m41 = mat.m42 = mat.m43 = 0;
mat.m44 = 1;
} else if (x === 0 &amp;&amp; y === 0 &amp;&amp; z == 1) {
mat.m11 = 1 - 2 * sinA2;
mat.m12 = 2 * sinA * cosA;
mat.m13 = 0;
mat.m21 = -2 * sinA * cosA;
mat.m22 = 1 - 2 * sinA2;
mat.m23 = 0;
mat.m31 = 0;
mat.m32 = 0;
mat.m33 = 1;
mat.m14 = mat.m24 = mat.m34 = 0;
mat.m41 = mat.m42 = mat.m43 = 0;
mat.m44 = 1;
} else {
var x2 = x*x;
var y2 = y*y;
var z2 = z*z;
mat.m11 = 1 - 2 * (y2 + z2) * sinA2;
mat.m12 = 2 * (x * y * sinA2 + z * sinA * cosA);
mat.m13 = 2 * (x * z * sinA2 - y * sinA * cosA);
mat.m21 = 2 * (y * x * sinA2 - z * sinA * cosA);
mat.m22 = 1 - 2 * (z2 + x2) * sinA2;
mat.m23 = 2 * (y * z * sinA2 + x * sinA * cosA);
mat.m31 = 2 * (z * x * sinA2 + y * sinA * cosA);
mat.m32 = 2 * (z * y * sinA2 - x * sinA * cosA);
mat.m33 = 1 - 2 * (x2 + y2) * sinA2;
mat.m14 = mat.m24 = mat.m34 = 0;
mat.m41 = mat.m42 = mat.m43 = 0;
mat.m44 = 1;
}
this.multRight(mat);
};
CanvasMatrix4.prototype.multRight = function(mat)
{
var m11 = (this.m11 * mat.m11 + this.m12 * mat.m21 +
this.m13 * mat.m31 + this.m14 * mat.m41);
var m12 = (this.m11 * mat.m12 + this.m12 * mat.m22 +
this.m13 * mat.m32 + this.m14 * mat.m42);
var m13 = (this.m11 * mat.m13 + this.m12 * mat.m23 +
this.m13 * mat.m33 + this.m14 * mat.m43);
var m14 = (this.m11 * mat.m14 + this.m12 * mat.m24 +
this.m13 * mat.m34 + this.m14 * mat.m44);
var m21 = (this.m21 * mat.m11 + this.m22 * mat.m21 +
this.m23 * mat.m31 + this.m24 * mat.m41);
var m22 = (this.m21 * mat.m12 + this.m22 * mat.m22 +
this.m23 * mat.m32 + this.m24 * mat.m42);
var m23 = (this.m21 * mat.m13 + this.m22 * mat.m23 +
this.m23 * mat.m33 + this.m24 * mat.m43);
var m24 = (this.m21 * mat.m14 + this.m22 * mat.m24 +
this.m23 * mat.m34 + this.m24 * mat.m44);
var m31 = (this.m31 * mat.m11 + this.m32 * mat.m21 +
this.m33 * mat.m31 + this.m34 * mat.m41);
var m32 = (this.m31 * mat.m12 + this.m32 * mat.m22 +
this.m33 * mat.m32 + this.m34 * mat.m42);
var m33 = (this.m31 * mat.m13 + this.m32 * mat.m23 +
this.m33 * mat.m33 + this.m34 * mat.m43);
var m34 = (this.m31 * mat.m14 + this.m32 * mat.m24 +
this.m33 * mat.m34 + this.m34 * mat.m44);
var m41 = (this.m41 * mat.m11 + this.m42 * mat.m21 +
this.m43 * mat.m31 + this.m44 * mat.m41);
var m42 = (this.m41 * mat.m12 + this.m42 * mat.m22 +
this.m43 * mat.m32 + this.m44 * mat.m42);
var m43 = (this.m41 * mat.m13 + this.m42 * mat.m23 +
this.m43 * mat.m33 + this.m44 * mat.m43);
var m44 = (this.m41 * mat.m14 + this.m42 * mat.m24 +
this.m43 * mat.m34 + this.m44 * mat.m44);
this.m11 = m11;
this.m12 = m12;
this.m13 = m13;
this.m14 = m14;
this.m21 = m21;
this.m22 = m22;
this.m23 = m23;
this.m24 = m24;
this.m31 = m31;
this.m32 = m32;
this.m33 = m33;
this.m34 = m34;
this.m41 = m41;
this.m42 = m42;
this.m43 = m43;
this.m44 = m44;
};
CanvasMatrix4.prototype.multLeft = function(mat)
{
var m11 = (mat.m11 * this.m11 + mat.m12 * this.m21 +
mat.m13 * this.m31 + mat.m14 * this.m41);
var m12 = (mat.m11 * this.m12 + mat.m12 * this.m22 +
mat.m13 * this.m32 + mat.m14 * this.m42);
var m13 = (mat.m11 * this.m13 + mat.m12 * this.m23 +
mat.m13 * this.m33 + mat.m14 * this.m43);
var m14 = (mat.m11 * this.m14 + mat.m12 * this.m24 +
mat.m13 * this.m34 + mat.m14 * this.m44);
var m21 = (mat.m21 * this.m11 + mat.m22 * this.m21 +
mat.m23 * this.m31 + mat.m24 * this.m41);
var m22 = (mat.m21 * this.m12 + mat.m22 * this.m22 +
mat.m23 * this.m32 + mat.m24 * this.m42);
var m23 = (mat.m21 * this.m13 + mat.m22 * this.m23 +
mat.m23 * this.m33 + mat.m24 * this.m43);
var m24 = (mat.m21 * this.m14 + mat.m22 * this.m24 +
mat.m23 * this.m34 + mat.m24 * this.m44);
var m31 = (mat.m31 * this.m11 + mat.m32 * this.m21 +
mat.m33 * this.m31 + mat.m34 * this.m41);
var m32 = (mat.m31 * this.m12 + mat.m32 * this.m22 +
mat.m33 * this.m32 + mat.m34 * this.m42);
var m33 = (mat.m31 * this.m13 + mat.m32 * this.m23 +
mat.m33 * this.m33 + mat.m34 * this.m43);
var m34 = (mat.m31 * this.m14 + mat.m32 * this.m24 +
mat.m33 * this.m34 + mat.m34 * this.m44);
var m41 = (mat.m41 * this.m11 + mat.m42 * this.m21 +
mat.m43 * this.m31 + mat.m44 * this.m41);
var m42 = (mat.m41 * this.m12 + mat.m42 * this.m22 +
mat.m43 * this.m32 + mat.m44 * this.m42);
var m43 = (mat.m41 * this.m13 + mat.m42 * this.m23 +
mat.m43 * this.m33 + mat.m44 * this.m43);
var m44 = (mat.m41 * this.m14 + mat.m42 * this.m24 +
mat.m43 * this.m34 + mat.m44 * this.m44);
this.m11 = m11;
this.m12 = m12;
this.m13 = m13;
this.m14 = m14;
this.m21 = m21;
this.m22 = m22;
this.m23 = m23;
this.m24 = m24;
this.m31 = m31;
this.m32 = m32;
this.m33 = m33;
this.m34 = m34;
this.m41 = m41;
this.m42 = m42;
this.m43 = m43;
this.m44 = m44;
};
CanvasMatrix4.prototype.ortho = function(left, right, bottom, top, near, far)
{
var tx = (left + right) / (left - right);
var ty = (top + bottom) / (bottom - top);
var tz = (far + near) / (near - far);
var matrix = new CanvasMatrix4();
matrix.m11 = 2 / (right - left);
matrix.m12 = 0;
matrix.m13 = 0;
matrix.m14 = 0;
matrix.m21 = 0;
matrix.m22 = 2 / (top - bottom);
matrix.m23 = 0;
matrix.m24 = 0;
matrix.m31 = 0;
matrix.m32 = 0;
matrix.m33 = -2 / (far - near);
matrix.m34 = 0;
matrix.m41 = tx;
matrix.m42 = ty;
matrix.m43 = tz;
matrix.m44 = 1;
this.multRight(matrix);
};
CanvasMatrix4.prototype.frustum = function(left, right, bottom, top, near, far)
{
var matrix = new CanvasMatrix4();
var A = (right + left) / (right - left);
var B = (top + bottom) / (top - bottom);
var C = -(far + near) / (far - near);
var D = -(2 * far * near) / (far - near);
matrix.m11 = (2 * near) / (right - left);
matrix.m12 = 0;
matrix.m13 = 0;
matrix.m14 = 0;
matrix.m21 = 0;
matrix.m22 = 2 * near / (top - bottom);
matrix.m23 = 0;
matrix.m24 = 0;
matrix.m31 = A;
matrix.m32 = B;
matrix.m33 = C;
matrix.m34 = -1;
matrix.m41 = 0;
matrix.m42 = 0;
matrix.m43 = D;
matrix.m44 = 0;
this.multRight(matrix);
};
CanvasMatrix4.prototype.perspective = function(fovy, aspect, zNear, zFar)
{
var top = Math.tan(fovy * Math.PI / 360) * zNear;
var bottom = -top;
var left = aspect * bottom;
var right = aspect * top;
this.frustum(left, right, bottom, top, zNear, zFar);
};
CanvasMatrix4.prototype.lookat = function(eyex, eyey, eyez, centerx, centery, centerz, upx, upy, upz)
{
var matrix = new CanvasMatrix4();
// Make rotation matrix
// Z vector
var zx = eyex - centerx;
var zy = eyey - centery;
var zz = eyez - centerz;
var mag = Math.sqrt(zx * zx + zy * zy + zz * zz);
if (mag) {
zx /= mag;
zy /= mag;
zz /= mag;
}
// Y vector
var yx = upx;
var yy = upy;
var yz = upz;
// X vector = Y cross Z
xx =  yy * zz - yz * zy;
xy = -yx * zz + yz * zx;
xz =  yx * zy - yy * zx;
// Recompute Y = Z cross X
yx = zy * xz - zz * xy;
yy = -zx * xz + zz * xx;
yx = zx * xy - zy * xx;
// cross product gives area of parallelogram, which is &lt; 1.0 for
// non-perpendicular unit-length vectors; so normalize x, y here
mag = Math.sqrt(xx * xx + xy * xy + xz * xz);
if (mag) {
xx /= mag;
xy /= mag;
xz /= mag;
}
mag = Math.sqrt(yx * yx + yy * yy + yz * yz);
if (mag) {
yx /= mag;
yy /= mag;
yz /= mag;
}
matrix.m11 = xx;
matrix.m12 = xy;
matrix.m13 = xz;
matrix.m14 = 0;
matrix.m21 = yx;
matrix.m22 = yy;
matrix.m23 = yz;
matrix.m24 = 0;
matrix.m31 = zx;
matrix.m32 = zy;
matrix.m33 = zz;
matrix.m34 = 0;
matrix.m41 = 0;
matrix.m42 = 0;
matrix.m43 = 0;
matrix.m44 = 1;
matrix.translate(-eyex, -eyey, -eyez);
this.multRight(matrix);
};
// Support functions
CanvasMatrix4.prototype._determinant2x2 = function(a, b, c, d)
{
return a * d - b * c;
};
CanvasMatrix4.prototype._determinant3x3 = function(a1, a2, a3, b1, b2, b3, c1, c2, c3)
{
return a1 * this._determinant2x2(b2, b3, c2, c3) -
b1 * this._determinant2x2(a2, a3, c2, c3) +
c1 * this._determinant2x2(a2, a3, b2, b3);
};
CanvasMatrix4.prototype._determinant4x4 = function()
{
var a1 = this.m11;
var b1 = this.m12;
var c1 = this.m13;
var d1 = this.m14;
var a2 = this.m21;
var b2 = this.m22;
var c2 = this.m23;
var d2 = this.m24;
var a3 = this.m31;
var b3 = this.m32;
var c3 = this.m33;
var d3 = this.m34;
var a4 = this.m41;
var b4 = this.m42;
var c4 = this.m43;
var d4 = this.m44;
return a1 * this._determinant3x3(b2, b3, b4, c2, c3, c4, d2, d3, d4) -
b1 * this._determinant3x3(a2, a3, a4, c2, c3, c4, d2, d3, d4) +
c1 * this._determinant3x3(a2, a3, a4, b2, b3, b4, d2, d3, d4) -
d1 * this._determinant3x3(a2, a3, a4, b2, b3, b4, c2, c3, c4);
};
CanvasMatrix4.prototype._makeAdjoint = function()
{
var a1 = this.m11;
var b1 = this.m12;
var c1 = this.m13;
var d1 = this.m14;
var a2 = this.m21;
var b2 = this.m22;
var c2 = this.m23;
var d2 = this.m24;
var a3 = this.m31;
var b3 = this.m32;
var c3 = this.m33;
var d3 = this.m34;
var a4 = this.m41;
var b4 = this.m42;
var c4 = this.m43;
var d4 = this.m44;
// Row column labeling reversed since we transpose rows &amp; columns
this.m11  =   this._determinant3x3(b2, b3, b4, c2, c3, c4, d2, d3, d4);
this.m21  = - this._determinant3x3(a2, a3, a4, c2, c3, c4, d2, d3, d4);
this.m31  =   this._determinant3x3(a2, a3, a4, b2, b3, b4, d2, d3, d4);
this.m41  = - this._determinant3x3(a2, a3, a4, b2, b3, b4, c2, c3, c4);
this.m12  = - this._determinant3x3(b1, b3, b4, c1, c3, c4, d1, d3, d4);
this.m22  =   this._determinant3x3(a1, a3, a4, c1, c3, c4, d1, d3, d4);
this.m32  = - this._determinant3x3(a1, a3, a4, b1, b3, b4, d1, d3, d4);
this.m42  =   this._determinant3x3(a1, a3, a4, b1, b3, b4, c1, c3, c4);
this.m13  =   this._determinant3x3(b1, b2, b4, c1, c2, c4, d1, d2, d4);
this.m23  = - this._determinant3x3(a1, a2, a4, c1, c2, c4, d1, d2, d4);
this.m33  =   this._determinant3x3(a1, a2, a4, b1, b2, b4, d1, d2, d4);
this.m43  = - this._determinant3x3(a1, a2, a4, b1, b2, b4, c1, c2, c4);
this.m14  = - this._determinant3x3(b1, b2, b3, c1, c2, c3, d1, d2, d3);
this.m24  =   this._determinant3x3(a1, a2, a3, c1, c2, c3, d1, d2, d3);
this.m34  = - this._determinant3x3(a1, a2, a3, b1, b2, b3, d1, d2, d3);
this.m44  =   this._determinant3x3(a1, a2, a3, b1, b2, b3, c1, c2, c3);
};&lt;/script&gt;
&lt;script&gt;// To generate the help pages for this library, use
// jsdoc --destination ../../../doc/rglwidgetClass --template ~/node_modules/jsdoc-baseline rglClass.src.js
// To validate, use
// setwd(".../inst/htmlwidgets/lib/rglClass")
// hints &lt;- js::jshint(readLines("rglClass.src.js"))
// hints[, c("line", "reason")]
/**
* The class of an rgl widget
* @class
*/
rglwidgetClass = function() {
this.canvas = null;
this.userMatrix = new CanvasMatrix4();
this.types = [];
this.prMatrix = new CanvasMatrix4();
this.mvMatrix = new CanvasMatrix4();
this.vp = null;
this.prmvMatrix = null;
this.origs = null;
this.gl = null;
this.scene = null;
this.select = {state: "inactive", subscene: null, region: {p1: {x:0, y:0}, p2: {x:0, y:0}}};
this.drawing = false;
};
/**
* Multiply matrix by vector
* @returns {number[]}
* @param M {number[][]} Left operand
* @param v {number[]} Right operand
*/
rglwidgetClass.prototype.multMV = function(M, v) {
return [ M.m11 * v[0] + M.m12 * v[1] + M.m13 * v[2] + M.m14 * v[3],
M.m21 * v[0] + M.m22 * v[1] + M.m23 * v[2] + M.m24 * v[3],
M.m31 * v[0] + M.m32 * v[1] + M.m33 * v[2] + M.m34 * v[3],
M.m41 * v[0] + M.m42 * v[1] + M.m43 * v[2] + M.m44 * v[3]
];
};
/**
* Multiply row vector by Matrix
* @returns {number[]}
* @param v {number[]} left operand
* @param M {number[][]} right operand
*/
rglwidgetClass.prototype.multVM = function(v, M) {
return [ M.m11 * v[0] + M.m21 * v[1] + M.m31 * v[2] + M.m41 * v[3],
M.m12 * v[0] + M.m22 * v[1] + M.m32 * v[2] + M.m42 * v[3],
M.m13 * v[0] + M.m23 * v[1] + M.m33 * v[2] + M.m43 * v[3],
M.m14 * v[0] + M.m24 * v[1] + M.m34 * v[2] + M.m44 * v[3]
];
};
/**
* Euclidean length of a vector
* @returns {number}
* @param v {number[]}
*/
rglwidgetClass.prototype.vlen = function(v) {
return Math.sqrt(this.dotprod(v, v));
};
/**
* Dot product of two vectors
* @instance rglwidgetClass
* @returns {number}
* @param a {number[]}
* @param b {number[]}
*/
rglwidgetClass.prototype.dotprod = function(a, b) {
return a[0]*b[0] + a[1]*b[1] + a[2]*b[2];
};
/**
* Cross product of two vectors
* @returns {number[]}
* @param a {number[]}
* @param b {number[]}
*/
rglwidgetClass.prototype.xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
};
/**
* Bind vectors or matrices by columns
* @returns {number[][]}
* @param a {number[]|number[][]}
* @param b {number[]|number[][]}
*/
rglwidgetClass.prototype.cbind = function(a, b) {
if (b.length &lt; a.length)
b = this.repeatToLen(b, a.length);
else if (a.length &lt; b.length)
a = this.repeatToLen(a, b.length);
return a.map(function(currentValue, index, array) {
return currentValue.concat(b[index]);
});
};
/**
* Swap elements
* @returns {any[]}
* @param a {any[]}
* @param i {number} Element to swap
* @param j {number} Other element to swap
*/
rglwidgetClass.prototype.swap = function(a, i, j) {
var temp = a[i];
a[i] = a[j];
a[j] = temp;
};
/**
* Flatten a matrix into a vector
* @returns {any[]}
* @param a {any[][]}
*/
rglwidgetClass.prototype.flatten = function(arr, result) {
var value;
if (typeof result === "undefined") result = [];
for (var i = 0, length = arr.length; i &lt; length; i++) {
value = arr[i];
if (Array.isArray(value)) {
this.flatten(value, result);
} else {
result.push(value);
}
}
return result;
};
/**
* set element of 1d or 2d array as if it was flattened.
* Column major, zero based!
* @returns {any[]|any[][]}
* @param {any[]|any[][]} a - array
* @param {number} i - element
* @param {any} value
*/
rglwidgetClass.prototype.setElement = function(a, i, value) {
if (Array.isArray(a[0])) {
var dim = a.length,
col = Math.floor(i/dim),
row = i % dim;
a[row][col] = value;
} else {
a[i] = value;
}
};
/**
* Transpose an array
* @returns {any[][]}
* @param {any[][]} a
*/
rglwidgetClass.prototype.transpose = function(a) {
var newArray = [],
n = a.length,
m = a[0].length,
i;
for(i = 0; i &lt; m; i++){
newArray.push([]);
}
for(i = 0; i &lt; n; i++){
for(var j = 0; j &lt; m; j++){
newArray[j].push(a[i][j]);
}
}
return newArray;
};
/**
* Calculate sum of squares of a numeric vector
* @returns {number}
* @param {number[]} x
*/
rglwidgetClass.prototype.sumsq = function(x) {
var result = 0, i;
for (i=0; i &lt; x.length; i++)
result += x[i]*x[i];
return result;
};
/**
* Convert a matrix to a CanvasMatrix4
* @returns {CanvasMatrix4}
* @param {number[][]|number[]} mat
*/
rglwidgetClass.prototype.toCanvasMatrix4 = function(mat) {
if (mat instanceof CanvasMatrix4)
return mat;
var result = new CanvasMatrix4();
mat = this.flatten(this.transpose(mat));
result.load(mat);
return result;
};
/**
* Convert an R-style numeric colour string to an rgb vector
* @returns {number[]}
* @param {string} s
*/
rglwidgetClass.prototype.stringToRgb = function(s) {
s = s.replace("#", "");
var bigint = parseInt(s, 16);
return [((bigint &gt;&gt; 16) &amp; 255)/255,
((bigint &gt;&gt; 8) &amp; 255)/255,
(bigint &amp; 255)/255];
};
/**
* Take a component-by-component product of two 3 vectors
* @returns {number[]}
* @param {number[]} x
* @param {number[]} y
*/
rglwidgetClass.prototype.componentProduct = function(x, y) {
if (typeof y === "undefined") {
this.alertOnce("Bad arg to componentProduct");
}
var result = new Float32Array(3), i;
for (i = 0; i&lt;3; i++)
result[i] = x[i]*y[i];
return result;
};
/**
* Get next higher power of two
* @returns { number }
* @param { number } value - input value
*/
rglwidgetClass.prototype.getPowerOfTwo = function(value) {
var pow = 1;
while(pow&lt;value) {
pow *= 2;
}
return pow;
};
/**
* Unique entries
* @returns { any[] }
* @param { any[] } arr - An array
*/
rglwidgetClass.prototype.unique = function(arr) {
arr = [].concat(arr);
return arr.filter(function(value, index, self) {
return self.indexOf(value) === index;
});
};
/**
* Shallow compare of arrays
* @returns { boolean }
* @param { any[] } a - An array
* @param { any[] } b - Another array
*/
rglwidgetClass.prototype.equalArrays = function(a, b) {
return a === b || (a &amp;&amp; b &amp;&amp;
a.length === b.length &amp;&amp;
a.every(function(v, i) {return v === b[i];}));
};
/**
* Repeat an array to a desired length
* @returns {any[]}
* @param {any | any[]} arr The input array
* @param {number} len The desired output length
*/
rglwidgetClass.prototype.repeatToLen = function(arr, len) {
arr = [].concat(arr);
while (arr.length &lt; len/2)
arr = arr.concat(arr);
return arr.concat(arr.slice(0, len - arr.length));
};
/**
* Give a single alert message, not to be repeated.
* @param {string} msg  The message to give.
*/
rglwidgetClass.prototype.alertOnce = function(msg) {
if (typeof this.alerted !== "undefined")
return;
this.alerted = true;
alert(msg);
};
rglwidgetClass.prototype.f_is_lit = 1;
rglwidgetClass.prototype.f_is_smooth = 2;
rglwidgetClass.prototype.f_has_texture = 4;
rglwidgetClass.prototype.f_depth_sort = 8;
rglwidgetClass.prototype.f_fixed_quads = 16;
rglwidgetClass.prototype.f_is_transparent = 32;
rglwidgetClass.prototype.f_is_lines = 64;
rglwidgetClass.prototype.f_sprites_3d = 128;
rglwidgetClass.prototype.f_sprite_3d = 256;
rglwidgetClass.prototype.f_is_subscene = 512;
rglwidgetClass.prototype.f_is_clipplanes = 1024;
rglwidgetClass.prototype.f_fixed_size = 2048;
rglwidgetClass.prototype.f_is_points = 4096;
rglwidgetClass.prototype.f_is_twosided = 8192;
rglwidgetClass.prototype.f_fat_lines = 16384;
rglwidgetClass.prototype.f_is_brush = 32768;
/**
* Which list does a particular id come from?
* @returns { string }
* @param {number} id The id to look up.
*/
rglwidgetClass.prototype.whichList = function(id) {
var obj = this.getObj(id),
flags = obj.flags;
if (obj.type === "light")
return "lights";
if (flags &amp; this.f_is_subscene)
return "subscenes";
if (flags &amp; this.f_is_clipplanes)
return "clipplanes";
if (flags &amp; this.f_is_transparent)
return "transparent";
return "opaque";
};
/**
* Get an object by id number.
* @returns { Object }
* @param {number} id
*/
rglwidgetClass.prototype.getObj = function(id) {
if (typeof id !== "number") {
this.alertOnce("getObj id is "+typeof id);
}
return this.scene.objects[id];
};
/**
* Get ids of a particular type from a subscene or the whole scene
* @returns { number[] }
* @param {string} type What type of object?
* @param {number} subscene  Which subscene?  If not given, find in the whole scene
*/
rglwidgetClass.prototype.getIdsByType = function(type, subscene) {
var
result = [], i, self = this;
if (typeof subscene === "undefined") {
Object.keys(this.scene.objects).forEach(
function(key) {
key = parseInt(key, 10);
if (self.getObj(key).type === type)
result.push(key);
});
} else {
ids = this.getObj(subscene).objects;
for (i=0; i &lt; ids.length; i++) {
if (this.getObj(ids[i]).type === type) {
result.push(ids[i]);
}
}
}
return result;
};
/**
* Get a particular material property for an id
* @returns { any }
* @param {number} id  Which object?
* @param {string} property Which material property?
*/
rglwidgetClass.prototype.getMaterial = function(id, property) {
var obj = this.getObj(id), mat;
if (typeof obj.material === "undefined")
console.error("material undefined");
mat = obj.material[property];
if (typeof mat === "undefined")
mat = this.scene.material[property];
return mat;
};
/**
* Is a particular id in a subscene?
* @returns { boolean }
* @param {number} id Which id?
* @param {number} subscene Which subscene id?
*/
rglwidgetClass.prototype.inSubscene = function(id, subscene) {
return this.getObj(subscene).objects.indexOf(id) &gt; -1;
};
/**
* Add an id to a subscene.
* @param {number} id Which id?
* @param {number} subscene Which subscene id?
*/
rglwidgetClass.prototype.addToSubscene = function(id, subscene) {
var thelist,
thesub = this.getObj(subscene),
ids = [id],
obj = this.getObj(id), i;
if (typeof obj != "undefined" &amp;&amp; typeof (obj.newIds) !== "undefined") {
ids = ids.concat(obj.newIds);
}
thesub.objects = [].concat(thesub.objects);
for (i = 0; i &lt; ids.length; i++) {
id = ids[i];
if (thesub.objects.indexOf(id) == -1) {
thelist = this.whichList(id);
thesub.objects.push(id);
thesub[thelist].push(id);
}
}
};
/**
* Delete an id from a subscene
* @param { number } id - the id to add
* @param { number } subscene - the id of the subscene
*/
rglwidgetClass.prototype.delFromSubscene = function(id, subscene) {
var thelist,
thesub = this.getObj(subscene),
obj = this.getObj(id),
ids = [id], i;
if (typeof obj !== "undefined" &amp;&amp; typeof (obj.newIds) !== "undefined")
ids = ids.concat(obj.newIds);
thesub.objects = [].concat(thesub.objects); // It might be a scalar
for (j=0; j&lt;ids.length;j++) {
id = ids[j];
i = thesub.objects.indexOf(id);
if (i &gt; -1) {
thesub.objects.splice(i, 1);
thelist = this.whichList(id);
i = thesub[thelist].indexOf(id);
thesub[thelist].splice(i, 1);
}
}
};
/**
* Set the ids in a subscene
* @param { number[] } ids - the ids to set
* @param { number } subsceneid - the id of the subscene
*/
rglwidgetClass.prototype.setSubsceneEntries = function(ids, subsceneid) {
var sub = this.getObj(subsceneid);
sub.objects = ids;
this.initSubscene(subsceneid);
};
/**
* Get the ids in a subscene
* @returns {number[]}
* @param { number } subscene - the id of the subscene
*/
rglwidgetClass.prototype.getSubsceneEntries = function(subscene) {
return this.getObj(subscene).objects;
};
/**
* Get the ids of the subscenes within a subscene
* @returns { number[] }
* @param { number } subscene - the id of the subscene
*/
rglwidgetClass.prototype.getChildSubscenes = function(subscene) {
return this.getObj(subscene).subscenes;
};
/**
* Start drawing
* @returns { boolean } Previous state
*/
rglwidgetClass.prototype.startDrawing = function() {
var value = this.drawing;
this.drawing = true;
return value;
};
/**
* Stop drawing and check for context loss
* @param { boolean } saved - Previous state
*/
rglwidgetClass.prototype.stopDrawing = function(saved) {
this.drawing = saved;
if (!saved &amp;&amp; this.gl &amp;&amp; this.gl.isContextLost())
this.restartCanvas();
};
/**
* Generate the vertex shader for an object
* @returns {string}
* @param { number } id - Id of object
*/
rglwidgetClass.prototype.getVertexShader = function(id) {
var obj = this.getObj(id),
userShader = obj.userVertexShader,
flags = obj.flags,
type = obj.type,
is_lit = flags &amp; this.f_is_lit,
has_texture = flags &amp; this.f_has_texture,
fixed_quads = flags &amp; this.f_fixed_quads,
sprites_3d = flags &amp; this.f_sprites_3d,
sprite_3d = flags &amp; this.f_sprite_3d,
nclipplanes = this.countClipplanes(),
fixed_size = flags &amp; this.f_fixed_size,
is_points = flags &amp; this.f_is_points,
is_twosided = flags &amp; this.f_is_twosided,
fat_lines = flags &amp; this.f_fat_lines,
is_brush = flags &amp; this.f_is_brush,
result;
if (type === "clipplanes" || sprites_3d) return;
if (typeof userShader !== "undefined") return userShader;
result = "  /* ****** "+type+" object "+id+" vertex shader ****** */\n"+
"  attribute vec3 aPos;\n"+
"  attribute vec4 aCol;\n"+
" uniform mat4 mvMatrix;\n"+
" uniform mat4 prMatrix;\n"+
" varying vec4 vCol;\n"+
" varying vec4 vPosition;\n";
if ((is_lit &amp;&amp; !fixed_quads &amp;&amp; !is_brush) || sprite_3d)
result = result + "  attribute vec3 aNorm;\n"+
" uniform mat4 normMatrix;\n"+
" varying vec3 vNormal;\n";
if (has_texture || type === "text")
result = result + " attribute vec2 aTexcoord;\n"+
" varying vec2 vTexcoord;\n";
if (fixed_size)
result = result + "  uniform vec2 textScale;\n";
if (fixed_quads)
result = result + "  attribute vec2 aOfs;\n";
else if (sprite_3d)
result = result + "  uniform vec3 uOrig;\n"+
"  uniform float uSize;\n"+
"  uniform mat4 usermat;\n";
if (is_twosided)
result = result + "  attribute vec3 aPos1;\n"+
"  attribute vec3 aPos2;\n"+
"  varying float normz;\n";
if (fat_lines) {
result = result +   "  attribute vec3 aNext;\n"+
"  attribute vec2 aPoint;\n"+
"  varying vec2 vPoint;\n"+
"  varying float vLength;\n"+
"  uniform float uAspect;\n"+
"  uniform float uLwd;\n";
}
result = result + "  void main(void) {\n";
if ((nclipplanes || (!fixed_quads &amp;&amp; !sprite_3d)) &amp;&amp; !is_brush)
result = result + "    vPosition = mvMatrix * vec4(aPos, 1.);\n";
if (!fixed_quads &amp;&amp; !sprite_3d &amp;&amp; !is_brush)
result = result + "    gl_Position = prMatrix * vPosition;\n";
if (is_points) {
var size = this.getMaterial(id, "size");
result = result + "    gl_PointSize = "+size.toFixed(1)+";\n";
}
result = result + "    vCol = aCol;\n";
if (is_lit &amp;&amp; !fixed_quads &amp;&amp; !sprite_3d &amp;&amp; !is_brush)
result = result + "    vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);\n";
if (has_texture || type == "text")
result = result + "    vTexcoord = aTexcoord;\n";
if (fixed_size)
result = result + "    vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n"+
"   pos = pos/pos.w;\n"+
"   gl_Position = pos + vec4(aOfs*textScale, 0.,0.);\n";
if (type == "sprites" &amp;&amp; !fixed_size)
result = result + "    vec4 pos = mvMatrix * vec4(aPos, 1.);\n"+
"   pos = pos/pos.w + vec4(aOfs, 0., 0.);\n"+
"   gl_Position = prMatrix*pos;\n";
if (sprite_3d)
result = result + "   vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);\n"+
"   vec4 pos = mvMatrix * vec4(uOrig, 1.);\n"+
"   vPosition = pos/pos.w + vec4(uSize*(vec4(aPos, 1.)*usermat).xyz,0.);\n"+
"   gl_Position = prMatrix * vPosition;\n";
if (is_twosided)
result = result + "   vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n"+
"   pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n"+
"   vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n"+
"   pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n"+
"   normz = pos1.x*pos2.y - pos1.y*pos2.x;\n";
if (fat_lines) 
/* This code was inspired by Matt Deslauriers' code in https://mattdesl.svbtle.com/drawing-lines-is-hard */
result = result + "   vec2 aspectVec = vec2(uAspect, 1.0);\n"+
"   mat4 projViewModel = prMatrix * mvMatrix;\n"+
"   vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n"+
"   currentProjected = currentProjected/currentProjected.w;\n"+
"   vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n"+
"   vec2 currentScreen = currentProjected.xy * aspectVec;\n"+
"   vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n"+
"   float len = uLwd;\n"+
"   vec2 dir = vec2(1.0, 0.0);\n"+
"   vPoint = aPoint;\n"+
"   vLength = length(nextScreen - currentScreen)/2.0;\n"+
"   vLength = vLength/(vLength + len);\n"+
"   if (vLength &gt; 0.0) {\n"+
"     dir = normalize(nextScreen - currentScreen);\n"+
"   }\n"+
"   vec2 normal = vec2(-dir.y, dir.x);\n"+
"   dir.x /= uAspect;\n"+
"   normal.x /= uAspect;\n"+
"   vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n"+
"   gl_Position = currentProjected + offset;\n";
if (is_brush)
result = result + "   gl_Position = vec4(aPos, 1.);\n";
result = result + "  }\n";
// console.log(result);
return result;
};
/**
* Generate the fragment shader for an object
* @returns {string}
* @param { number } id - Id of object
*/
rglwidgetClass.prototype.getFragmentShader = function(id) {
var obj = this.getObj(id),
userShader = obj.userFragmentShader,
flags = obj.flags,
type = obj.type,
is_lit = flags &amp; this.f_is_lit,
has_texture = flags &amp; this.f_has_texture,
fixed_quads = flags &amp; this.f_fixed_quads,
sprites_3d = flags &amp; this.f_sprites_3d,
is_twosided = (flags &amp; this.f_is_twosided) &gt; 0,
fat_lines = flags &amp; this.f_fat_lines,
is_transparent = flags &amp; this.f_is_transparent,
nclipplanes = this.countClipplanes(), i,
texture_format, nlights,
result;
if (type === "clipplanes" || sprites_3d) return;
if (typeof userShader !== "undefined") return userShader;
if (has_texture)
texture_format = this.getMaterial(id, "textype");
result = "/* ****** "+type+" object "+id+" fragment shader ****** */\n"+
"#ifdef GL_ES\n"+
"#ifdef GL_FRAGMENT_PRECISION_HIGH\n"+
"  precision highp float;\n"+
"#else\n"+
"  precision mediump float;\n"+
"#endif\n"+
"#endif\n"+
"  varying vec4 vCol; // carries alpha\n"+
"  varying vec4 vPosition;\n";
if (has_texture || type === "text")
result = result + "  varying vec2 vTexcoord;\n"+
" uniform sampler2D uSampler;\n";
if (is_lit &amp;&amp; !fixed_quads)
result = result + "  varying vec3 vNormal;\n";
for (i = 0; i &lt; nclipplanes; i++)
result = result + "  uniform vec4 vClipplane"+i+";\n";
if (is_lit) {
nlights = this.countLights();
if (nlights)
result = result + "  uniform mat4 mvMatrix;\n";
else
is_lit = false;
}
if (is_lit) {
result = result + "   uniform vec3 emission;\n"+
"   uniform float shininess;\n";
for (i=0; i &lt; nlights; i++) {
result = result + "   uniform vec3 ambient" + i + ";\n"+
"   uniform vec3 specular" + i +"; // light*material\n"+
"   uniform vec3 diffuse" + i + ";\n"+
"   uniform vec3 lightDir" + i + ";\n"+
"   uniform bool viewpoint" + i + ";\n"+
"   uniform bool finite" + i + ";\n";
}
}
if (is_twosided)
result = result + "   uniform bool front;\n"+
"   varying float normz;\n";
if (fat_lines)
result = result + "   varying vec2 vPoint;\n"+
"   varying float vLength;\n";
result = result + "  void main(void) {\n";
if (fat_lines) {
result = result + "    vec2 point = vPoint;\n"+
"    bool neg = point.y &lt; 0.0;\n"+
"    point.y = neg ? "+
"      (point.y + vLength)/(1.0 - vLength) :\n"+
"     -(point.y - vLength)/(1.0 - vLength);\n";
if (is_transparent &amp;&amp; type == "linestrip")
result = result+"    if (neg &amp;&amp; length(point) &lt;= 1.0) discard;\n";
result = result + "    point.y = min(point.y, 0.0);\n"+
"    if (length(point) &gt; 1.0) discard;\n";
}
for (i=0; i &lt; nclipplanes;i++)
result = result + "    if (dot(vPosition, vClipplane"+i+") &lt; 0.0) discard;\n";
if (fixed_quads) {
result = result +   "    vec3 n = vec3(0., 0., 1.);\n";
} else if (is_lit) {
result = result +   "    vec3 n = normalize(vNormal);\n";
}
if (is_twosided) {
result = result +   "    if ((normz &lt;= 0.) != front) discard;\n";
}
if (is_lit) {
result = result + "    vec3 eye = normalize(-vPosition.xyz);\n"+
"   vec3 lightdir;\n"+
"   vec4 colDiff;\n"+
"   vec3 halfVec;\n"+
"   vec4 lighteffect = vec4(emission, 0.);\n"+
"   vec3 col;\n"+
"   float nDotL;\n";
if (!fixed_quads) {
result = result +   "   n = -faceforward(n, n, eye);\n";
}
for (i=0; i &lt; nlights; i++) {
result = result + "   colDiff = vec4(vCol.rgb * diffuse" + i + ", vCol.a);\n"+
"   lightdir = lightDir" + i + ";\n"+
"   if (!viewpoint" + i +")\n"+
"     lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n"+
"   if (!finite" + i + ") {\n"+
"     halfVec = normalize(lightdir + eye);\n"+
"   } else {\n"+
"     lightdir = normalize(lightdir - vPosition.xyz);\n"+
"     halfVec = normalize(lightdir + eye);\n"+
"   }\n"+
"    col = ambient" + i + ";\n"+
"   nDotL = dot(n, lightdir);\n"+
"   col = col + max(nDotL, 0.) * colDiff.rgb;\n"+
"   col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular" + i + ";\n"+
"   lighteffect = lighteffect + vec4(col, colDiff.a);\n";
}
} else {
result = result +   "   vec4 colDiff = vCol;\n"+
"    vec4 lighteffect = colDiff;\n";
}
if (type === "text")
result = result +   "    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n";
if (has_texture) {
result = result + {
rgb:            "   vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n",
rgba:           "   vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n",
alpha:          "   vec4 textureColor = texture2D(uSampler, vTexcoord);\n"+
"   float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n"+
"   textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n",
luminance:      "   vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n",
"luminance.alpha":"    vec4 textureColor = texture2D(uSampler, vTexcoord);\n"+
"   float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n"+
"   textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n"
}[texture_format]+
"   gl_FragColor = textureColor;\n";
} else if (type === "text") {
result = result +   "    if (textureColor.a &lt; 0.1)\n"+
"     discard;\n"+
"   else\n"+
"     gl_FragColor = textureColor;\n";
} else
result = result +   "   gl_FragColor = lighteffect;\n";
//if (fat_lines)
//  result = result +   "   gl_FragColor = vec4(0.0, abs(point.x), abs(point.y), 1.0);"
result = result + "  }\n";
// console.log(result);
return result;
};
/**
* Call gl functions to create and compile shader
* @returns {Object}
* @param { number } shaderType - gl code for shader type
* @param { string } code - code for the shader
*/
rglwidgetClass.prototype.getShader = function(shaderType, code) {
var gl = this.gl, shader;
shader = gl.createShader(shaderType);
gl.shaderSource(shader, code);
gl.compileShader(shader);
if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS) &amp;&amp; !gl.isContextLost())
alert(gl.getShaderInfoLog(shader));
return shader;
};
/**
* Handle a texture after its image has been loaded
* @param { Object } texture - the gl texture object
* @param { Object } textureCanvas - the canvas holding the image
*/
rglwidgetClass.prototype.handleLoadedTexture = function(texture, textureCanvas) {
var gl = this.gl || this.initGL();
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
};
/**
* Get maximum dimension of texture in current browser.
* @returns {number}
*/
rglwidgetClass.prototype.getMaxTexSize = function() {
var gl = this.gl || this.initGL();	
return Math.min(4096, gl.getParameter(gl.MAX_TEXTURE_SIZE));
};
/**
* Load an image to a texture
* @param { string } uri - The image location
* @param { Object } texture - the gl texture object
*/
rglwidgetClass.prototype.loadImageToTexture = function(uri, texture) {
var canvas = this.textureCanvas,
ctx = canvas.getContext("2d"),
image = new Image(),
self = this;
image.onload = function() {
var w = image.width,
h = image.height,
canvasX = self.getPowerOfTwo(w),
canvasY = self.getPowerOfTwo(h),
gl = self.gl || self.initGL(),
maxTexSize = self.getMaxTexSize();
while (canvasX &gt; 1 &amp;&amp; canvasY &gt; 1 &amp;&amp; (canvasX &gt; maxTexSize || canvasY &gt; maxTexSize)) {
canvasX /= 2;
canvasY /= 2;
}
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
self.handleLoadedTexture(texture, canvas);
self.drawScene();
};
image.src = uri;
};
/**
* Draw text to the texture canvas
* @returns { Object } object with text measurements
* @param { string } text - the text
* @param { number } cex - expansion
* @param { string } family - font family
* @param { number } font - font number
*/
rglwidgetClass.prototype.drawTextToCanvas = function(text, cex, family, font) {
var canvasX, canvasY,
textY,
scaling = 20,
textColour = "white",
backgroundColour = "rgba(0,0,0,0)",
canvas = this.textureCanvas,
ctx = canvas.getContext("2d"),
i, textHeight = 0, textHeights = [], width, widths = [], 
offsetx, offsety = 0, line, lines = [], offsetsx = [],
offsetsy = [], lineoffsetsy = [], fontStrings = [],
maxTexSize = this.getMaxTexSize(),
getFontString = function(i) {
textHeights[i] = scaling*cex[i];
var fontString = textHeights[i] + "px",
family0 = family[i],
font0 = font[i];
if (family0 === "sans")
family0 = "sans-serif";
else if (family0 === "mono")
family0 = "monospace";
fontString = fontString + " " + family0;
if (font0 === 2 || font0 === 4)
fontString = "bold " + fontString;
if (font0 === 3 || font0 === 4)
fontString = "italic " + fontString;
return fontString;
};
cex = this.repeatToLen(cex, text.length);
family = this.repeatToLen(family, text.length);
font = this.repeatToLen(font, text.length);
canvasX = 1;
line = -1;
offsetx = maxTexSize;
for (i = 0; i &lt; text.length; i++)  {
ctx.font = fontStrings[i] = getFontString(i);
width = widths[i] = ctx.measureText(text[i]).width;
if (offsetx + width &gt; maxTexSize) {
line += 1;
offsety = lineoffsetsy[line] = offsety + 2*textHeight;
if (offsety &gt; maxTexSize)
console.error("Too many strings for texture.");
textHeight = 0;
offsetx = 0;
}
textHeight = Math.max(textHeight, textHeights[i]);
offsetsx[i] = offsetx;
offsetx += width;
canvasX = Math.max(canvasX, offsetx);
lines[i] = line;
}
offsety = lineoffsetsy[line] = offsety + 2*textHeight;
for (i = 0; i &lt; text.length; i++) {
offsetsy[i] = lineoffsetsy[lines[i]];
}
canvasX = this.getPowerOfTwo(canvasX);
canvasY = this.getPowerOfTwo(offsety);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.textBaseline = "alphabetic";
for(i = 0; i &lt; text.length; i++) {
ctx.font = fontStrings[i];
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.fillText(text[i], offsetsx[i],  offsetsy[i]);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeights:textHeights,
offsetsx:offsetsx, offsetsy:offsetsy};
};
/**
* Set the gl viewport and scissor test
* @param { number } id - id of subscene
*/
rglwidgetClass.prototype.setViewport = function(id) {
var gl = this.gl || this.initGL(),
vp = this.getObj(id).par3d.viewport,
x = vp.x*this.canvas.width,
y = vp.y*this.canvas.height,
width = vp.width*this.canvas.width,
height = vp.height*this.canvas.height;
this.vp = {x:x, y:y, width:width, height:height};
gl.viewport(x, y, width, height);
gl.scissor(x, y, width, height);
gl.enable(gl.SCISSOR_TEST);
};
/**
* Set the projection matrix for a subscene
* @param { number } id - id of subscene
*/
rglwidgetClass.prototype.setprMatrix = function(id) {
var subscene = this.getObj(id),
embedding = subscene.embeddings.projection;
if (embedding === "replace")
this.prMatrix.makeIdentity();
else
this.setprMatrix(subscene.parent);
if (embedding === "inherit")
return;
// This is based on the Frustum::enclose code from geom.cpp
var bbox = subscene.par3d.bbox,
scale = subscene.par3d.scale,
ranges = [(bbox[1]-bbox[0])*scale[0]/2,
(bbox[3]-bbox[2])*scale[1]/2,
(bbox[5]-bbox[4])*scale[2]/2],
radius = Math.sqrt(this.sumsq(ranges))*1.1; // A bit bigger to handle labels
if (radius &lt;= 0) radius = 1;
var observer = subscene.par3d.observer,
distance = observer[2],
FOV = subscene.par3d.FOV, ortho = FOV === 0,
t = ortho ? 1 : Math.tan(FOV*Math.PI/360),
near = distance - radius,
far = distance + radius,
hlen,
aspect = this.vp.width/this.vp.height,
z = subscene.par3d.zoom,
userProjection = subscene.par3d.userProjection;
if (far &lt; 0.0)
far = 1.0;
if (near &lt; far/100.0)
near = far/100.0;
hlen = t*near;
if (ortho) {
if (aspect &gt; 1)
this.prMatrix.ortho(-hlen*aspect*z, hlen*aspect*z,
-hlen*z, hlen*z, near, far);
else
this.prMatrix.ortho(-hlen*z, hlen*z,
-hlen*z/aspect, hlen*z/aspect,
near, far);
} else {
if (aspect &gt; 1)
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z,
-hlen*z, hlen*z, near, far);
else
this.prMatrix.frustum(-hlen*z, hlen*z,
-hlen*z/aspect, hlen*z/aspect,
near, far);
}
this.prMatrix.multRight(userProjection);
};
/**
* Set the model-view matrix for a subscene
* @param { number } id - id of the subscene
*/
rglwidgetClass.prototype.setmvMatrix = function(id) {
var observer = this.getObj(id).par3d.observer;
this.mvMatrix.makeIdentity();
this.setmodelMatrix(id);
this.mvMatrix.translate(-observer[0], -observer[1], -observer[2]);
};
/**
* Set the model matrix for a subscene
* @param { number } id - id of the subscene
*/
rglwidgetClass.prototype.setmodelMatrix = function(id) {
var subscene = this.getObj(id),
embedding = subscene.embeddings.model;
if (embedding !== "inherit") {
var scale = subscene.par3d.scale,
bbox = subscene.par3d.bbox,
center = [(bbox[0]+bbox[1])/2,
(bbox[2]+bbox[3])/2,
(bbox[4]+bbox[5])/2];
this.mvMatrix.translate(-center[0], -center[1], -center[2]);
this.mvMatrix.scale(scale[0], scale[1], scale[2]);
this.mvMatrix.multRight( subscene.par3d.userMatrix );
}
if (embedding !== "replace")
this.setmodelMatrix(subscene.parent);
};
/**
* Set the normals matrix for a subscene
* @param { number } subsceneid - id of the subscene
*/
rglwidgetClass.prototype.setnormMatrix = function(subsceneid) {
var self = this,
recurse = function(id) {
var sub = self.getObj(id),
embedding = sub.embeddings.model;
if (embedding !== "inherit") {
var scale = sub.par3d.scale;
self.normMatrix.scale(1/scale[0], 1/scale[1], 1/scale[2]);
self.normMatrix.multRight(sub.par3d.userMatrix);
}
if (embedding !== "replace")
recurse(sub.parent);
};
self.normMatrix.makeIdentity();
recurse(subsceneid);
};
/**
* Set the combined projection-model-view matrix
*/
rglwidgetClass.prototype.setprmvMatrix = function() {
this.prmvMatrix = new CanvasMatrix4( this.mvMatrix );
this.prmvMatrix.multRight( this.prMatrix );
};
/**
* Count clipping planes in a scene
* @returns {number}
*/
rglwidgetClass.prototype.countClipplanes = function() {
return this.countObjs("clipplanes");
};
/**
* Count lights in a scene
* @returns { number }
*/
rglwidgetClass.prototype.countLights = function() {
return this.countObjs("light");
};
/**
* Count objects of specific type in a scene
* @returns { number }
* @param { string } type - Type of object to count
*/
rglwidgetClass.prototype.countObjs = function(type) {
var self = this,
bound = 0;
Object.keys(this.scene.objects).forEach(
function(key) {
if (self.getObj(parseInt(key, 10)).type === type)
bound = bound + 1;
});
return bound;
};
/**
* Initialize a subscene
* @param { number } id - id of subscene.
*/
rglwidgetClass.prototype.initSubscene = function(id) {
var sub = this.getObj(id),
i, obj;
if (sub.type !== "subscene")
return;
sub.par3d.userMatrix = this.toCanvasMatrix4(sub.par3d.userMatrix);
sub.par3d.userProjection = this.toCanvasMatrix4(sub.par3d.userProjection);
sub.par3d.userProjection.transpose();
sub.par3d.listeners = [].concat(sub.par3d.listeners);
sub.backgroundId = undefined;
sub.subscenes = [];
sub.clipplanes = [];
sub.transparent = [];
sub.opaque = [];
sub.lights = [];
for (i=0; i &lt; sub.objects.length; i++) {
obj = this.getObj(sub.objects[i]);
if (typeof obj === "undefined") {
sub.objects.splice(i, 1);
i--;
} else if (obj.type === "background")
sub.backgroundId = obj.id;
else
sub[this.whichList(obj.id)].push(obj.id);
}
};
/**
* Copy object
* @param { number } id - id of object to copy
* @param { string } reuse - Document id of scene to reuse
*/
rglwidgetClass.prototype.copyObj = function(id, reuse) {
var obj = this.getObj(id),
prev = document.getElementById(reuse);
if (prev !== null) {
prev = prev.rglinstance;
var
prevobj = prev.getObj(id),
fields = ["flags", "type",
"colors", "vertices", "centers",
"normals", "offsets",
"texts", "cex", "family", "font", "adj",
"material",
"radii",
"texcoords",
"userMatrix", "ids",
"dim",
"par3d", "userMatrix",
"viewpoint", "finite",
"pos"],
i;
for (i = 0; i &lt; fields.length; i++) {
if (typeof prevobj[fields[i]] !== "undefined")
obj[fields[i]] = prevobj[fields[i]];
}
} else
console.warn("copyObj failed");
};
/**
* Update the triangles used to display a plane
* @param { number } id - id of the plane
* @param { Object } bbox - bounding box in which to display the plane
*/
rglwidgetClass.prototype.planeUpdateTriangles = function(id, bbox) {
var perms = [[0,0,1], [1,2,2], [2,1,0]],
x, xrow, elem, A, d, nhits, i, j, k, u, v, w, intersect, which, v0, v2, vx, reverse,
face1 = [], face2 = [], normals = [],
obj = this.getObj(id),
nPlanes = obj.normals.length;
obj.bbox = bbox;
obj.vertices = [];
obj.initialized = false;
for (elem = 0; elem &lt; nPlanes; elem++) {
//    Vertex Av = normal.getRecycled(elem);
x = [];
A = obj.normals[elem];
d = obj.offsets[elem][0];
nhits = 0;
for (i=0; i&lt;3; i++)
for (j=0; j&lt;2; j++)
for (k=0; k&lt;2; k++) {
u = perms[0][i];
v = perms[1][i];
w = perms[2][i];
if (A[w] !== 0.0) {
intersect = -(d + A[u]*bbox[j+2*u] + A[v]*bbox[k+2*v])/A[w];
if (bbox[2*w] &lt; intersect &amp;&amp; intersect &lt; bbox[1+2*w]) {
xrow = [];
xrow[u] = bbox[j+2*u];
xrow[v] = bbox[k+2*v];
xrow[w] = intersect;
x.push(xrow);
face1[nhits] = j + 2*u;
face2[nhits] = k + 2*v;
nhits++;
}
}
}
if (nhits &gt; 3) {
/* Re-order the intersections so the triangles work */
for (i=0; i&lt;nhits-2; i++) {
which = 0; /* initialize to suppress warning */
for (j=i+1; j&lt;nhits; j++) {
if (face1[i] == face1[j] || face1[i] == face2[j] ||
face2[i] == face1[j] || face2[i] == face2[j] ) {
which = j;
break;
}
}
if (which &gt; i+1) {
this.swap(x, i+1, which);
this.swap(face1, i+1, which);
this.swap(face2, i+1, which);
}
}
}
if (nhits &gt;= 3) {
/* Put in order so that the normal points out the FRONT of the faces */
v0 = [x[0][0] - x[1][0] , x[0][1] - x[1][1], x[0][2] - x[1][2]];
v2 = [x[2][0] - x[1][0] , x[2][1] - x[1][1], x[2][2] - x[1][2]];
/* cross-product */
vx = this.xprod(v0, v2);
reverse = this.dotprod(vx, A) &gt; 0;
for (i=0; i&lt;nhits-2; i++) {
obj.vertices.push(x[0]);
normals.push(A);
for (j=1; j&lt;3; j++) {
obj.vertices.push(x[i + (reverse ? 3-j : j)]);
normals.push(A);
}
}
}
}
obj.pnormals = normals;
};
rglwidgetClass.prototype.getAdj = function (pos, offset, text) {
switch(pos) {
case 1: return [0.5, 1 + offset];
case 2: return [1 + offset/text.length, 0.5];
case 3: return [0.5, -offset];
case 4: return [-offset/text.length, 0.5];
}
}
/**
* Initialize object for display
* @param { number } id - id of object to initialize
*/
rglwidgetClass.prototype.initObj = function(id) {
var obj = this.getObj(id),
flags = obj.flags,
type = obj.type,
is_lit = flags &amp; this.f_is_lit,
is_lines = flags &amp; this.f_is_lines,
fat_lines = flags &amp; this.f_fat_lines,
has_texture = flags &amp; this.f_has_texture,
fixed_quads = flags &amp; this.f_fixed_quads,
is_transparent = obj.is_transparent,
depth_sort = flags &amp; this.f_depth_sort,
sprites_3d = flags &amp; this.f_sprites_3d,
sprite_3d = flags &amp; this.f_sprite_3d,
fixed_size = flags &amp; this.f_fixed_size,
is_twosided = (flags &amp; this.f_is_twosided) &gt; 0,
is_brush = flags &amp; this.f_is_brush,
gl = this.gl || this.initGL(),
polygon_offset,
texinfo, drawtype, nclipplanes, f, nrows, oldrows,
i,j,v,v1,v2, mat, uri, matobj, pass, passes, pmode,
dim, nx, nz, attr;
if (typeof id !== "number") {
this.alertOnce("initObj id is "+typeof id);
}
obj.initialized = true;
if (type === "bboxdeco" || type === "subscene")
return;
if (type === "light") {
obj.ambient = new Float32Array(obj.colors[0].slice(0,3));
obj.diffuse = new Float32Array(obj.colors[1].slice(0,3));
obj.specular = new Float32Array(obj.colors[2].slice(0,3));
obj.lightDir = new Float32Array(obj.vertices[0]);
return;
}
if (type === "clipplanes") {
obj.vClipplane = this.flatten(this.cbind(obj.normals, obj.offsets));
return;
}
if (type === "background" &amp;&amp; typeof obj.ids !== "undefined") {
obj.quad = this.flatten([].concat(obj.ids));
return;
}
polygon_offset = this.getMaterial(id, "polygon_offset");
if (polygon_offset[0] != 0 || polygon_offset[1] != 0)
obj.polygon_offset = polygon_offset;
if (is_transparent) {
depth_sort = ["triangles", "quads", "surface",
"spheres", "sprites", "text"].indexOf(type) &gt;= 0;
}
if (is_brush)
this.initSelection(id);
if (typeof obj.vertices === "undefined")
obj.vertices = [];
v = obj.vertices;
obj.vertexCount = v.length;
if (!obj.vertexCount) return;
if (is_twosided) {
if (typeof obj.userAttributes === "undefined")
obj.userAttributes = {};
v1 = Array(v.length);
v2 = Array(v.length);
if (obj.type == "triangles" || obj.type == "quads") {
if (obj.type == "triangles")
nrow = 3;
else
nrow = 4;
for (i=0; i&lt;Math.floor(v.length/nrow); i++)
for (j=0; j&lt;nrow; j++) {
v1[nrow*i + j] = v[nrow*i + ((j+1) % nrow)];
v2[nrow*i + j] = v[nrow*i + ((j+2) % nrow)];
}
} else if (obj.type == "surface") {
dim = obj.dim[0];
nx = dim[0];
nz = dim[1];
for (j=0; j&lt;nx; j++) {
for (i=0; i&lt;nz; i++) {
if (i+1 &lt; nz &amp;&amp; j+1 &lt; nx) {
v2[j + nx*i] = v[j + nx*(i+1)];
v1[j + nx*i] = v[j+1 + nx*(i+1)];
} else if (i+1 &lt; nz) {
v2[j + nx*i] = v[j-1 + nx*i];
v1[j + nx*i] = v[j + nx*(i+1)];
} else {
v2[j + nx*i] = v[j + nx*(i-1)];
v1[j + nx*i] = v[j-1 + nx*(i-1)];
}
}
}
}
obj.userAttributes.aPos1 = v1;
obj.userAttributes.aPos2 = v2;
}
if (!sprites_3d) {
if (gl.isContextLost()) return;
obj.prog = gl.createProgram();
gl.attachShader(obj.prog, this.getShader( gl.VERTEX_SHADER,
this.getVertexShader(id) ));
gl.attachShader(obj.prog, this.getShader( gl.FRAGMENT_SHADER,
this.getFragmentShader(id) ));
//  Force aPos to location 0, aCol to location 1
gl.bindAttribLocation(obj.prog, 0, "aPos");
gl.bindAttribLocation(obj.prog, 1, "aCol");
gl.linkProgram(obj.prog);
var linked = gl.getProgramParameter(obj.prog, gl.LINK_STATUS);
if (!linked) {
// An error occurred while linking
var lastError = gl.getProgramInfoLog(obj.prog);
console.warn("Error in program linking:" + lastError);
gl.deleteProgram(obj.prog);
return;
}
}
if (type === "text") {
texinfo = this.drawTextToCanvas(obj.texts,
this.flatten(obj.cex),
this.flatten(obj.family),
this.flatten(obj.family));
}
if (fixed_quads &amp;&amp; !sprites_3d) {
obj.ofsLoc = gl.getAttribLocation(obj.prog, "aOfs");
}
if (sprite_3d) {
obj.origLoc = gl.getUniformLocation(obj.prog, "uOrig");
obj.sizeLoc = gl.getUniformLocation(obj.prog, "uSize");
obj.usermatLoc = gl.getUniformLocation(obj.prog, "usermat");
}
if (has_texture || type == "text") {
if (!obj.texture)
obj.texture = gl.createTexture();
obj.texLoc = gl.getAttribLocation(obj.prog, "aTexcoord");
obj.sampler = gl.getUniformLocation(obj.prog, "uSampler");
}
if (has_texture) {
mat = obj.material;
if (typeof mat.uri !== "undefined")
uri = mat.uri;
else if (typeof mat.uriElementId === "undefined") {
matobj = this.getObj(mat.uriId);
if (typeof matobj !== "undefined") {
uri = matobj.material.uri;
} else {
uri = "";
}
} else
uri = document.getElementById(mat.uriElementId).rglinstance.getObj(mat.uriId).material.uri;
this.loadImageToTexture(uri, obj.texture);
}
if (type === "text") {
this.handleLoadedTexture(obj.texture, this.textureCanvas);
}
var stride = 3, nc, cofs, nofs, radofs, oofs, tofs, vnew, fnew,
nextofs = -1, pointofs = -1, alias, colors, key, selection, filter, adj, pos, offset;
obj.alias = undefined;
colors = obj.colors;
j = this.scene.crosstalk.id.indexOf(id);
if (j &gt;= 0) {
key = this.scene.crosstalk.key[j];
options = this.scene.crosstalk.options[j];
colors = colors.slice(0); 
for (i = 0; i &lt; v.length; i++)
colors[i] = obj.colors[i % obj.colors.length].slice(0);
if ( (selection = this.scene.crosstalk.selection) &amp;&amp;
(selection.length || !options.selectedIgnoreNone) )
for (i = 0; i &lt; v.length; i++) {
if (!selection.includes(key[i])) {
if (options.deselectedColor)
colors[i] = options.deselectedColor.slice(0);
colors[i][3] = colors[i][3]*options.deselectedFade;   /* default: mostly transparent if not selected */
} else if (options.selectedColor)
colors[i] = options.selectedColor.slice(0);
}
if ( (filter = this.scene.crosstalk.filter) )
for (i = 0; i &lt; v.length; i++) 
if (!filter.includes(key[i])) {
if (options.filteredColor)
colors[i] = options.filteredColor.slice(0);
colors[i][3] = colors[i][3]*options.filteredFade;   /* default: completely hidden if filtered */
}
}  
nc = obj.colorCount = colors.length;
if (nc &gt; 1) {
cofs = stride;
stride = stride + 4;
v = this.cbind(v, colors);
} else {
cofs = -1;
obj.onecolor = this.flatten(colors);
}
if (typeof obj.normals !== "undefined") {
nofs = stride;
stride = stride + 3;
v = this.cbind(v, typeof obj.pnormals !== "undefined" ? obj.pnormals : obj.normals);
} else
nofs = -1;
if (typeof obj.radii !== "undefined") {
radofs = stride;
stride = stride + 1;
// FIXME:  always concat the radii?
if (obj.radii.length === v.length) {
v = this.cbind(v, obj.radii);
} else if (obj.radii.length === 1) {
v = v.map(function(row, i, arr) { return row.concat(obj.radii[0]);});
}
} else
radofs = -1;
// Add default indices
f = Array(v.length);
for (i = 0; i &lt; v.length; i++)
f[i] = i;
obj.f = [f,f];
if (type == "sprites" &amp;&amp; !sprites_3d) {
tofs = stride;
stride += 2;
oofs = stride;
stride += 2;
vnew = new Array(4*v.length);
fnew = new Array(4*v.length);
alias = new Array(v.length);
var rescale = fixed_size ? 72 : 1,
size = obj.radii, s = rescale*size[0]/2;
last = v.length;
f = obj.f[0];
for (i=0; i &lt; v.length; i++) {
if (size.length &gt; 1)
s = rescale*size[i]/2;
vnew[i]  = v[i].concat([0,0,-s,-s]);
fnew[4*i] = f[i];
vnew[last]= v[i].concat([1,0, s,-s]);
fnew[4*i+1] = last++;
vnew[last]= v[i].concat([1,1, s, s]);
fnew[4*i+2] = last++;
vnew[last]= v[i].concat([0,1,-s, s]);
fnew[4*i+3] = last++;
alias[i] = [last-3, last-2, last-1];
}
v = vnew;
obj.vertexCount = v.length;
obj.f = [fnew, fnew];
} else if (type === "text") {
tofs = stride;
stride += 2;
oofs = stride;
stride += 2;
vnew = new Array(4*v.length);
f = obj.f[0];
fnew = new Array(4*f.length);
alias = new Array(v.length);
last = v.length;
adj = this.flatten(obj.adj);
if (typeof obj.pos !== "undefined") {
pos = this.flatten(obj.pos);
offset = adj[0];
}
for (i=0; i &lt; v.length; i++) {
if (typeof pos !== "undefined")
adj = this.getAdj(pos[i % pos.length], offset, obj.texts[i]);
vnew[i]  = v[i].concat([0,-0.5]).concat(adj);
fnew[4*i] = f[i];
vnew[last] = v[i].concat([1,-0.5]).concat(adj);
fnew[4*i+1] = last++;
vnew[last] = v[i].concat([1, 1.5]).concat(adj);
fnew[4*i+2] = last++;
vnew[last] = v[i].concat([0, 1.5]).concat(adj);
fnew[4*i+3] = last++;
alias[i] = [last-3, last-2, last-1];
for (j=0; j &lt; 4; j++) {
v1 = vnew[fnew[4*i+j]];
v1[tofs+2] = 2*(v1[tofs]-v1[tofs+2])*texinfo.widths[i];
v1[tofs+3] = 2*(v1[tofs+1]-v1[tofs+3])*texinfo.textHeights[i];
v1[tofs] = (texinfo.offsetsx[i] + v1[tofs]*texinfo.widths[i])/texinfo.canvasX;
v1[tofs+1] = 1.0-(texinfo.offsetsy[i] -
v1[tofs+1]*texinfo.textHeights[i])/texinfo.canvasY;
vnew[fnew[4*i+j]] = v1;
}
}
v = vnew;
obj.vertexCount = v.length;
obj.f = [fnew, fnew];
} else if (typeof obj.texcoords !== "undefined") {
tofs = stride;
stride += 2;
oofs = -1;
v = this.cbind(v, obj.texcoords);
} else {
tofs = -1;
oofs = -1;
}
obj.alias = alias;
if (typeof obj.userAttributes !== "undefined") {
obj.userAttribOffsets = {};
obj.userAttribLocations = {};
obj.userAttribSizes = {};
for (attr in obj.userAttributes) {
obj.userAttribLocations[attr] = gl.getAttribLocation(obj.prog, attr);
if (obj.userAttribLocations[attr] &gt;= 0) { // Attribute may not have been used
obj.userAttribOffsets[attr] = stride;
v = this.cbind(v, obj.userAttributes[attr]);
stride = v[0].length;
obj.userAttribSizes[attr] = stride - obj.userAttribOffsets[attr];
}
}
}
if (typeof obj.userUniforms !== "undefined") {
obj.userUniformLocations = {};
for (attr in obj.userUniforms)
obj.userUniformLocations[attr] = gl.getUniformLocation(obj.prog, attr);
}
if (sprites_3d) {
obj.userMatrix = new CanvasMatrix4(obj.userMatrix);
obj.objects = this.flatten([].concat(obj.ids));
is_lit = false;
for (i=0; i &lt; obj.objects.length; i++)
this.initObj(obj.objects[i]);
}
if (is_lit &amp;&amp; !fixed_quads) {
obj.normLoc = gl.getAttribLocation(obj.prog, "aNorm");
}
nclipplanes = this.countClipplanes();
if (nclipplanes &amp;&amp; !sprites_3d) {
obj.clipLoc = [];
for (i=0; i &lt; nclipplanes; i++)
obj.clipLoc[i] = gl.getUniformLocation(obj.prog,"vClipplane" + i);
}
if (is_lit) {
obj.emissionLoc = gl.getUniformLocation(obj.prog, "emission");
obj.emission = new Float32Array(this.stringToRgb(this.getMaterial(id, "emission")));
obj.shininessLoc = gl.getUniformLocation(obj.prog, "shininess");
obj.shininess = this.getMaterial(id, "shininess");
obj.nlights = this.countLights();
obj.ambientLoc = [];
obj.ambient = new Float32Array(this.stringToRgb(this.getMaterial(id, "ambient")));
obj.specularLoc = [];
obj.specular = new Float32Array(this.stringToRgb(this.getMaterial(id, "specular")));
obj.diffuseLoc = [];
obj.lightDirLoc = [];
obj.viewpointLoc = [];
obj.finiteLoc = [];
for (i=0; i &lt; obj.nlights; i++) {
obj.ambientLoc[i] = gl.getUniformLocation(obj.prog, "ambient" + i);
obj.specularLoc[i] = gl.getUniformLocation(obj.prog, "specular" + i);
obj.diffuseLoc[i] = gl.getUniformLocation(obj.prog, "diffuse" + i);
obj.lightDirLoc[i] = gl.getUniformLocation(obj.prog, "lightDir" + i);
obj.viewpointLoc[i] = gl.getUniformLocation(obj.prog, "viewpoint" + i);
obj.finiteLoc[i] = gl.getUniformLocation(obj.prog, "finite" + i);
}
}
obj.passes = is_twosided + 1;
obj.pmode = new Array(obj.passes);
for (pass = 0; pass &lt; obj.passes; pass++) {
if (type === "triangles" || type === "quads" || type === "surface")
pmode = this.getMaterial(id, (pass === 0) ? "front" : "back");
else pmode = "filled";
obj.pmode[pass] = pmode;
}
obj.f.length = obj.passes;
for (pass = 0; pass &lt; obj.passes; pass++) {
f = fnew = obj.f[pass];
pmode = obj.pmode[pass];
if (pmode === "culled")
f = [];
else if (pmode === "points") {
// stay with default
} else if ((type === "quads" || type === "text" ||
type === "sprites") &amp;&amp; !sprites_3d) {
nrows = Math.floor(obj.vertexCount/4);
if (pmode === "filled") {
fnew = Array(6*nrows);
for (i=0; i &lt; nrows; i++) {
fnew[6*i] = f[4*i];
fnew[6*i+1] = f[4*i + 1];
fnew[6*i+2] = f[4*i + 2];
fnew[6*i+3] = f[4*i];
fnew[6*i+4] = f[4*i + 2];
fnew[6*i+5] = f[4*i + 3];
}
} else {
fnew = Array(8*nrows);
for (i=0; i &lt; nrows; i++) {
fnew[8*i] = f[4*i];
fnew[8*i+1] = f[4*i + 1];
fnew[8*i+2] = f[4*i + 1];
fnew[8*i+3] = f[4*i + 2];
fnew[8*i+4] = f[4*i + 2];
fnew[8*i+5] = f[4*i + 3];
fnew[8*i+6] = f[4*i + 3];
fnew[8*i+7] = f[4*i];
}
}
} else if (type === "triangles") {
nrows = Math.floor(obj.vertexCount/3);
if (pmode === "filled") {
fnew = Array(3*nrows);
for (i=0; i &lt; fnew.length; i++) {
fnew[i] = f[i];
}
} else if (pmode === "lines") {
fnew = Array(6*nrows);
for (i=0; i &lt; nrows; i++) {
fnew[6*i] = f[3*i];
fnew[6*i + 1] = f[3*i + 1];
fnew[6*i + 2] = f[3*i + 1];
fnew[6*i + 3] = f[3*i + 2];
fnew[6*i + 4] = f[3*i + 2];
fnew[6*i + 5] = f[3*i];
}
}
} else if (type === "spheres") {
// default
} else if (type === "surface") {
dim = obj.dim[0];
nx = dim[0];
nz = dim[1];
if (pmode === "filled") {
fnew = [];
for (j=0; j&lt;nx-1; j++) {
for (i=0; i&lt;nz-1; i++) {
fnew.push(f[j + nx*i],
f[j + nx*(i+1)],
f[j + 1 + nx*(i+1)],
f[j + nx*i],
f[j + 1 + nx*(i+1)],
f[j + 1 + nx*i]);
}
}
} else if (pmode === "lines") {
fnew = [];
for (j=0; j&lt;nx; j++) {
for (i=0; i&lt;nz; i++) {
if (i+1 &lt; nz)
fnew.push(f[j + nx*i],
f[j + nx*(i+1)]);
if (j+1 &lt; nx)
fnew.push(f[j + nx*i],
f[j+1 + nx*i]);
}
}
}
}
obj.f[pass] = fnew;
if (depth_sort) {
drawtype = "DYNAMIC_DRAW";
} else {
drawtype = "STATIC_DRAW";
}
}
if (fat_lines) {
alias = undefined;
obj.nextLoc = gl.getAttribLocation(obj.prog, "aNext");
obj.pointLoc = gl.getAttribLocation(obj.prog, "aPoint");
obj.aspectLoc = gl.getUniformLocation(obj.prog, "uAspect");
obj.lwdLoc = gl.getUniformLocation(obj.prog, "uLwd");
// Expand vertices to turn each segment into a pair of triangles
for (pass = 0; pass &lt; obj.passes; pass++) {
f = obj.f[pass];	
oldrows = f.length;
if (obj.pmode[pass] === "lines") 
break;
}
if (type === "linestrip") 
nrows = 4*(oldrows - 1); 
else
nrows = 2*oldrows;
vnew = new Array(nrows);
fnew = new Array(1.5*nrows);
var fnext = new Array(nrows),
fpt = new Array(nrows), 
pt, start, gap = type === "linestrip" ? 3 : 1;
// We're going to turn each pair of vertices into 4 new ones, with the "next" and "pt" attributes
// added.
// We do this by copying the originals in the first pass, adding the new attributes, then in a 
// second pass add new vertices at the end.
for (i = 0; i &lt; v.length; i++) {
vnew[i] = v[i].concat([0,0,0,0,0]); 
}
nextofs = stride;
pointofs = stride + 3;
stride = stride + 5;
// Now add the extras
last = v.length - 1;
ind = 0;
alias = new Array(f.length);
for (i = 0; i &lt; f.length; i++)
alias[i] = [];
for (i = 0; i &lt; f.length - 1; i++) {
if (type !== "linestrip" &amp;&amp; i % 2 == 1)
continue;
k = ++last;
vnew[k] = vnew[f[i]].slice();
for (j=0; j&lt;3; j++)
vnew[k][nextofs + j] = vnew[f[i+1]][j];
vnew[k][pointofs] = -1;
vnew[k][pointofs+1] = -1;
fnew[ind] = k;
last++;
vnew[last] = vnew[k].slice();
vnew[last][pointofs] = 1;
fnew[ind+1] = last;
alias[f[i]].push(last-1, last);
last++;
k = last;
vnew[k] = vnew[f[i+1]].slice();
for (j=0; j&lt;3; j++)
vnew[k][nextofs + j] = vnew[f[i]][j];
vnew[k][pointofs] = -1;
vnew[k][pointofs+1] = 1;
fnew[ind+2] = k;
fnew[ind+3] = fnew[ind+1];
last++;
vnew[last] = vnew[k].slice();
vnew[last][pointofs] = 1;
fnew[ind+4] = last;
fnew[ind+5] = fnew[ind+2];
ind += 6;
alias[f[i+1]].push(last-1, last);
}
vnew.length = last+1;
v = vnew;
obj.vertexCount = v.length;
if (typeof alias !== "undefined" &amp;&amp; typeof obj.alias !== "undefined") {  // Already have aliases from previous section?
var oldalias = obj.alias, newalias = Array(obj.alias.length);
for (i = 0; i &lt; newalias.length; i++) {
newalias[i] = oldalias[i].slice();
for (j = 0; j &lt; oldalias[i].length; j++)
Array.prototype.push.apply(newalias[i], alias[oldalias[j]]); // pushes each element 
}
obj.alias = newalias;
} else
obj.alias = alias;
for (pass = 0; pass &lt; obj.passes; pass++)
if (type === "lines" || type === "linestrip" || obj.pmode[pass] == "lines") {
obj.f[pass] = fnew;
}
if (depth_sort) 
drawtype = "DYNAMIC_DRAW";
else
drawtype = "STATIC_DRAW";
}
for (pass = 0; pass &lt; obj.passes; pass++) {
if (obj.vertexCount &gt; 65535) {
if (this.index_uint) {
obj.f[pass] = new Uint32Array(obj.f[pass]);
obj.index_uint = true;
} else
this.alertOnce("Object has "+obj.vertexCount+" vertices, not supported in this browser.");
} else {
obj.f[pass] = new Uint16Array(obj.f[pass]);
obj.index_uint = false;
}
}
if (stride !== v[0].length) {
this.alertOnce("problem in stride calculation");
}
obj.vOffsets = {vofs:0, cofs:cofs, nofs:nofs, radofs:radofs, oofs:oofs, tofs:tofs,
nextofs:nextofs, pointofs:pointofs, stride:stride};
obj.values = new Float32Array(this.flatten(v));
if (type !== "spheres" &amp;&amp; !sprites_3d) {
obj.buf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, obj.buf);
gl.bufferData(gl.ARRAY_BUFFER, obj.values, gl.STATIC_DRAW); //
obj.ibuf = Array(obj.passes);
obj.ibuf[0] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, obj.ibuf[0]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, obj.f[0], gl[drawtype]);
if (is_twosided) {
obj.ibuf[1] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, obj.ibuf[1]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, obj.f[1], gl[drawtype]);
}
}
if (!sprites_3d) {
obj.mvMatLoc = gl.getUniformLocation(obj.prog, "mvMatrix");
obj.prMatLoc = gl.getUniformLocation(obj.prog, "prMatrix");
}
if (fixed_size) {
obj.textScaleLoc = gl.getUniformLocation(obj.prog, "textScale");
}
if (is_lit &amp;&amp; !sprites_3d) {
obj.normMatLoc = gl.getUniformLocation(obj.prog, "normMatrix");
}
if (is_twosided) {
obj.frontLoc = gl.getUniformLocation(obj.prog, "front");
}
};
/**
* Set gl depth test based on object's material
* @param { number } id - object to use
*/
rglwidgetClass.prototype.setDepthTest = function(id) {
var gl = this.gl || this.initGL(),
tests = {never: gl.NEVER,
less:  gl.LESS,
equal: gl.EQUAL,
lequal:gl.LEQUAL,
greater: gl.GREATER,
notequal: gl.NOTEQUAL,
gequal: gl.GEQUAL,
always: gl.ALWAYS},
test = tests[this.getMaterial(id, "depth_test")];
gl.depthFunc(test);
};
rglwidgetClass.prototype.mode4type = {points : "POINTS",
linestrip : "LINE_STRIP",
abclines : "LINES",
lines : "LINES",
sprites : "TRIANGLES",
planes : "TRIANGLES",
text : "TRIANGLES",
quads : "TRIANGLES",
surface : "TRIANGLES",
triangles : "TRIANGLES"};
/**
* Sort objects from back to front
* @returns { number[] }
* @param { Object } obj - object to sort
*/
rglwidgetClass.prototype.depthSort = function(obj) {
var n = obj.centers.length,
depths = new Float32Array(n),
result = new Array(n),
compare = function(i,j) { return depths[j] - depths[i]; },
z, w;
for(i=0; i&lt;n; i++) {
z = this.prmvMatrix.m13*obj.centers[i][0] +
this.prmvMatrix.m23*obj.centers[i][1] +
this.prmvMatrix.m33*obj.centers[i][2] +
this.prmvMatrix.m43;
w = this.prmvMatrix.m14*obj.centers[i][0] +
this.prmvMatrix.m24*obj.centers[i][1] +
this.prmvMatrix.m34*obj.centers[i][2] +
this.prmvMatrix.m44;
depths[i] = z/w;
result[i] = i;
}
result.sort(compare);
return result;
};
rglwidgetClass.prototype.disableArrays = function(obj, enabled) {
var gl = this.gl || this.initGL(),
objLocs = ["normLoc", "texLoc", "ofsLoc", "pointLoc", "nextLoc"],
thisLocs = ["posLoc", "colLoc"], i, attr;
for (i = 0; i &lt; objLocs.length; i++) 
if (enabled[objLocs[i]]) gl.disableVertexAttribArray(obj[objLocs[i]]);
for (i = 0; i &lt; thisLocs.length; i++)
if (enabled[thisLocs[i]]) gl.disableVertexAttribArray(this[objLocs[i]]);
if (typeof obj.userAttributes !== "undefined") {
for (attr in obj.userAttribSizes) {  // Not all attributes may have been used
gl.disableVertexAttribArray( obj.userAttribLocations[attr] );
}
}
}
/**
* Draw an object in a subscene
* @param { number } id - object to draw
* @param { number } subsceneid - id of subscene
*/
rglwidgetClass.prototype.drawObj = function(id, subsceneid) {
var obj = this.getObj(id),
subscene = this.getObj(subsceneid),
flags = obj.flags,
type = obj.type,
is_lit = flags &amp; this.f_is_lit,
has_texture = flags &amp; this.f_has_texture,
fixed_quads = flags &amp; this.f_fixed_quads,
is_transparent = flags &amp; this.f_is_transparent,
depth_sort = flags &amp; this.f_depth_sort,
sprites_3d = flags &amp; this.f_sprites_3d,
sprite_3d = flags &amp; this.f_sprite_3d,
is_lines = flags &amp; this.f_is_lines,
fat_lines = flags &amp; this.f_fat_lines,
is_points = flags &amp; this.f_is_points,
fixed_size = flags &amp; this.f_fixed_size,
is_twosided = (flags &amp; this.f_is_twosided) &gt; 0,
gl = this.gl || this.initGL(),
mat,
sphereMV, baseofs, ofs, sscale, i, count, light,
pass, mode, pmode, attr,
enabled = {};
if (typeof id !== "number") {
this.alertOnce("drawObj id is "+typeof id);
}
if (type === "planes") {
if (obj.bbox !== subscene.par3d.bbox || !obj.initialized) {
this.planeUpdateTriangles(id, subscene.par3d.bbox);
}
}
if (!obj.initialized)
this.initObj(id);
if (type === "clipplanes") {
count = obj.offsets.length;
var IMVClip = [];
for (i=0; i &lt; count; i++) {
IMVClip[i] = this.multMV(this.invMatrix, obj.vClipplane.slice(4*i, 4*(i+1)));
}
obj.IMVClip = IMVClip;
return;
}
if (type === "light" || type === "bboxdeco" || !obj.vertexCount)
return;
if (!is_transparent &amp;&amp;
obj.someHidden) {
is_transparent = true;
depth_sort = ["triangles", "quads", "surface",
"spheres", "sprites", "text"].indexOf(type) &gt;= 0;
}        
this.setDepthTest(id);
if (sprites_3d) {
var norigs = obj.vertices.length,
savenorm = new CanvasMatrix4(this.normMatrix);
this.origs = obj.vertices;
this.usermat = new Float32Array(obj.userMatrix.getAsArray());
this.radii = obj.radii;
this.normMatrix = subscene.spriteNormmat;
for (this.iOrig=0; this.iOrig &lt; norigs; this.iOrig++) {
for (i=0; i &lt; obj.objects.length; i++) {
this.drawObj(obj.objects[i], subsceneid);
}
}
this.normMatrix = savenorm;
return;
} else {
gl.useProgram(obj.prog);
}
if (typeof obj.polygon_offset !== "undefined") {
gl.polygonOffset(obj.polygon_offset[0],
obj.polygon_offset[1]);
gl.enable(gl.POLYGON_OFFSET_FILL);
}
if (sprite_3d) {
gl.uniform3fv(obj.origLoc, new Float32Array(this.origs[this.iOrig]));
if (this.radii.length &gt; 1) {
gl.uniform1f(obj.sizeLoc, this.radii[this.iOrig][0]);
} else {
gl.uniform1f(obj.sizeLoc, this.radii[0][0]);
}
gl.uniformMatrix4fv(obj.usermatLoc, false, this.usermat);
}
if (type === "spheres") {
gl.bindBuffer(gl.ARRAY_BUFFER, this.sphere.buf);
} else {
gl.bindBuffer(gl.ARRAY_BUFFER, obj.buf);
}
gl.uniformMatrix4fv( obj.prMatLoc, false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( obj.mvMatLoc, false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0,
clipplaneids = subscene.clipplanes,
clip, j;
for (i=0; i &lt; clipplaneids.length; i++) {
clip = this.getObj(clipplaneids[i]);
for (j=0; j &lt; clip.offsets.length; j++) {
gl.uniform4fv(obj.clipLoc[clipcheck + j], clip.IMVClip[j]);
}
clipcheck += clip.offsets.length;
}
if (typeof obj.clipLoc !== "undefined")
for (i=clipcheck; i &lt; obj.clipLoc.length; i++)
gl.uniform4f(obj.clipLoc[i], 0,0,0,0);
if (is_lit) {
gl.uniformMatrix4fv( obj.normMatLoc, false, new Float32Array(this.normMatrix.getAsArray()) );
gl.uniform3fv( obj.emissionLoc, obj.emission);
gl.uniform1f( obj.shininessLoc, obj.shininess);
for (i=0; i &lt; subscene.lights.length; i++) {
light = this.getObj(subscene.lights[i]);
if (!light.initialized) this.initObj(subscene.lights[i]);
gl.uniform3fv( obj.ambientLoc[i], this.componentProduct(light.ambient, obj.ambient));
gl.uniform3fv( obj.specularLoc[i], this.componentProduct(light.specular, obj.specular));
gl.uniform3fv( obj.diffuseLoc[i], light.diffuse);
gl.uniform3fv( obj.lightDirLoc[i], light.lightDir);
gl.uniform1i( obj.viewpointLoc[i], light.viewpoint);
gl.uniform1i( obj.finiteLoc[i], light.finite);
}
for (i=subscene.lights.length; i &lt; obj.nlights; i++) {
gl.uniform3f( obj.ambientLoc[i], 0,0,0);
gl.uniform3f( obj.specularLoc[i], 0,0,0);
gl.uniform3f( obj.diffuseLoc[i], 0,0,0);
}
}
if (fixed_size) {
gl.uniform2f( obj.textScaleLoc, 0.75/this.vp.width, 0.75/this.vp.height);
}
gl.enableVertexAttribArray( this.posLoc );
enabled.posLoc = true;
var nc = obj.colorCount;
count = obj.vertexCount;
if (type === "spheres") {
subscene = this.getObj(subsceneid);
var scale = subscene.par3d.scale,
scount = count, indices;
gl.vertexAttribPointer(this.posLoc,  3, gl.FLOAT, false, 4*this.sphere.vOffsets.stride,  0);
gl.enableVertexAttribArray(obj.normLoc );
enabled.normLoc = true;
gl.vertexAttribPointer(obj.normLoc,  3, gl.FLOAT, false, 4*this.sphere.vOffsets.stride,  0);
gl.disableVertexAttribArray( this.colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(scale[0], scale[1], scale[2]);
sphereNorm.multRight(this.normMatrix);
gl.uniformMatrix4fv( obj.normMatLoc, false, new Float32Array(sphereNorm.getAsArray()) );
if (nc == 1) {
gl.vertexAttrib4fv( this.colLoc, new Float32Array(obj.onecolor));
}
if (has_texture) {
gl.enableVertexAttribArray( obj.texLoc );
enabled.texLoc = true;
gl.vertexAttribPointer(obj.texLoc, 2, gl.FLOAT, false, 4*this.sphere.vOffsets.stride,
4*this.sphere.vOffsets.tofs);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, obj.texture);
gl.uniform1i( obj.sampler, 0);
}
if (depth_sort)
indices = this.depthSort(obj);
for (i = 0; i &lt; scount; i++) {
sphereMV = new CanvasMatrix4();
if (depth_sort) {
baseofs = indices[i]*obj.vOffsets.stride;
} else {
baseofs = i*obj.vOffsets.stride;
}
ofs = baseofs + obj.vOffsets.radofs;
sscale = obj.values[ofs];
sphereMV.scale(sscale/scale[0], sscale/scale[1], sscale/scale[2]);
sphereMV.translate(obj.values[baseofs],
obj.values[baseofs+1],
obj.values[baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( obj.mvMatLoc, false, new Float32Array(sphereMV.getAsArray()) );
if (nc &gt; 1) {
ofs = baseofs + obj.vOffsets.cofs;
gl.vertexAttrib4f( this.colLoc, obj.values[ofs],
obj.values[ofs+1],
obj.values[ofs+2],
obj.values[ofs+3] );
}
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.sphere.ibuf);
gl.drawElements(gl.TRIANGLES, this.sphere.sphereCount, gl.UNSIGNED_SHORT, 0);
}
this.disableArrays(obj, enabled);
if (typeof obj.polygon_offset !== "undefined") 
gl.disable(gl.POLYGON_OFFSET_FILL);
return;
} else {
if (obj.colorCount === 1) {
gl.disableVertexAttribArray( this.colLoc );
gl.vertexAttrib4fv( this.colLoc, new Float32Array(obj.onecolor));
} else {
gl.enableVertexAttribArray( this.colLoc );
enabled.colLoc = true;
gl.vertexAttribPointer(this.colLoc, 4, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.cofs);
}
}
if (is_lit &amp;&amp; obj.vOffsets.nofs &gt; 0) {
gl.enableVertexAttribArray( obj.normLoc );
enabled.normLoc = true;
gl.vertexAttribPointer(obj.normLoc, 3, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.nofs);
}
if (has_texture || type === "text") {
gl.enableVertexAttribArray( obj.texLoc );
enabled.texLoc = true;
gl.vertexAttribPointer(obj.texLoc, 2, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.tofs);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, obj.texture);
gl.uniform1i( obj.sampler, 0);
}
if (fixed_quads) {
gl.enableVertexAttribArray( obj.ofsLoc );
enabled.ofsLoc = true;
gl.vertexAttribPointer(obj.ofsLoc, 2, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.oofs);
}
if (typeof obj.userAttributes !== "undefined") {
for (attr in obj.userAttribSizes) {  // Not all attributes may have been used
gl.enableVertexAttribArray( obj.userAttribLocations[attr] );
gl.vertexAttribPointer( obj.userAttribLocations[attr], obj.userAttribSizes[attr],
gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.userAttribOffsets[attr]);
}
}
if (typeof obj.userUniforms !== "undefined") {
for (attr in obj.userUniformLocations) {
var loc = obj.userUniformLocations[attr];
if (loc !== null) {
var uniform = obj.userUniforms[attr];
if (typeof uniform.length === "undefined")
gl.uniform1f(loc, uniform);
else if (typeof uniform[0].length === "undefined") {
uniform = new Float32Array(uniform);
switch(uniform.length) {
case 2: gl.uniform2fv(loc, uniform); break;
case 3: gl.uniform3fv(loc, uniform); break;
case 4: gl.uniform4fv(loc, uniform); break;
default: console.warn("bad uniform length");
}
} else if (uniform.length == 4 &amp;&amp; uniform[0].length == 4)
gl.uniformMatrix4fv(loc, false, new Float32Array(uniform.getAsArray()));
else
console.warn("unsupported uniform matrix");
}
}
}
for (pass = 0; pass &lt; obj.passes; pass++) {
pmode = obj.pmode[pass];
if (pmode === "culled")
continue;
mode = fat_lines &amp;&amp; (is_lines || pmode == "lines") ? "TRIANGLES" : this.mode4type[type];
if (depth_sort &amp;&amp; pmode == "filled") {// Don't try depthsorting on wireframe or points
var faces = this.depthSort(obj),
nfaces = faces.length,
frowsize = Math.floor(obj.f[pass].length/nfaces);
if (type !== "spheres") {
var f = obj.index_uint ? new Uint32Array(obj.f[pass].length) : new Uint16Array(obj.f[pass].length);
for (i=0; i&lt;nfaces; i++) {
for (j=0; j&lt;frowsize; j++) {
f[frowsize*i + j] = obj.f[pass][frowsize*faces[i] + j];
}
}
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, obj.ibuf[pass]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.DYNAMIC_DRAW);
}
}
if (is_twosided)
gl.uniform1i(obj.frontLoc, pass !== 0);
if (type !== "spheres") 
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, obj.ibuf[pass]);
if (type === "sprites" || type === "text" || type === "quads") {
count = count * 6/4;
} else if (type === "surface") {
count = obj.f[pass].length;
}
count = obj.f[pass].length;
if (!is_lines &amp;&amp; pmode === "lines" &amp;&amp; !fat_lines) {
mode = "LINES";
} else if (pmode === "points") {
mode = "POINTS";
}
if ((is_lines || pmode === "lines") &amp;&amp; fat_lines) {
gl.enableVertexAttribArray(obj.pointLoc);
enabled.pointLoc = true;
gl.vertexAttribPointer(obj.pointLoc, 2, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.pointofs);
gl.enableVertexAttribArray(obj.nextLoc );
enabled.nextLoc = true;
gl.vertexAttribPointer(obj.nextLoc, 3, gl.FLOAT, false, 4*obj.vOffsets.stride, 4*obj.vOffsets.nextofs);
gl.uniform1f(obj.aspectLoc, this.vp.width/this.vp.height);
gl.uniform1f(obj.lwdLoc, this.getMaterial(id, "lwd")/this.vp.height);
}
gl.vertexAttribPointer(this.posLoc,  3, gl.FLOAT, false, 4*obj.vOffsets.stride,  4*obj.vOffsets.vofs);
gl.drawElements(gl[mode], count, obj.index_uint ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT, 0);
this.disableArrays(obj, enabled);
}
if (typeof obj.polygon_offset !== "undefined") 
gl.disable(gl.POLYGON_OFFSET_FILL);
};
/**
* Draw the background for a subscene
* @param { number } id - id of background object
* @param { number } subsceneid - id of subscene
*/
rglwidgetClass.prototype.drawBackground = function(id, subsceneid) {
var gl = this.gl || this.initGL(),
obj = this.getObj(id),
bg, i;
if (!obj.initialized)
this.initObj(id);
if (obj.colors.length) {
bg = obj.colors[0];
gl.clearColor(bg[0], bg[1], bg[2], bg[3]);
gl.depthMask(true);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
}
if (typeof obj.quad !== "undefined") {
this.prMatrix.makeIdentity();
this.mvMatrix.makeIdentity();
gl.disable(gl.BLEND);
gl.disable(gl.DEPTH_TEST);
gl.depthMask(false);
for (i=0; i &lt; obj.quad.length; i++)
this.drawObj(obj.quad[i], subsceneid);
}
};
/**
* Draw a subscene
* @param { number } subsceneid - id of subscene
* @param { boolean } opaquePass - is this the opaque drawing pass?
*/
rglwidgetClass.prototype.drawSubscene = function(subsceneid, opaquePass) {
var gl = this.gl || this.initGL(),
sub = this.getObj(subsceneid),
objects = this.scene.objects,
subids = sub.objects,
subscene_has_faces = false,
subscene_needs_sorting = false,
flags, i, obj;
if (sub.par3d.skipRedraw)
return;
for (i=0; i &lt; subids.length; i++) {
obj = objects[subids[i]];
flags = obj.flags;
if (typeof flags !== "undefined") {
subscene_has_faces |= (flags &amp; this.f_is_lit)
&amp; !(flags &amp; this.f_fixed_quads);
obj.is_transparent = (flags &amp; this.f_is_transparent) || obj.someHidden;
subscene_needs_sorting |= (flags &amp; this.f_depth_sort) || obj.is_transparent;
}
}
this.setViewport(subsceneid);
if (typeof sub.backgroundId !== "undefined" &amp;&amp; opaquePass)
this.drawBackground(sub.backgroundId, subsceneid);
if (subids.length) {
this.setprMatrix(subsceneid);
this.setmvMatrix(subsceneid);
if (subscene_has_faces) {
this.setnormMatrix(subsceneid);
if ((sub.flags &amp; this.f_sprites_3d) &amp;&amp;
typeof sub.spriteNormmat === "undefined") {
sub.spriteNormmat = new CanvasMatrix4(this.normMatrix);
}
}
if (subscene_needs_sorting)
this.setprmvMatrix();
var clipids = sub.clipplanes;
if (typeof clipids === "undefined") {
console.warn("bad clipids");
}
if (clipids.length &gt; 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (i = 0; i &lt; clipids.length; i++)
this.drawObj(clipids[i], subsceneid);
}
subids = sub.opaque.concat(sub.transparent);
if (opaquePass) {
gl.enable(gl.DEPTH_TEST);
gl.depthMask(true);
gl.disable(gl.BLEND);
for (i = 0; i &lt; subids.length; i++) {
if (!this.getObj(subids[i]).is_transparent)	
this.drawObj(subids[i], subsceneid);
}
} else {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (i = 0; i &lt; subids.length; i++) {
if (this.getObj(subids[i]).is_transparent)
this.drawObj(subids[i], subsceneid);
}
}
subids = sub.subscenes;
for (i = 0; i &lt; subids.length; i++) {
this.drawSubscene(subids[i], opaquePass);
}
}
};
/**
* Respond to brush change
*/
rglwidgetClass.prototype.selectionChanged = function() {
var i, j, k, id, subid = this.select.subscene, subscene,
objids, obj,
p1 = this.select.region.p1, p2 = this.select.region.p2,
filter, selection = [], handle, keys, xmin, x, xmax, ymin, y, ymax, z, v,
someHidden;
if (!subid)
return;
subscene = this.getObj(subid);
objids = subscene.objects;
filter = this.scene.crosstalk.filter;
this.setmvMatrix(subid);
this.setprMatrix(subid);
this.setprmvMatrix();
xmin = Math.min(p1.x, p2.x);
xmax = Math.max(p1.x, p2.x);
ymin = Math.min(p1.y, p2.y);
ymax = Math.max(p1.y, p2.y);
for (i = 0; i &lt; objids.length; i++) {
id = objids[i];
j = this.scene.crosstalk.id.indexOf(id);
if (j &gt;= 0) {
keys = this.scene.crosstalk.key[j];
obj = this.getObj(id);
someHidden = false;
for (k = 0; k &lt; keys.length; k++) {
if (filter &amp;&amp; filter.indexOf(keys[k]) &lt; 0) {
someHidden = true;
continue;
}
v = [].concat(obj.vertices[k]).concat(1.0);
v = this.multVM(v, this.prmvMatrix);
x = v[0]/v[3];
y = v[1]/v[3];
z = v[2]/v[3];
if (xmin &lt;= x &amp;&amp; x &lt;= xmax &amp;&amp; ymin &lt;= y &amp;&amp; y &lt;= ymax &amp;&amp; -1.0 &lt;= z &amp;&amp; z &lt;= 1.0) {
selection.push(keys[k]);
} else
someHidden = true;
}
obj.someHidden = someHidden &amp;&amp; (filter || selection.length);
obj.initialized = false;
/* Who should we notify?  Only shared data in the current subscene, or everyone? */
if (!this.equalArrays(selection, this.scene.crosstalk.selection)) {
handle = this.scene.crosstalk.sel_handle[j];
handle.set(selection, {rglSubsceneId: this.select.subscene});
}
}
}
};
/**
* Respond to selection or filter change from crosstalk
* @param { Object } event - crosstalk event
* @param { boolean } filter - filter or selection?
*/
rglwidgetClass.prototype.selection = function(event, filter) {
var i, j, ids, obj, keys, crosstalk = this.scene.crosstalk,
selection, someHidden;
// Record the message and find out if this event makes some objects have mixed values:
crosstalk = this.scene.crosstalk;
if (filter) {
filter = crosstalk.filter = event.value;
selection = crosstalk.selection;
} else {  
selection = crosstalk.selection = event.value;
filter = crosstalk.filter;
}
ids = crosstalk.id;
for (i = 0; i &lt; ids.length ; i++) {
obj = this.getObj(ids[i]);
obj.initialized = false;
keys = crosstalk.key[i];
someHidden = false;
for (j = 0; j &lt; keys.length &amp;&amp; !someHidden; j++) {
if ((filter &amp;&amp; filter.indexOf(keys[j]) &lt; 0) ||
(selection.length &amp;&amp; selection.indexOf(keys[j]) &lt; 0))
someHidden = true;
}
obj.someHidden = someHidden;
}
this.drawScene();
};
/**
* Clear the selection brush
* @param { number } except - Subscene that should ignore this request
*/
rglwidgetClass.prototype.clearBrush = function(except) {
if (this.select.subscene != except) {
this.select.state = "inactive";
this.delFromSubscene(this.scene.brushId, this.select.subscene);
}
this.drawScene();
};
/**
* Compute mouse coordinates relative to current canvas
* @returns { Object }
* @param { Object } event - event object from mouse click
*/
rglwidgetClass.prototype.relMouseCoords = function(event) {
var totalOffsetX = 0,
totalOffsetY = 0,
currentElement = this.canvas;
do {
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement);
var canvasX = event.pageX - totalOffsetX,
canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY};
};
/**
* Set mouse handlers for the scene
*/
rglwidgetClass.prototype.setMouseHandlers = function() {
var self = this, activeSubscene, handler,
handlers = {}, drag = 0;
handlers.rotBase = 0;
this.screenToVector = function(x, y) {
var viewport = this.getObj(activeSubscene).par3d.viewport,
width = viewport.width*this.canvas.width,
height = viewport.height*this.canvas.height,
radius = Math.max(width, height)/2.0,
cx = width/2.0,
cy = height/2.0,
px = (x-cx)/radius,
py = (y-cy)/radius,
plen = Math.sqrt(px*px+py*py);
if (plen &gt; 1.e-6) {
px = px/plen;
py = py/plen;
}
var angle = (Math.SQRT2 - plen)/Math.SQRT2*Math.PI/2,
z = Math.sin(angle),
zlen = Math.sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
};
handlers.trackballdown = function(x,y) {
var activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
i, l = activeModel.par3d.listeners;
handlers.rotBase = this.screenToVector(x, y);
this.saveMat = [];
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.saveMat = new CanvasMatrix4(activeSub.par3d.userMatrix);
}
};
handlers.trackballmove = function(x,y) {
var rotCurrent = this.screenToVector(x,y),
rotBase = handlers.rotBase,
dot = rotBase[0]*rotCurrent[0] +
rotBase[1]*rotCurrent[1] +
rotBase[2]*rotCurrent[2],
angle = Math.acos( dot/this.vlen(rotBase)/this.vlen(rotCurrent) )*180.0/Math.PI,
axis = this.xprod(rotBase, rotCurrent),
objects = this.scene.objects,
activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
l = activeModel.par3d.listeners,
i;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.par3d.userMatrix.load(objects[l[i]].saveMat);
activeSub.par3d.userMatrix.rotate(angle, axis[0], axis[1], axis[2]);
}
this.drawScene();
};
handlers.trackballend = 0;
this.clamp = function(x, lo, hi) {
return Math.max(lo, Math.min(x, hi));
};
this.screenToPolar = function(x,y) {
var viewport = this.getObj(activeSubscene).par3d.viewport,
width = viewport.width*this.canvas.width,
height = viewport.height*this.canvas.height,
r = Math.min(width, height)/2,
dx = this.clamp(x - width/2, -r, r),
dy = this.clamp(y - height/2, -r, r);
return [Math.asin(dx/r), Math.asin(-dy/r)];
};
handlers.polardown = function(x,y) {
var activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
i, l = activeModel.par3d.listeners;
handlers.dragBase = this.screenToPolar(x, y);
this.saveMat = [];
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.saveMat = new CanvasMatrix4(activeSub.par3d.userMatrix);
activeSub.camBase = [-Math.atan2(activeSub.saveMat.m13, activeSub.saveMat.m11),
Math.atan2(activeSub.saveMat.m32, activeSub.saveMat.m22)];
}
};
handlers.polarmove = function(x,y) {
var dragCurrent = this.screenToPolar(x,y),
activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
objects = this.scene.objects,
l = activeModel.par3d.listeners,
i, changepos = [];
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
for (j=0; j&lt;2; j++)
changepos[j] = -(dragCurrent[j] - handlers.dragBase[j]);
activeSub.par3d.userMatrix.makeIdentity();
activeSub.par3d.userMatrix.rotate(changepos[0]*180/Math.PI, 0,-1,0);
activeSub.par3d.userMatrix.multRight(objects[l[i]].saveMat);
activeSub.par3d.userMatrix.rotate(changepos[1]*180/Math.PI, -1,0,0);
}
this.drawScene();
};
handlers.polarend = 0;
handlers.axisdown = function(x,y) {
handlers.rotBase = this.screenToVector(x, this.canvas.height/2);
var activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
i, l = activeModel.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.saveMat = new CanvasMatrix4(activeSub.par3d.userMatrix);
}
};
handlers.axismove = function(x,y) {
var rotCurrent = this.screenToVector(x, this.canvas.height/2),
rotBase = handlers.rotBase,
angle = (rotCurrent[0] - rotBase[0])*180/Math.PI,
rotMat = new CanvasMatrix4();
rotMat.rotate(angle, handlers.axis[0], handlers.axis[1], handlers.axis[2]);
var activeSub = this.getObj(activeSubscene),
activeModel = this.getObj(this.useid(activeSub.id, "model")),
i, l = activeModel.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.par3d.userMatrix.load(activeSub.saveMat);
activeSub.par3d.userMatrix.multLeft(rotMat);
}
this.drawScene();
};
handlers.axisend = 0;
handlers.y0zoom = 0;
handlers.zoom0 = 0;
handlers.zoomdown = function(x, y) {
var activeSub = this.getObj(activeSubscene),
activeProjection = this.getObj(this.useid(activeSub.id, "projection")),
i, l = activeProjection.par3d.listeners;
handlers.y0zoom = y;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.zoom0 = Math.log(activeSub.par3d.zoom);
}
};
handlers.zoommove = function(x, y) {
var activeSub = this.getObj(activeSubscene),
activeProjection = this.getObj(this.useid(activeSub.id, "projection")),
i, l = activeProjection.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.par3d.zoom = Math.exp(activeSub.zoom0 + (y-handlers.y0zoom)/this.canvas.height);
}
this.drawScene();
};
handlers.zoomend = 0;
handlers.y0fov = 0;
handlers.fovdown = function(x, y) {
handlers.y0fov = y;
var activeSub = this.getObj(activeSubscene),
activeProjection = this.getObj(this.useid(activeSub.id, "projection")),
i, l = activeProjection.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.fov0 = activeSub.par3d.FOV;
}
};
handlers.fovmove = function(x, y) {
var activeSub = this.getObj(activeSubscene),
activeProjection = this.getObj(this.useid(activeSub.id, "projection")),
i, l = activeProjection.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = this.getObj(l[i]);
activeSub.par3d.FOV = Math.max(1, Math.min(179, activeSub.fov0 +
180*(y-handlers.y0fov)/this.canvas.height));
}
this.drawScene();
};
handlers.fovend = 0;
handlers.selectingdown = function(x, y) {
var viewport = this.getObj(activeSubscene).par3d.viewport,
width = viewport.width*this.canvas.width,
height = viewport.height*this.canvas.height, 
p = {x: 2.0*x/width - 1.0, y: 2.0*y/height - 1.0};
this.select.region = {p1: p, p2: p};
if (this.select.subscene &amp;&amp; this.select.subscene != activeSubscene)
this.delFromSubscene(this.scene.brushId, this.select.subscene);
this.select.subscene = activeSubscene;
this.addToSubscene(this.scene.brushId, activeSubscene);
this.select.state = "changing";
if (typeof this.scene.brushId !== "undefined")
this.getObj(this.scene.brushId).initialized = false;
this.drawScene();
};
handlers.selectingmove = function(x, y) {
var viewport = this.getObj(activeSubscene).par3d.viewport,
width = viewport.width*this.canvas.width,
height = viewport.height*this.canvas.height;
if (this.select.state === "inactive") 
return;
this.select.region.p2 = {x: 2.0*x/width - 1.0, y: 2.0*y/height - 1.0};
if (typeof this.scene.brushId !== "undefined")
this.getObj(this.scene.brushId).initialized = false;
this.drawScene();
};
handlers.selectingend = 0;
this.canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1:
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ["left", "middle", "right"][ev.which-1];
var coords = self.relMouseCoords(ev);
coords.y = self.canvas.height-coords.y;
activeSubscene = self.whichSubscene(coords);
var sub = self.getObj(activeSubscene), f;
handler = sub.par3d.mouseMode[drag];
switch (handler) {
case "xAxis":
handler = "axis";
handlers.axis = [1.0, 0.0, 0.0];
break;
case "yAxis":
handler = "axis";
handlers.axis = [0.0, 1.0, 0.0];
break;
case "zAxis":
handler = "axis";
handlers.axis = [0.0, 0.0, 1.0];
break;
}
f = handlers[handler + "down"];
if (f) {
coords = self.translateCoords(activeSubscene, coords);
f.call(self, coords.x, coords.y);
ev.preventDefault();
} else
console.warn("Mouse handler '" + handler + "' is not implemented.");
};
this.canvas.onmouseup = function ( ev ){
if ( drag === 0 ) return;
var f = handlers[handler + "end"];
if (f) {
f.call(self);
ev.preventDefault();
}
drag = 0;
};
this.canvas.onmouseout = this.canvas.onmouseup;
this.canvas.onmousemove = function ( ev ) {
if ( drag === 0 ) return;
var f = handlers[handler + "move"];
if (f) {
var coords = self.relMouseCoords(ev);
coords.y = self.canvas.height - coords.y;
coords = self.translateCoords(activeSubscene, coords);
f.call(self, coords.x, coords.y);
}
};
handlers.wheelHandler = function(ev) {
var del = 1.02, i;
if (ev.shiftKey) del = 1.002;
var ds = ((ev.detail || ev.wheelDelta) &gt; 0) ? del : (1 / del);
if (typeof activeSubscene === "undefined")
activeSubscene = self.scene.rootSubscene;
var activeSub = self.getObj(activeSubscene),
activeProjection = self.getObj(self.useid(activeSub.id, "projection")),
l = activeProjection.par3d.listeners;
for (i = 0; i &lt; l.length; i++) {
activeSub = self.getObj(l[i]);
activeSub.par3d.zoom *= ds;
}
self.drawScene();
ev.preventDefault();
};
this.canvas.addEventListener("DOMMouseScroll", handlers.wheelHandler, false);
this.canvas.addEventListener("mousewheel", handlers.wheelHandler, false);
};
/**
* Find a particular subscene by inheritance
* @returns { number } id of subscene to use
* @param { number } subsceneid - child subscene
* @param { string } type - type of inheritance:  "projection" or "model"
*/
rglwidgetClass.prototype.useid = function(subsceneid, type) {
var sub = this.getObj(subsceneid);
if (sub.embeddings[type] === "inherit")
return(this.useid(sub.parent, type));
else
return subsceneid;
};
/**
* Check whether point is in viewport of subscene
* @returns {boolean}
* @param { Object } coords - screen coordinates of point
* @param { number } subsceneid - subscene to check
*/
rglwidgetClass.prototype.inViewport = function(coords, subsceneid) {
var viewport = this.getObj(subsceneid).par3d.viewport,
x0 = coords.x - viewport.x*this.canvas.width,
y0 = coords.y - viewport.y*this.canvas.height;
return 0 &lt;= x0 &amp;&amp; x0 &lt;= viewport.width*this.canvas.width &amp;&amp;
0 &lt;= y0 &amp;&amp; y0 &lt;= viewport.height*this.canvas.height;
};
/**
* Find which subscene contains a point
* @returns { number } subscene id
* @param { Object } coords - coordinates of point
*/
rglwidgetClass.prototype.whichSubscene = function(coords) {
var self = this,
recurse = function(subsceneid) {
var subscenes = self.getChildSubscenes(subsceneid), i, id;
for (i=0; i &lt; subscenes.length; i++) {
id = recurse(subscenes[i]);
if (typeof(id) !== "undefined")
return(id);
}
if (self.inViewport(coords, subsceneid))
return(subsceneid);
else
return undefined;
},
rootid = this.scene.rootSubscene,
result = recurse(rootid);
if (typeof(result) === "undefined")
result = rootid;
return result;
};
/**
* Translate from window coordinates to viewport coordinates
* @returns { Object } translated coordinates
* @param { number } subsceneid - which subscene to use?
* @param { Object } coords - point to translate
*/
rglwidgetClass.prototype.translateCoords = function(subsceneid, coords) {
var viewport = this.getObj(subsceneid).par3d.viewport;
return {x: coords.x - viewport.x*this.canvas.width,
y: coords.y - viewport.y*this.canvas.height};
};
/**
* Initialize the sphere object
*/
rglwidgetClass.prototype.initSphere = function() {
var verts = this.scene.sphereVerts,
reuse = verts.reuse, result;
if (typeof reuse !== "undefined") {
var prev = document.getElementById(reuse).rglinstance.sphere;
result = {values: prev.values, vOffsets: prev.vOffsets, it: prev.it};
} else
result = {values: new Float32Array(this.flatten(this.cbind(this.transpose(verts.vb),
this.transpose(verts.texcoords)))),
it: new Uint16Array(this.flatten(this.transpose(verts.it))),
vOffsets: {vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1,
tofs:3, nextofs:-1, pointofs:-1, stride:5}};
result.sphereCount = result.it.length;
this.sphere = result;
};
/**
* Set the vertices in the selection box object
*/
rglwidgetClass.prototype.initSelection = function(id) {
if (typeof this.select.region === "undefined")
return;
var obj = this.getObj(id),
width = this.canvas.width,
height = this.canvas.height, 
p1 = this.select.region.p1,
p2 = this.select.region.p2;
obj.vertices = [[p1.x, p1.y, 0.0],
[p2.x, p1.y, 0.0],
[p2.x, p2.y, 0.0],
[p1.x, p2.y, 0.0],
[p1.x, p1.y, 0.0]];
};
/**
* Do the gl part of initializing the sphere
*/
rglwidgetClass.prototype.initSphereGL = function() {
var gl = this.gl || this.initGL(), sphere = this.sphere;
if (gl.isContextLost()) return;
sphere.buf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphere.buf);
gl.bufferData(gl.ARRAY_BUFFER, sphere.values, gl.STATIC_DRAW);
sphere.ibuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphere.ibuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, sphere.it, gl.STATIC_DRAW);
return;
};
/**
* Initialize the DOM object
* @param { Object } el - the DOM object
* @param { Object } x - the scene data sent by JSON from R
*/
rglwidgetClass.prototype.initialize = function(el, x) {
this.textureCanvas = document.createElement("canvas");
this.textureCanvas.style.display = "block";
this.scene = x;
this.normMatrix = new CanvasMatrix4();
this.saveMat = {};
this.distance = null;
this.posLoc = 0;
this.colLoc = 1;
if (el) {
el.rglinstance = this;
this.el = el;
this.webGLoptions = el.rglinstance.scene.webGLoptions;
this.initCanvas();
}
if (typeof Shiny !== "undefined") {
var self = this;
Shiny.addCustomMessageHandler("shinyGetPar3d",
function(message) {
var i, param, 
subscene = self.getObj(message.subscene),
parameters = [].concat(message.parameters),
result = {tag: message.tag, subscene: message.subscene};
if (typeof subscene !== "undefined") {
for (i = 0; i &lt; parameters.length; i++) {
param = parameters[i];
result[param] = subscene.par3d[param];
};
} else {
console.log("subscene "+message.subscene+" undefined.")
}
Shiny.setInputValue("par3d:shinyPar3d", result, {priority: "event"});
});
Shiny.addCustomMessageHandler("shinySetPar3d",
function(message) {
var param = message.parameter, 
subscene = self.getObj(message.subscene);
if (typeof subscene !== "undefined") {
subscene.par3d[param] = message.value;
subscene.initialized = false;
self.drawScene();
} else {
console.log("subscene "+message.subscene+" undefined.")
}
})
}
};
/**
* Restart the WebGL canvas
*/
rglwidgetClass.prototype.restartCanvas = function() {
var newcanvas = document.createElement("canvas"),
self = this;
newcanvas.width = this.el.width;
newcanvas.height = this.el.height;
newcanvas.addEventListener("webglcontextrestored",
this.onContextRestored, false);
newcanvas.addEventListener("webglcontextlost",
this.onContextLost, false);
while (this.el.firstChild) {
this.el.removeChild(this.el.firstChild);
}
this.el.appendChild(newcanvas);
this.canvas = newcanvas;
this.setMouseHandlers();
if (this.gl) 
Object.keys(this.scene.objects).forEach(function(key){
self.getObj(parseInt(key, 10)).texture = undefined; 
});
this.gl = null;
};
/**
* Initialize the WebGL canvas
*/
rglwidgetClass.prototype.initCanvas = function() {
this.restartCanvas();
var objs = this.scene.objects,
self = this;
Object.keys(objs).forEach(function(key){
var id = parseInt(key, 10),
obj = self.getObj(id);
if (typeof obj.reuse !== "undefined")
self.copyObj(id, obj.reuse);
});
Object.keys(objs).forEach(function(key){
self.initSubscene(parseInt(key, 10));
});
this.setMouseHandlers();
this.initSphere();
this.onContextRestored = function(event) {
self.initGL();
self.drawScene();
};
this.onContextLost = function(event) {
if (!self.drawing)
this.gl = null;
event.preventDefault();
};
this.initGL0();
this.lazyLoadScene = function() {
if (typeof self.slide === "undefined")
self.slide = self.getSlide();
if (self.isInBrowserViewport()) {
if (!self.gl || self.gl.isContextLost())
self.initGL();
self.drawScene();
}
};
window.addEventListener("DOMContentLoaded", this.lazyLoadScene, false);
window.addEventListener("load", this.lazyLoadScene, false);
window.addEventListener("resize", this.lazyLoadScene, false);
window.addEventListener("scroll", this.lazyLoadScene, false);
this.slide = this.getSlide();
if (this.slide) {
if (typeof this.slide.rgl === "undefined")
this.slide.rgl = [this];
else
this.slide.rgl.push(this);
if (this.scene.context.rmarkdown) 
if (this.scene.context.rmarkdown === "ioslides_presentation") {
this.slide.setAttribute("slideenter", "this.rgl.forEach(function(scene) { scene.lazyLoadScene.call(window);})");
} else if (this.scene.context.rmarkdown === "slidy_presentation") {
// This method would also work in ioslides, but it gets triggered
// something like 5 times per slide for every slide change, so
// you'd need a quicker function than lazyLoadScene.
var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver,
observer = new MutationObserver(function(mutations) {
mutations.forEach(function(mutation) {
self.slide.rgl.forEach(function(scene) { scene.lazyLoadScene.call(window); });});});
observer.observe(this.slide, { attributes: true, attributeFilter:["class"] });
}
}
};
/**
* Start the writeWebGL scene. This is only used by writeWebGL; rglwidget has
no debug element and does the drawing in rglwidget.js.
*/
rglwidgetClass.prototype.start = function() {
if (typeof this.prefix !== "undefined") {
this.debugelement = document.getElementById(this.prefix + "debug");
this.debug("");
}
this.drag = 0;
this.drawScene();
};
/**
* Display a debug message
* @param { string } msg - The message to display
* @param { Object } [img] - Image to insert before message
*/
rglwidgetClass.prototype.debug = function(msg, img) {
if (typeof this.debugelement !== "undefined" &amp;&amp; this.debugelement !== null) {
this.debugelement.innerHTML = msg;
if (typeof img !== "undefined") {
this.debugelement.insertBefore(img, this.debugelement.firstChild);
}
} else if (msg !== "")
alert(msg);
};
/**
* Get the snapshot image of this scene
* @returns { Object } The img DOM element
*/
rglwidgetClass.prototype.getSnapshot = function() {
var img;
if (typeof this.scene.snapshot !== "undefined") {
img = document.createElement("img");
img.src = this.scene.snapshot;
img.alt = "Snapshot";
}
return img;
};
/**
* Initial test for WebGL
*/
rglwidgetClass.prototype.initGL0 = function() {
if (!window.WebGLRenderingContext){
alert("Your browser does not support WebGL. See http://get.webgl.org");
return;
}
};
/**
* If we are in an ioslides or slidy presentation, get the
* DOM element of the current slide
* @returns { Object }
*/
rglwidgetClass.prototype.getSlide = function() {
var result = this.el, done = false;
while (result &amp;&amp; !done &amp;&amp; this.scene.context.rmarkdown) {
switch(this.scene.context.rmarkdown) {
case "ioslides_presentation":
if (result.tagName === "SLIDE") return result;
break;
case "slidy_presentation":
if (result.tagName === "DIV" &amp;&amp; result.classList.contains("slide"))
return result;
break;
default: return null;
}
result = result.parentElement;
}
return null;
};
/**
* Is this scene visible in the browser?
* @returns { boolean }
*/
rglwidgetClass.prototype.isInBrowserViewport = function() {
var rect = this.canvas.getBoundingClientRect(),
windHeight = (window.innerHeight || document.documentElement.clientHeight),
windWidth = (window.innerWidth || document.documentElement.clientWidth);
if (this.scene.context &amp;&amp; this.scene.context.rmarkdown !== null) {
if (this.slide)
return (this.scene.context.rmarkdown === "ioslides_presentation" &amp;&amp;
this.slide.classList.contains("current")) ||
(this.scene.context.rmarkdown === "slidy_presentation" &amp;&amp;
!this.slide.classList.contains("hidden"));
}
return (
rect.top &gt;= -windHeight &amp;&amp;
rect.left &gt;= -windWidth &amp;&amp;
rect.bottom &lt;= 2*windHeight &amp;&amp;
rect.right &lt;= 2*windWidth);
};
/**
* Initialize WebGL
* @returns { Object } the WebGL context
*/
rglwidgetClass.prototype.initGL = function() {
var self = this;
if (this.gl) {
if (!this.drawing &amp;&amp; this.gl.isContextLost())
this.restartCanvas();
else
return this.gl;
}
// if (!this.isInBrowserViewport()) return; Return what??? At this point we know this.gl is null.
this.canvas.addEventListener("webglcontextrestored",
this.onContextRestored, false);
this.canvas.addEventListener("webglcontextlost",
this.onContextLost, false);
this.gl = this.canvas.getContext("webgl", this.webGLoptions) ||
this.canvas.getContext("experimental-webgl", this.webGLoptions);
this.index_uint = this.gl.getExtension("OES_element_index_uint");
var save = this.startDrawing();
this.initSphereGL();
Object.keys(this.scene.objects).forEach(function(key){
self.initObj(parseInt(key, 10));
});
this.stopDrawing(save);
return this.gl;
};
/**
* Resize the display to match element
* @param { Object } el - DOM element to match
*/
rglwidgetClass.prototype.resize = function(el) {
this.canvas.width = el.width;
this.canvas.height = el.height;
};
/**
* Draw the whole scene
*/
rglwidgetClass.prototype.drawScene = function() {
var gl = this.gl || this.initGL(),
wasDrawing = this.startDrawing();
if (!wasDrawing) {
if (this.select.state !== "inactive")
this.selectionChanged();
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
gl.depthMask(true); // Must be true before clearing depth buffer
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawSubscene(this.scene.rootSubscene, true);
this.drawSubscene(this.scene.rootSubscene, false);
}
this.stopDrawing(wasDrawing);
};
/**
* Change the displayed subset
* @param { Object } el - Element of the control; not used.
* @param { Object } control - The subset control data.
*/
rglwidgetClass.prototype.subsetSetter = function(el, control) {
if (typeof control.subscenes === "undefined" ||
control.subscenes === null)
control.subscenes = this.scene.rootSubscene;
var value = Math.round(control.value),
subscenes = [].concat(control.subscenes),
fullset = [].concat(control.fullset),
i, j, entries, subsceneid,
adds = [], deletes = [],
ismissing = function(x) {
return fullset.indexOf(x) &lt; 0;
},
tointeger = function(x) {
return parseInt(x, 10);
};
if (isNaN(value))
value = control.value = 0;
if (control.accumulate)
for (i=0; i &lt;= value; i++)
adds = adds.concat(control.subsets[i]);
else
adds = adds.concat(control.subsets[value]);
deletes = fullset.filter(function(x) { return adds.indexOf(x) &lt; 0; });
for (i = 0; i &lt; subscenes.length; i++) {
subsceneid = subscenes[i];
if (typeof this.getObj(subsceneid) === "undefined")
this.alertOnce("typeof object is undefined");
for (j = 0; j &lt; adds.length; j++)
this.addToSubscene(adds[j], subsceneid);
for (j = 0; j &lt; deletes.length; j++)
this.delFromSubscene(deletes[j], subsceneid);
}
};
/**
* Change the requested property
* @param { Object } el - Element of the control; not used.
* @param { Object } control - The property setter control data.
*/
rglwidgetClass.prototype.propertySetter = function(el, control)  {
var value = control.value,
values = [].concat(control.values),
svals = [].concat(control.param),
direct = values[0] === null,
entries = [].concat(control.entries),
ncol = entries.length,
nrow = values.length/ncol,
properties = this.repeatToLen(control.properties, ncol),
objids = this.repeatToLen(control.objids, ncol),
property, objid = objids[0],
obj = this.getObj(objid),
propvals, i, v1, v2, p, entry, gl, needsBinding,
newprop, newid,
getPropvals = function() {
if (property === "userMatrix")
return obj.par3d.userMatrix.getAsArray();
else if (property === "scale" || property === "FOV" || property === "zoom")
return [].concat(obj.par3d[property]);
else
return [].concat(obj[property]);
};
putPropvals = function(newvals) {
if (newvals.length == 1)
newvals = newvals[0];
if (property === "userMatrix")
obj.par3d.userMatrix.load(newvals);
else if (property === "scale" || property === "FOV" || property === "zoom")
obj.par3d[property] = newvals;
else
obj[property] = newvals;
};
if (direct &amp;&amp; typeof value === "undefined")
return;
if (control.interp) {
values = values.slice(0, ncol).concat(values).
concat(values.slice(ncol*(nrow-1), ncol*nrow));
svals = [-Infinity].concat(svals).concat(Infinity);
for (i = 1; i &lt; svals.length; i++) {
if (value &lt;= svals[i]) {
if (svals[i] === Infinity)
p = 1;
else
p = (svals[i] - value)/(svals[i] - svals[i-1]);
break;
}
}
} else if (!direct) {
value = Math.round(value);
}
for (j=0; j&lt;entries.length; j++) {
entry = entries[j];
newprop = properties[j];
newid = objids[j];
if (newprop !== property || newid != objid) {
if (typeof property !== "undefined")
putPropvals(propvals);
property = newprop;
objid = newid;
obj = this.getObj(objid);
propvals = getPropvals();
}
if (control.interp) {
v1 = values[ncol*(i-1) + j];
v2 = values[ncol*i + j];
this.setElement(propvals, entry, p*v1 + (1-p)*v2);
} else if (!direct) {
this.setElement(propvals, entry, values[ncol*value + j]);
} else {
this.setElement(propvals, entry, value[j]);
}
}
putPropvals(propvals);
needsBinding = [];
for (j=0; j &lt; entries.length; j++) {
if (properties[j] === "values" &amp;&amp;
needsBinding.indexOf(objids[j]) === -1) {
needsBinding.push(objids[j]);
}
}
for (j=0; j &lt; needsBinding.length; j++) {
gl = this.gl || this.initGL();
obj = this.getObj(needsBinding[j]);
gl.bindBuffer(gl.ARRAY_BUFFER, obj.buf);
gl.bufferData(gl.ARRAY_BUFFER, obj.values, gl.STATIC_DRAW);
}
};
/**
* Change the requested vertices
* @param { Object } el - Element of the control; not used.
* @param { Object } control - The vertext setter control data.
*/
rglwidgetClass.prototype.vertexSetter = function(el, control)  {
var svals = [].concat(control.param),
j, k, p, a, propvals, stride, ofs, obj, entry,
attrib,
ofss    = {x:"vofs", y:"vofs", z:"vofs",
red:"cofs", green:"cofs", blue:"cofs",
alpha:"cofs", radii:"radofs",
nx:"nofs", ny:"nofs", nz:"nofs",
ox:"oofs", oy:"oofs", oz:"oofs",
ts:"tofs", tt:"tofs"},
pos     = {x:0, y:1, z:2,
red:0, green:1, blue:2,
alpha:3,radii:0,
nx:0, ny:1, nz:2,
ox:0, oy:1, oz:2,
ts:0, tt:1},
values = control.values,
direct = values === null,
ncol,
interp = control.interp,
vertices = [].concat(control.vertices),
attributes = [].concat(control.attributes),
value = control.value, newval, aliases, alias;
ncol = Math.max(vertices.length, attributes.length);
if (!ncol)
return;
vertices = this.repeatToLen(vertices, ncol);
attributes = this.repeatToLen(attributes, ncol);
if (direct)
interp = false;
/* JSON doesn't pass Infinity */
svals[0] = -Infinity;
svals[svals.length - 1] = Infinity;
for (j = 1; j &lt; svals.length; j++) {
if (value &lt;= svals[j]) {
if (interp) {
if (svals[j] === Infinity)
p = 1;
else
p = (svals[j] - value)/(svals[j] - svals[j-1]);
} else {
if (svals[j] - value &gt; value - svals[j-1])
j = j - 1;
}
break;
}
}
obj = this.getObj(control.objid);
// First, make sure color attributes vary in original
if (typeof obj.vOffsets !== "undefined") {
varies = true;
for (k = 0; k &lt; ncol; k++) {
attrib = attributes[k];
if (typeof attrib !== "undefined") {
ofs = obj.vOffsets[ofss[attrib]];
if (ofs &lt; 0) {
switch(attrib) {
case "alpha":
case "red":
case "green":
case "blue":
obj.colors = [obj.colors[0], obj.colors[0]];
break;
}
varies = false;
}
}
}
if (!varies)
this.initObj(control.objid);
}
propvals = obj.values;
aliases = obj.alias;
if (typeof aliases === "undefined")
aliases = [];
for (k=0; k&lt;ncol; k++) {
if (direct) {
newval = value;
} else if (interp) {
newval = p*values[j-1][k] + (1-p)*values[j][k];
} else {
newval = values[j][k];
}      	
attrib = attributes[k];
vertex = vertices[k];
alias = aliases[vertex];
if (obj.type === "planes" || obj.type === "clipplanes") {
ofs = ["nx", "ny", "nz", "offset"].indexOf(attrib);
if (ofs &gt;= 0) {
if (ofs &lt; 3) {
if (obj.normals[vertex][ofs] != newval) {  // Assume no aliases here...
obj.normals[vertex][ofs] = newval;
obj.initialized = false;
}
} else {
if (obj.offsets[vertex][0] != newval) {
obj.offsets[vertex][0] = newval;
obj.initialized = false;
}
}
continue;
}
}
// Not a plane setting...
ofs = obj.vOffsets[ofss[attrib]];
if (ofs &lt; 0)
this.alertOnce("Attribute '"+attrib+"' not found in object "+control.objid);
else {
stride = obj.vOffsets.stride;
ofs = ofs + pos[attrib];
entry = vertex*stride + ofs;
propvals[entry] = newval;
if (typeof alias !== "undefined")
for (a = 0; a &lt; alias.length; a++)
propvals[alias[a]*stride + ofs] = newval;
}
}
if (typeof obj.buf !== "undefined") {
var gl = this.gl || this.initGL();
gl.bindBuffer(gl.ARRAY_BUFFER, obj.buf);
gl.bufferData(gl.ARRAY_BUFFER, propvals, gl.STATIC_DRAW);
}
};
/**
* Change the requested vertex properties by age
* @param { Object } el - Element of the control; not used.
* @param { Object } control - The age setter control data.
*/
rglwidgetClass.prototype.ageSetter = function(el, control) {
var objids = [].concat(control.objids),
nobjs = objids.length,
time = control.value,
births = [].concat(control.births),
ages = [].concat(control.ages),
steps = births.length,
j = Array(steps),
p = Array(steps),
i, k, age, j0, propvals, stride, ofs, objid, obj,
attrib, dim, varies, alias, aliases, a, d,
attribs = ["colors", "alpha", "radii", "vertices",
"normals", "origins", "texcoords",
"x", "y", "z",
"red", "green", "blue"],
ofss    = ["cofs", "cofs", "radofs", "vofs",
"nofs", "oofs", "tofs",
"vofs", "vofs", "vofs",
"cofs", "cofs", "cofs"],
dims    = [3,1,1,3,
3,2,2,
1,1,1,
1,1,1],
pos     = [0,3,0,0,
0,0,0,
0,1,2,
0,1,2];
/* Infinity doesn't make it through JSON */
ages[0] = -Infinity;
ages[ages.length-1] = Infinity;
for (i = 0; i &lt; steps; i++) {
if (births[i] !== null) {  // NA in R becomes null
age = time - births[i];
for (j0 = 1; age &gt; ages[j0]; j0++);
if (ages[j0] == Infinity)
p[i] = 1;
else if (ages[j0] &gt; ages[j0-1])
p[i] = (ages[j0] - age)/(ages[j0] - ages[j0-1]);
else
p[i] = 0;
j[i] = j0;
}
}
// First, make sure color attributes vary in original
for (l = 0; l &lt; nobjs; l++) {
objid = objids[l];
obj = this.getObj(objid);
varies = true;
if (typeof obj.vOffsets === "undefined")
continue;
for (k = 0; k &lt; attribs.length; k++) {
attrib = control[attribs[k]];
if (typeof attrib !== "undefined") {
ofs = obj.vOffsets[ofss[k]];
if (ofs &lt; 0) {
switch(attribs[k]) {
case "colors":
case "alpha":
case "red":
case "green":
case "blue":
obj.colors = [obj.colors[0], obj.colors[0]];
break;
}
varies = false;
}
}
}
if (!varies)
this.initObj(objid);
}
for (l = 0; l &lt; nobjs; l++) {
objid = objids[l];
obj = this.getObj(objid);
if (typeof obj.vOffsets === "undefined")
continue;
aliases = obj.alias;
if (typeof aliases === "undefined")
aliases = [];
propvals = obj.values;
stride = obj.vOffsets.stride;
for (k = 0; k &lt; attribs.length; k++) {
attrib = control[attribs[k]];
if (typeof attrib !== "undefined") {
ofs = obj.vOffsets[ofss[k]];
if (ofs &gt;= 0) {
dim = dims[k];
ofs = ofs + pos[k];
for (i = 0; i &lt; steps; i++) {
alias = aliases[i];
if (births[i] !== null) {
for (d=0; d &lt; dim; d++) {
propvals[i*stride + ofs + d] = p[i]*attrib[dim*(j[i]-1) + d] + (1-p[i])*attrib[dim*j[i] + d];
if (typeof alias !== "undefined")
for (a=0; a &lt; alias.length; a++)
propvals[alias[a]*stride + ofs + d] = propvals[i*stride + ofs + d];
}
}
}
} else
this.alertOnce("\'"+attribs[k]+"\' property not found in object "+objid);
}
}
obj.values = propvals;
if (typeof obj.buf !== "undefined") {
gl = this.gl || this.initGL();
gl.bindBuffer(gl.ARRAY_BUFFER, obj.buf);
gl.bufferData(gl.ARRAY_BUFFER, obj.values, gl.STATIC_DRAW);
}
}
};
/**
* Bridge to old style control
* @param { Object } el - Element of the control; not used.
* @param { Object } control - The bridge control data.
*/
rglwidgetClass.prototype.oldBridge = function(el, control) {
var attrname, global = window[control.prefix + "rgl"];
if (global)
for (attrname in global)
this[attrname] = global[attrname];
window[control.prefix + "rgl"] = this;
};
/**
* Set up a player control
* @param { Object } el - The player control element
* @param { Object } control - The player data.
*/
rglwidgetClass.prototype.Player = function(el, control) {
var
self = this,
components = [].concat(control.components),
buttonLabels = [].concat(control.buttonLabels),
Tick = function() { /* "this" will be a timer */
var i,
nominal = this.value,
slider = this.Slider,
labels = this.outputLabels,
output = this.Output,
step;
if (typeof slider !== "undefined" &amp;&amp; nominal != slider.value)
slider.value = nominal;
if (typeof output !== "undefined") {
step = Math.round((nominal - output.sliderMin)/output.sliderStep);
if (labels !== null) {
output.innerHTML = labels[step];
} else {
step = step*output.sliderStep + output.sliderMin;
output.innerHTML = step.toPrecision(output.outputPrecision);
}
}
for (i=0; i &lt; this.actions.length; i++) {
this.actions[i].value = nominal;
}
self.applyControls(el, this.actions, false);
self.drawScene();
},
OnSliderInput = function() { /* "this" will be the slider */
this.rgltimer.value = Number(this.value);
this.rgltimer.Tick();
},
addSlider = function(min, max, step, value) {
var slider = document.createElement("input");
slider.type = "range";
slider.min = min;
slider.max = max;
slider.step = step;
slider.value = value;
slider.oninput = OnSliderInput;
slider.sliderActions = control.actions;
slider.sliderScene = this;
slider.className = "rgl-slider";
slider.id = el.id + "-slider";
el.rgltimer.Slider = slider;
slider.rgltimer = el.rgltimer;
el.appendChild(slider);
},
addLabel = function(labels, min, step, precision) {
var output = document.createElement("output");
output.sliderMin = min;
output.sliderStep = step;
output.outputPrecision = precision;
output.className = "rgl-label";
output.id = el.id + "-label";
el.rgltimer.Output = output;
el.rgltimer.outputLabels = labels;
el.appendChild(output);
},
addButton = function(which, label, active) {
var button = document.createElement("input"),
onclicks = {Reverse: function() { this.rgltimer.reverse();},
Play: function() { this.rgltimer.play();
this.value = this.rgltimer.enabled ? this.inactiveValue : this.activeValue; },
Slower: function() { this.rgltimer.slower(); },
Faster: function() { this.rgltimer.faster(); },
Reset: function() { this.rgltimer.reset(); },
Step:  function() { this.rgltimer.step(); }
};
button.rgltimer = el.rgltimer;
button.type = "button";
button.value = label;
button.activeValue = label;
button.inactiveValue = active;
if (which === "Play")
button.rgltimer.PlayButton = button;
button.onclick = onclicks[which];
button.className = "rgl-button";
button.id = el.id + "-" + which;
el.appendChild(button);
};
if (typeof control.reinit !== "undefined" &amp;&amp; control.reinit !== null) {
control.actions.reinit = control.reinit;
}
el.rgltimer = new rgltimerClass(Tick, control.start, control.interval, control.stop,
control.step, control.value, control.rate, control.loop, control.actions);
for (var i=0; i &lt; components.length; i++) {
switch(components[i]) {
case "Slider": addSlider(control.start, control.stop,
control.step, control.value);
break;
case "Label": addLabel(control.labels, control.start,
control.step, control.precision);
break;
default:
addButton(components[i], buttonLabels[i], control.pause);
}
}
el.rgltimer.Tick();
};
/**
* Apply all registered controls
* @param { Object } el - DOM element of the control
* @param { Object } x - List of actions to apply
* @param { boolean } [draw=true] - Whether to redraw after applying
*/
rglwidgetClass.prototype.applyControls = function(el, x, draw) {
var self = this, reinit = x.reinit, i, control, type;
for (i = 0; i &lt; x.length; i++) {
control = x[i];
type = control.type;
self[type](el, control);
}
if (typeof reinit !== "undefined" &amp;&amp; reinit !== null) {
reinit = [].concat(reinit);
for (i = 0; i &lt; reinit.length; i++)
self.getObj(reinit[i]).initialized = false;
}
if (typeof draw === "undefined" || draw)
self.drawScene();
};
/**
* Handler for scene change
* @param { Object } message - What sort of scene change to do?
*/
rglwidgetClass.prototype.sceneChangeHandler = function(message) {
var self = document.getElementById(message.elementId).rglinstance,
objs = message.objects, mat = message.material,
root = message.rootSubscene,
initSubs = message.initSubscenes,
redraw = message.redrawScene,
skipRedraw = message.skipRedraw,
deletes, subs, allsubs = [], i,j;
if (typeof message.delete !== "undefined") {
deletes = [].concat(message.delete);
if (typeof message.delfromSubscenes !== "undefined")
subs = [].concat(message.delfromSubscenes);
else
subs = [];
for (i = 0; i &lt; deletes.length; i++) {
for (j = 0; j &lt; subs.length; j++) {
self.delFromSubscene(deletes[i], subs[j]);
}
delete self.scene.objects[deletes[i]];
}
}
if (typeof objs !== "undefined") {
Object.keys(objs).forEach(function(key){
key = parseInt(key, 10);
self.scene.objects[key] = objs[key];
self.initObj(key);
var obj = self.getObj(key),
subs = [].concat(obj.inSubscenes), k;
allsubs = allsubs.concat(subs);
for (k = 0; k &lt; subs.length; k++)
self.addToSubscene(key, subs[k]);
});
}
if (typeof mat !== "undefined") {
self.scene.material = mat;
}
if (typeof root !== "undefined") {
self.scene.rootSubscene = root;
}
if (typeof initSubs !== "undefined")
allsubs = allsubs.concat(initSubs);
allsubs = self.unique(allsubs);
for (i = 0; i &lt; allsubs.length; i++) {
self.initSubscene(allsubs[i]);
}
if (typeof skipRedraw !== "undefined") {
root = self.getObj(self.scene.rootSubscene);
root.par3d.skipRedraw = skipRedraw;
}
if (redraw)
self.drawScene();
};
/**
* Set mouse mode for a subscene
* @param { string } mode - name of mode
* @param { number } button - button number (1 to 3)
* @param { number } subscene - subscene id number
* @param { number } stayActive - if truthy, don't clear brush
*/
rglwidgetClass.prototype.setMouseMode = function(mode, button, subscene, stayActive) {
var sub = this.getObj(subscene),
which = ["left", "right", "middle"][button - 1];
if (!stayActive &amp;&amp; sub.par3d.mouseMode[which] === "selecting")
this.clearBrush(null);
sub.par3d.mouseMode[which] = mode;
};
/**
* The class of an rgl timer object
* @class
*/
/**
* Construct an rgltimerClass object
* @constructor
* @param { function } Tick - action when timer fires
* @param { number } startTime - nominal start time in seconds
* @param { number } interval - seconds between updates
* @param { number } stopTime - nominal stop time in seconds
* @param { number } stepSize - nominal step size
* @param { number } value - current nominal time
* @param { number } rate - nominal units per second
* @param { string } loop - "none", "cycle" or "oscillate"
* @param { Object } actions - list of actions
*/
rgltimerClass = function(Tick, startTime, interval, stopTime, stepSize, value, rate, loop, actions) {
this.enabled = false;
this.timerId = 0;
/** nominal start time in seconds */
this.startTime = startTime;   
/** current nominal time */      
this.value = value;
/** seconds between updates */                 
this.interval = interval;
/** nominal stop time */           
this.stopTime = stopTime;
/** nominal step size */           
this.stepSize = stepSize;
/** nominal units per second */           
this.rate = rate;
/** "none", "cycle", or "oscillate" */                   
this.loop = loop;
/** real world start time */                   
this.realStart = undefined;
/** multiplier for fast-forward or reverse */         
this.multiplier = 1;                
this.actions = actions;
this.Tick = Tick;
};
/**
* Start playing timer object
*/
rgltimerClass.prototype.play = function() {
if (this.enabled) {
this.enabled = false;
window.clearInterval(this.timerId);
this.timerId = 0;
return;
}
var tick = function(self) {
var now = new Date();
self.value = self.multiplier*self.rate*(now - self.realStart)/1000 + self.startTime;
self.forceToRange();
if (typeof self.Tick !== "undefined") {
self.Tick(self.value);
}
};
this.realStart = new Date() - 1000*(this.value - this.startTime)/this.rate/this.multiplier;
this.timerId = window.setInterval(tick, 1000*this.interval, this);
this.enabled = true;
};
/**
* Force value into legal range
*/
rgltimerClass.prototype.forceToRange = function() {
if (this.value &gt; this.stopTime + this.stepSize/2 || this.value &lt; this.startTime - this.stepSize/2) {
if (!this.loop) {
this.reset();
} else {
var cycle = this.stopTime - this.startTime + this.stepSize,
newval = (this.value - this.startTime) % cycle + this.startTime;
if (newval &lt; this.startTime) {
newval += cycle;
}
this.realStart += (this.value - newval)*1000/this.multiplier/this.rate;
this.value = newval;
}
}
};
/**
* Reset to start values
*/
rgltimerClass.prototype.reset = function() {
this.value = this.startTime;
this.newmultiplier(1);
if (typeof this.Tick !== "undefined") {
this.Tick(this.value);
}
if (this.enabled)
this.play();  /* really pause... */
if (typeof this.PlayButton !== "undefined")
this.PlayButton.value = "Play";
};
/**
* Increase the multiplier to play faster
*/
rgltimerClass.prototype.faster = function() {
this.newmultiplier(Math.SQRT2*this.multiplier);
};
/**
* Decrease the multiplier to play slower
*/
rgltimerClass.prototype.slower = function() {
this.newmultiplier(this.multiplier/Math.SQRT2);
};
/**
* Change sign of multiplier to reverse direction
*/
rgltimerClass.prototype.reverse = function() {
this.newmultiplier(-this.multiplier);
};
/**
* Set multiplier for play speed
* @param { number } newmult - new value
*/
rgltimerClass.prototype.newmultiplier = function(newmult) {
if (newmult != this.multiplier) {
this.realStart += 1000*(this.value - this.startTime)/this.rate*(1/this.multiplier - 1/newmult);
this.multiplier = newmult;
}
};
/**
* Take one step
*/
rgltimerClass.prototype.step = function() {
this.value += this.rate*this.multiplier;
this.forceToRange();
if (typeof this.Tick !== "undefined")
this.Tick(this.value);
};&lt;/script&gt;
&lt;div id="testgldiv" class="rglWebGL"&gt;&lt;/div&gt;
&lt;script type="text/javascript"&gt;
var testgldiv = document.getElementById("testgldiv"),
testglrgl = new rglwidgetClass();
testgldiv.width = 865;
testgldiv.height = 577;
testglrgl.initialize(testgldiv,
{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":false,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":1,"objects":{"7":{"id":7,"type":"lines","material":{"lit":false},"vertices":[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],"colors":[[0,0,0,1]],"centers":[[0,0,0],[0,0,0]],"ignoreExtent":false,"flags":64},"8":{"id":8,"type":"text","material":{"lit":false},"vertices":[[0,-1.339,-1.339]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,-1.339,-1.339]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"9":{"id":9,"type":"text","material":{"lit":false},"vertices":[[-1.339,0,-1.339]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[-1.339,0,-1.339]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"10":{"id":10,"type":"text","material":{"lit":false},"vertices":[[-1.339,-1.339,0]],"colors":[[0,0,0,1]],"texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[-1.339,-1.339,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":2064},"11":{"id":11,"type":"linestrip","material":{"lit":false},"vertices":[[-0.7788277,0,0],[2.473378,0,0]],"colors":[[0.2,0.2,0.2,1]],"centers":[[-0.7788277,0,0],[2.473378,0,0]],"ignoreExtent":false,"flags":64},"12":{"id":12,"type":"linestrip","material":{"lit":false},"vertices":[[0,-1.644634,0],[0,1.606822,0]],"colors":[[0.2,0.2,0.2,1]],"centers":[[0,-1.644634,0],[0,1.606822,0]],"ignoreExtent":false,"flags":64},"13":{"id":13,"type":"linestrip","material":{"lit":false},"vertices":[[0,0,-1.281192],[0,0,1.850868]],"colors":[[0.2,0.2,0.2,1]],"centers":[[0,0,-1.281192],[0,0,1.850868]],"ignoreExtent":false,"flags":64},"14":{"id":14,"type":"text","material":{"lit":false},"vertices":[[2.5059,0,0]],"colors":[[0.2,0.2,0.2,1]],"texts":[["1"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[2.5059,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"15":{"id":15,"type":"text","material":{"lit":false},"vertices":[[0,1.639344,0]],"colors":[[0.2,0.2,0.2,1]],"texts":[["2"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[0,1.639344,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"16":{"id":16,"type":"text","material":{"lit":false},"vertices":[[0,0,1.88339]],"colors":[[0.2,0.2,0.2,1]],"texts":[["3"]],"cex":[[0.75]],"adj":[[0.5,0.5]],"centers":[[0,0,1.88339]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"17":{"id":17,"type":"spheres","material":{"size":1},"vertices":[[-0.4333834,-0.6223485,-0.2850499],[-0.2177181,-0.2347692,-0.8806528],[0.665268,-0.07835874,0.2153373],[0.4092646,-0.02318444,-0.2866023],[0.474683,0.2854346,0.506478],[0.7482444,-0.1212604,0.07011276],[0.336904,-0.3351045,0.03170852],[0.9328901,0.1105501,0.1494488],[0.6008044,0.04307472,-0.08984677],[-0.6606353,0.7912011,0.9998518],[0.27293,-0.3203493,-0.1777114],[2.473378,-0.008067753,0.4313042],[-0.770311,-1.617451,1.780411],[-0.7788277,-1.644634,1.850868],[-0.3959337,-0.5684778,0.08383505],[-0.3806105,0.1647924,-0.162438],[-0.3000353,-0.4577278,-0.4149454],[-0.3680306,-0.3393358,-0.4953465],[-0.4408947,0.347441,-0.01100023],[-0.3650306,1.009643,0.4517177],[0.9546675,-0.0291397,0.0497981],[0.03534794,-0.152137,-0.2518772],[0.3615047,0.4445557,0.1918351],[-0.1568246,0.02989114,-0.2586318],[-0.3190093,-0.5061285,-0.1749196],[-0.3201435,-0.3805877,-1.281192],[0.2334083,-0.01406026,-0.2985971],[-0.1110823,-0.3103715,-1.105845],[0.07996739,0.281319,0.1120577],[-0.4188232,-0.3331176,-0.5900382],[0.1429186,-0.09291594,-0.1867097],[-0.2459475,-0.3866448,-0.6189411],[0.1336774,-0.4362731,-0.1112518],[-0.3097742,0.2911142,-0.1706648],[0.1927814,-0.3225222,0.1087191],[0.2404687,0.3271886,0.2795125],[0.361784,0.2972989,0.2566656],[-0.2292628,1.35748,0.5376554],[0.5593314,-0.07086501,0.04190909],[0.9771137,-0.0473663,-0.01145966],[0.321409,-0.1877604,-0.744235],[0.7219759,-0.1599101,0.01667433],[0.5346487,-0.07776982,0.0713772],[-0.4233183,0.9840461,0.4332437],[0.05441485,-0.1503461,-0.5668369],[-0.6209775,1.606822,0.7098864],[1.31196,-0.08810889,0.3269909],[-0.392211,0.2593781,0.1185957],[0.4827842,-0.1111689,0.17007],[0.1057707,0.098425,-0.008317037],[-0.3082354,0.09682893,0.04509097],[2.473378,-0.008067753,0.4313042],[0.0741723,-0.2217391,-0.2525965],[2.103693,0.1071747,0.404696],[-0.1112372,-0.0142876,0.04108546],[0.3057032,-0.09114277,0.1658607],[-0.4317377,0.5215757,-0.09233195],[-0.5075614,-0.6119925,-0.0523226],[-0.453626,0.2300137,0.08086072],[-0.2818823,0.2871227,-0.1689026],[-0.7732919,-1.626965,1.805071],[1.016155,-0.1730533,0.1548269],[-0.4334913,-0.462498,-0.4250052]],"colors":[[0.4,0.4,1,1]],"radii":[[0.01336505]],"centers":[[-0.4333834,-0.6223485,-0.2850499],[-0.2177181,-0.2347692,-0.8806528],[0.665268,-0.07835874,0.2153373],[0.4092646,-0.02318444,-0.2866023],[0.474683,0.2854346,0.506478],[0.7482444,-0.1212604,0.07011276],[0.336904,-0.3351045,0.03170852],[0.9328901,0.1105501,0.1494488],[0.6008044,0.04307472,-0.08984677],[-0.6606353,0.7912011,0.9998518],[0.27293,-0.3203493,-0.1777114],[2.473378,-0.008067753,0.4313042],[-0.770311,-1.617451,1.780411],[-0.7788277,-1.644634,1.850868],[-0.3959337,-0.5684778,0.08383505],[-0.3806105,0.1647924,-0.162438],[-0.3000353,-0.4577278,-0.4149454],[-0.3680306,-0.3393358,-0.4953465],[-0.4408947,0.347441,-0.01100023],[-0.3650306,1.009643,0.4517177],[0.9546675,-0.0291397,0.0497981],[0.03534794,-0.152137,-0.2518772],[0.3615047,0.4445557,0.1918351],[-0.1568246,0.02989114,-0.2586318],[-0.3190093,-0.5061285,-0.1749196],[-0.3201435,-0.3805877,-1.281192],[0.2334083,-0.01406026,-0.2985971],[-0.1110823,-0.3103715,-1.105845],[0.07996739,0.281319,0.1120577],[-0.4188232,-0.3331176,-0.5900382],[0.1429186,-0.09291594,-0.1867097],[-0.2459475,-0.3866448,-0.6189411],[0.1336774,-0.4362731,-0.1112518],[-0.3097742,0.2911142,-0.1706648],[0.1927814,-0.3225222,0.1087191],[0.2404687,0.3271886,0.2795125],[0.361784,0.2972989,0.2566656],[-0.2292628,1.35748,0.5376554],[0.5593314,-0.07086501,0.04190909],[0.9771137,-0.0473663,-0.01145966],[0.321409,-0.1877604,-0.744235],[0.7219759,-0.1599101,0.01667433],[0.5346487,-0.07776982,0.0713772],[-0.4233183,0.9840461,0.4332437],[0.05441485,-0.1503461,-0.5668369],[-0.6209775,1.606822,0.7098864],[1.31196,-0.08810889,0.3269909],[-0.392211,0.2593781,0.1185957],[0.4827842,-0.1111689,0.17007],[0.1057707,0.098425,-0.008317037],[-0.3082354,0.09682893,0.04509097],[2.473378,-0.008067753,0.4313042],[0.0741723,-0.2217391,-0.2525965],[2.103693,0.1071747,0.404696],[-0.1112372,-0.0142876,0.04108546],[0.3057032,-0.09114277,0.1658607],[-0.4317377,0.5215757,-0.09233195],[-0.5075614,-0.6119925,-0.0523226],[-0.453626,0.2300137,0.08086072],[-0.2818823,0.2871227,-0.1689026],[-0.7732919,-1.626965,1.805071],[1.016155,-0.1730533,0.1548269],[-0.4334913,-0.462498,-0.4250052]],"ignoreExtent":false,"flags":3},"18":{"id":18,"type":"text","material":{"lit":false},"vertices":[[-0.4333834,-0.3784893,-0.128447],[-0.2177181,0.009089937,-0.7240499],[0.665268,0.1655004,0.3719403],[0.4092646,0.2206747,-0.1299993],[0.474683,0.5292938,0.663081],[0.7482444,0.1225988,0.2267157],[0.336904,-0.09124536,0.1883115],[0.9328901,0.3544093,0.3060518],[0.6008044,0.2869339,0.0667562],[-0.6606353,1.03506,1.156455],[0.27293,-0.0764901,-0.02110845],[2.473378,0.2357914,0.5879071],[-0.770311,-1.373592,1.937014],[-0.7788277,-1.400774,2.007471],[-0.3959337,-0.3246186,0.240438],[-0.3806105,0.4086516,-0.005835051],[-0.3000353,-0.2138687,-0.2583424],[-0.3680306,-0.09547663,-0.3387436],[-0.4408947,0.5913001,0.1456027],[-0.3650306,1.253502,0.6083207],[0.9546675,0.2147195,0.2064011],[0.03534794,0.09172216,-0.09527419],[0.3615047,0.6884149,0.3484381],[-0.1568246,0.2737503,-0.1020288],[-0.3190093,-0.2622693,-0.01831665],[-0.3201435,-0.1367285,-1.124589],[0.2334083,0.2297989,-0.1419941],[-0.1110823,-0.06651232,-0.9492419],[0.07996739,0.5251782,0.2686607],[-0.4188232,-0.08925841,-0.4334353],[0.1429186,0.1509432,-0.03010676],[-0.2459475,-0.1427857,-0.4623381],[0.1336774,-0.1924139,0.04535113],[-0.3097742,0.5349734,-0.01406187],[0.1927814,-0.07866304,0.2653221],[0.2404687,0.5710478,0.4361155],[0.361784,0.5411581,0.4132686],[-0.2292628,1.601339,0.6942584],[0.5593314,0.1729942,0.1985121],[0.9771137,0.1964929,0.1451433],[0.321409,0.05609873,-0.5876321],[0.7219759,0.08394902,0.1732773],[0.5346487,0.1660893,0.2279802],[-0.4233183,1.227905,0.5898466],[0.05441485,0.09351305,-0.4102339],[-0.6209775,1.850681,0.8664894],[1.31196,0.1557503,0.4835939],[-0.392211,0.5032372,0.2751987],[0.4827842,0.1326903,0.326673],[0.1057707,0.3422842,0.1482859],[-0.3082354,0.3406881,0.2016939],[2.473378,0.2357914,0.5879071],[0.0741723,0.02212002,-0.09599354],[2.103693,0.3510339,0.5612989],[-0.1112372,0.2295716,0.1976884],[0.3057032,0.1527164,0.3224637],[-0.4317377,0.7654349,0.06427103],[-0.5075614,-0.3681334,0.1042804],[-0.453626,0.4738729,0.2374637],[-0.2818823,0.5309819,-0.01229967],[-0.7732919,-1.383106,1.961674],[1.016155,0.07080588,0.3114299],[-0.4334913,-0.2186389,-0.2684022]],"colors":[[0,0,1,1]],"texts":[["amazing"],["bar"],["bathroom"],["bed"],["booked"],["breakfast"],["city"],["clean"],["close"],["club"],["comfortable"],["cross"],["crown"],["crystal"],["dear"],["enjoyed"],["experience"],["fantastic"],["feedback"],["forward"],["free"],["friendly"],["good"],["great"],["hear"],["hello"],["helpful"],["hi"],["hotel"],["leave"],["location"],["lovely"],["melbourne"],["much"],["my"],["night"],["nights"],["noise"],["north"],["old"],["park"],["parking"],["place"],["positive"],["really"],["receive"],["reception"],["review"],["room"],["rooms"],["service"],["southern"],["staff"],["station"],["stay"],["stayed"],["taking"],["team"],["thank"],["time"],["towers"],["walk"],["wonderful"]],"cex":[[0.95]],"adj":[[0.5,0.5]],"centers":[[-0.4333834,-0.3784893,-0.128447],[-0.2177181,0.009089937,-0.7240499],[0.665268,0.1655004,0.3719403],[0.4092646,0.2206747,-0.1299993],[0.474683,0.5292938,0.663081],[0.7482444,0.1225988,0.2267157],[0.336904,-0.09124536,0.1883115],[0.9328901,0.3544093,0.3060518],[0.6008044,0.2869339,0.0667562],[-0.6606353,1.03506,1.156455],[0.27293,-0.0764901,-0.02110845],[2.473378,0.2357914,0.5879071],[-0.770311,-1.373592,1.937014],[-0.7788277,-1.400774,2.007471],[-0.3959337,-0.3246186,0.240438],[-0.3806105,0.4086516,-0.005835051],[-0.3000353,-0.2138687,-0.2583424],[-0.3680306,-0.09547663,-0.3387436],[-0.4408947,0.5913001,0.1456027],[-0.3650306,1.253502,0.6083207],[0.9546675,0.2147195,0.2064011],[0.03534794,0.09172216,-0.09527419],[0.3615047,0.6884149,0.3484381],[-0.1568246,0.2737503,-0.1020288],[-0.3190093,-0.2622693,-0.01831665],[-0.3201435,-0.1367285,-1.124589],[0.2334083,0.2297989,-0.1419941],[-0.1110823,-0.06651232,-0.9492419],[0.07996739,0.5251782,0.2686607],[-0.4188232,-0.08925841,-0.4334353],[0.1429186,0.1509432,-0.03010676],[-0.2459475,-0.1427857,-0.4623381],[0.1336774,-0.1924139,0.04535113],[-0.3097742,0.5349734,-0.01406187],[0.1927814,-0.07866304,0.2653221],[0.2404687,0.5710478,0.4361155],[0.361784,0.5411581,0.4132686],[-0.2292628,1.601339,0.6942584],[0.5593314,0.1729942,0.1985121],[0.9771137,0.1964929,0.1451433],[0.321409,0.05609873,-0.5876321],[0.7219759,0.08394902,0.1732773],[0.5346487,0.1660893,0.2279802],[-0.4233183,1.227905,0.5898466],[0.05441485,0.09351305,-0.4102339],[-0.6209775,1.850681,0.8664894],[1.31196,0.1557503,0.4835939],[-0.392211,0.5032372,0.2751987],[0.4827842,0.1326903,0.326673],[0.1057707,0.3422842,0.1482859],[-0.3082354,0.3406881,0.2016939],[2.473378,0.2357914,0.5879071],[0.0741723,0.02212002,-0.09599354],[2.103693,0.3510339,0.5612989],[-0.1112372,0.2295716,0.1976884],[0.3057032,0.1527164,0.3224637],[-0.4317377,0.7654349,0.06427103],[-0.5075614,-0.3681334,0.1042804],[-0.453626,0.4738729,0.2374637],[-0.2818823,0.5309819,-0.01229967],[-0.7732919,-1.383106,1.961674],[1.016155,0.07080588,0.3114299],[-0.4334913,-0.2186389,-0.2684022]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"19":{"id":19,"type":"triangles","material":{"size":1},"vertices":[[-0.315865,-0.1451017,-0.268511],[-0.303436,-0.1326727,-0.2529748],[-0.2910071,-0.1451017,-0.268511],[-0.2910071,-0.1451017,-0.268511],[-0.303436,-0.1326727,-0.2529748],[-0.2910071,-0.1202438,-0.268511],[-0.2910071,-0.1202438,-0.268511],[-0.303436,-0.1326727,-0.2529748],[-0.315865,-0.1202438,-0.268511],[-0.315865,-0.1202438,-0.268511],[-0.303436,-0.1326727,-0.2529748],[-0.315865,-0.1451017,-0.268511],[-0.2910071,-0.1451017,-0.268511],[-0.303436,-0.1326727,-0.2840472],[-0.315865,-0.1451017,-0.268511],[-0.2910071,-0.1202438,-0.268511],[-0.303436,-0.1326727,-0.2840472],[-0.2910071,-0.1451017,-0.268511],[-0.315865,-0.1202438,-0.268511],[-0.303436,-0.1326727,-0.2840472],[-0.2910071,-0.1202438,-0.268511],[-0.315865,-0.1451017,-0.268511],[-0.303436,-0.1326727,-0.2840472],[-0.315865,-0.1202438,-0.268511],[-0.2864055,0.7434006,0.2731932],[-0.2739765,0.7558296,0.2887293],[-0.2615476,0.7434006,0.2731932],[-0.2615476,0.7434006,0.2731932],[-0.2739765,0.7558296,0.2887293],[-0.2615476,0.7682585,0.2731932],[-0.2615476,0.7682585,0.2731932],[-0.2739765,0.7558296,0.2887293],[-0.2864055,0.7682585,0.2731932],[-0.2864055,0.7682585,0.2731932],[-0.2739765,0.7558296,0.2887293],[-0.2864055,0.7434006,0.2731932],[-0.2615476,0.7434006,0.2731932],[-0.2739765,0.7558296,0.257657],[-0.2864055,0.7434006,0.2731932],[-0.2615476,0.7682585,0.2731932],[-0.2739765,0.7558296,0.257657],[-0.2615476,0.7434006,0.2731932],[-0.2864055,0.7682585,0.2731932],[-0.2739765,0.7558296,0.257657],[-0.2615476,0.7682585,0.2731932],[-0.2864055,0.7434006,0.2731932],[-0.2739765,0.7558296,0.257657],[-0.2864055,0.7682585,0.2731932],[-0.3598633,-0.7187594,0.7289096],[-0.3474343,-0.7063304,0.7444457],[-0.3350054,-0.7187594,0.7289096],[-0.3350054,-0.7187594,0.7289096],[-0.3474343,-0.7063304,0.7444457],[-0.3350054,-0.6939015,0.7289096],[-0.3350054,-0.6939015,0.7289096],[-0.3474343,-0.7063304,0.7444457],[-0.3598633,-0.6939015,0.7289096],[-0.3598633,-0.6939015,0.7289096],[-0.3474343,-0.7063304,0.7444457],[-0.3598633,-0.7187594,0.7289096],[-0.3350054,-0.7187594,0.7289096],[-0.3474343,-0.7063304,0.7133734],[-0.3598633,-0.7187594,0.7289096],[-0.3350054,-0.6939015,0.7289096],[-0.3474343,-0.7063304,0.7133734],[-0.3350054,-0.7187594,0.7289096],[-0.3598633,-0.6939015,0.7289096],[-0.3474343,-0.7063304,0.7133734],[-0.3350054,-0.6939015,0.7289096],[-0.3598633,-0.7187594,0.7289096],[-0.3474343,-0.7063304,0.7133734],[-0.3598633,-0.6939015,0.7289096],[0.8172568,-0.01802547,0.1328279],[0.8296857,-0.005596545,0.1483641],[0.8421146,-0.01802547,0.1328279],[0.8421146,-0.01802547,0.1328279],[0.8296857,-0.005596545,0.1483641],[0.8421146,0.006832385,0.1328279],[0.8421146,0.006832385,0.1328279],[0.8296857,-0.005596545,0.1483641],[0.8172568,0.006832385,0.1328279],[0.8172568,0.006832385,0.1328279],[0.8296857,-0.005596545,0.1483641],[0.8172568,-0.01802547,0.1328279],[0.8421146,-0.01802547,0.1328279],[0.8296857,-0.005596545,0.1172918],[0.8172568,-0.01802547,0.1328279],[0.8421146,0.006832385,0.1328279],[0.8296857,-0.005596545,0.1172918],[0.8421146,-0.01802547,0.1328279],[0.8172568,0.006832385,0.1328279],[0.8296857,-0.005596545,0.1172918],[0.8421146,0.006832385,0.1328279],[0.8172568,-0.01802547,0.1328279],[0.8296857,-0.005596545,0.1172918],[0.8172568,0.006832385,0.1328279],[1.121352,-0.01565699,0.1739707],[1.133781,-0.003228056,0.1895069],[1.14621,-0.01565699,0.1739707],[1.14621,-0.01565699,0.1739707],[1.133781,-0.003228056,0.1895069],[1.14621,0.009200874,0.1739707],[1.14621,0.009200874,0.1739707],[1.133781,-0.003228056,0.1895069],[1.121352,0.009200874,0.1739707],[1.121352,0.009200874,0.1739707],[1.133781,-0.003228056,0.1895069],[1.121352,-0.01565699,0.1739707],[1.14621,-0.01565699,0.1739707],[1.133781,-0.003228056,0.1584345],[1.121352,-0.01565699,0.1739707],[1.14621,0.009200874,0.1739707],[1.133781,-0.003228056,0.1584345],[1.14621,-0.01565699,0.1739707],[1.121352,0.009200874,0.1739707],[1.133781,-0.003228056,0.1584345],[1.14621,0.009200874,0.1739707],[1.121352,-0.01565699,0.1739707],[1.133781,-0.003228056,0.1584345],[1.121352,0.009200874,0.1739707],[0.08133014,-0.09869421,-0.3308599],[0.09375907,-0.08626528,-0.3153237],[0.106188,-0.09869421,-0.3308599],[0.106188,-0.09869421,-0.3308599],[0.09375907,-0.08626528,-0.3153237],[0.106188,-0.07383636,-0.3308599],[0.106188,-0.07383636,-0.3308599],[0.09375907,-0.08626528,-0.3153237],[0.08133014,-0.07383636,-0.3308599],[0.08133014,-0.07383636,-0.3308599],[0.09375907,-0.08626528,-0.3153237],[0.08133014,-0.09869421,-0.3308599],[0.106188,-0.09869421,-0.3308599],[0.09375907,-0.08626528,-0.3463961],[0.08133014,-0.09869421,-0.3308599],[0.106188,-0.07383636,-0.3308599],[0.09375907,-0.08626528,-0.3463961],[0.106188,-0.09869421,-0.3308599],[0.08133014,-0.07383636,-0.3308599],[0.09375907,-0.08626528,-0.3463961],[0.106188,-0.07383636,-0.3308599],[0.08133014,-0.09869421,-0.3308599],[0.09375907,-0.08626528,-0.3463961],[0.08133014,-0.07383636,-0.3308599],[0.2671967,-0.0135947,0.001903044],[0.2796257,-0.00116577,0.01743921],[0.2920546,-0.0135947,0.001903044],[0.2920546,-0.0135947,0.001903044],[0.2796257,-0.00116577,0.01743921],[0.2920546,0.01126316,0.001903044],[0.2920546,0.01126316,0.001903044],[0.2796257,-0.00116577,0.01743921],[0.2671967,0.01126316,0.001903044],[0.2671967,0.01126316,0.001903044],[0.2796257,-0.00116577,0.01743921],[0.2671967,-0.0135947,0.001903044],[0.2920546,-0.0135947,0.001903044],[0.2796257,-0.00116577,-0.01363312],[0.2671967,-0.0135947,0.001903044],[0.2920546,0.01126316,0.001903044],[0.2796257,-0.00116577,-0.01363312],[0.2920546,-0.0135947,0.001903044],[0.2671967,0.01126316,0.001903044],[0.2796257,-0.00116577,-0.01363312],[0.2920546,0.01126316,0.001903044],[0.2671967,-0.0135947,0.001903044],[0.2796257,-0.00116577,-0.01363312],[0.2671967,0.01126316,0.001903044],[-0.1869955,-0.1875833,-0.5335813],[-0.1745666,-0.1751544,-0.5180451],[-0.1621376,-0.1875833,-0.5335813],[-0.1621376,-0.1875833,-0.5335813],[-0.1745666,-0.1751544,-0.5180451],[-0.1621376,-0.1627254,-0.5335813],[-0.1621376,-0.1627254,-0.5335813],[-0.1745666,-0.1751544,-0.5180451],[-0.1869955,-0.1627254,-0.5335813],[-0.1869955,-0.1627254,-0.5335813],[-0.1745666,-0.1751544,-0.5180451],[-0.1869955,-0.1875833,-0.5335813],[-0.1621376,-0.1875833,-0.5335813],[-0.1745666,-0.1751544,-0.5491174],[-0.1869955,-0.1875833,-0.5335813],[-0.1621376,-0.1627254,-0.5335813],[-0.1745666,-0.1751544,-0.5491174],[-0.1621376,-0.1875833,-0.5335813],[-0.1869955,-0.1627254,-0.5335813],[-0.1745666,-0.1751544,-0.5491174],[-0.1621376,-0.1627254,-0.5335813],[-0.1869955,-0.1875833,-0.5335813],[-0.1745666,-0.1751544,-0.5491174],[-0.1869955,-0.1627254,-0.5335813]],"normals":[[0,0.7808685,-0.6246954],[0,0.7808685,-0.6246954],[0,0.7808685,-0.6246954],[-0.7808692,0,-0.6246945],[-0.7808692,0,-0.6246945],[-0.7808692,0,-0.6246945],[0,-0.7808689,-0.624695],[0,-0.7808689,-0.624695],[0,-0.7808689,-0.624695],[0.7808685,0,-0.6246954],[0.7808685,0,-0.6246954],[0.7808685,0,-0.6246954],[0,0.7808685,0.6246954],[0,0.7808685,0.6246954],[0,0.7808685,0.6246954],[-0.7808692,0,0.6246945],[-0.7808692,0,0.6246945],[-0.7808692,0,0.6246945],[0,-0.7808689,0.624695],[0,-0.7808689,0.624695],[0,-0.7808689,0.624695],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0,0.7808685,-0.6246954],[0,0.7808685,-0.6246954],[0,0.7808685,-0.6246954],[-0.7808692,0,-0.6246945],[-0.7808692,0,-0.6246945],[-0.7808692,0,-0.6246945],[0,-0.7808685,-0.6246954],[0,-0.7808685,-0.6246954],[0,-0.7808685,-0.6246954],[0.7808685,0,-0.6246954],[0.7808685,0,-0.6246954],[0.7808685,0,-0.6246954],[0,0.7808685,0.6246954],[0,0.7808685,0.6246954],[0,0.7808685,0.6246954],[-0.7808692,0,0.6246945],[-0.7808692,0,0.6246945],[-0.7808692,0,0.6246945],[0,-0.7808685,0.6246954],[0,-0.7808685,0.6246954],[0,-0.7808685,0.6246954],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0,0.7808679,-0.6246962],[0,0.7808679,-0.6246962],[0,0.7808679,-0.6246962],[-0.7808687,0,-0.6246953],[-0.7808687,0,-0.6246953],[-0.7808687,0,-0.6246953],[0,-0.7808679,-0.6246962],[0,-0.7808679,-0.6246962],[0,-0.7808679,-0.6246962],[0.7808679,0,-0.6246961],[0.7808679,0,-0.6246961],[0.7808679,0,-0.6246961],[0,0.7808691,0.6246947],[0,0.7808691,0.6246947],[0,0.7808691,0.6246947],[-0.7808698,0,0.6246938],[-0.7808698,0,0.6246938],[-0.7808698,0,0.6246938],[0,-0.7808691,0.6246947],[0,-0.7808691,0.6246947],[0,-0.7808691,0.6246947],[0.7808691,0,0.6246946],[0.7808691,0,0.6246946],[0.7808691,0,0.6246946],[0,0.7808691,-0.6246948],[0,0.7808691,-0.6246948],[0,0.7808691,-0.6246948],[-0.7808703,0,-0.6246933],[-0.7808703,0,-0.6246933],[-0.7808703,0,-0.6246933],[0,-0.7808691,-0.6246948],[0,-0.7808691,-0.6246948],[0,-0.7808691,-0.6246948],[0.7808688,0,-0.624695],[0.7808688,0,-0.624695],[0.7808688,0,-0.624695],[0,0.7808687,0.6246951],[0,0.7808687,0.6246951],[0,0.7808687,0.6246951],[-0.7808699,0,0.6246935],[-0.7808699,0,0.6246935],[-0.7808699,0,0.6246935],[0,-0.7808687,0.6246951],[0,-0.7808687,0.6246951],[0,-0.7808687,0.6246951],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0.7808685,0,0.6246954],[0,0.780869,-0.6246948],[0,0.780869,-0.6246948],[0,0.780869,-0.6246948],[-0.7808703,0,-0.6246933],[-0.7808703,0,-0.6246933],[-0.7808703,0,-0.6246933],[0,-0.780869,-0.6246948],[0,-0.780869,-0.6246948],[0,-0.780869,-0.6246948],[0.7808703,0,-0.6246933],[0.7808703,0,-0.6246933],[0.7808703,0,-0.6246933],[0,0.7808687,0.6246951],[0,0.7808687,0.6246951],[0,0.7808687,0.6246951],[-0.7808699,0,0.6246936],[-0.7808699,0,0.6246936],[-0.7808699,0,0.6246936],[0,-0.7808687,0.6246951],[0,-0.7808687,0.6246951],[0,-0.7808687,0.6246951],[0.7808699,0,0.6246936],[0.7808699,0,0.6246936],[0.7808699,0,0.6246936],[0,0.7808687,-0.6246952],[0,0.7808687,-0.6246952],[0,0.7808687,-0.6246952],[-0.7808689,0,-0.624695],[-0.7808689,0,-0.624695],[-0.7808689,0,-0.624695],[0,-0.7808689,-0.624695],[0,-0.7808689,-0.624695],[0,-0.7808689,-0.624695],[0.7808687,0,-0.6246952],[0.7808687,0,-0.6246952],[0.7808687,0,-0.6246952],[0,0.7808687,0.6246952],[0,0.7808687,0.6246952],[0,0.7808687,0.6246952],[-0.7808689,0,0.624695],[-0.7808689,0,0.624695],[-0.7808689,0,0.624695],[0,-0.7808689,0.624695],[0,-0.7808689,0.624695],[0,-0.7808689,0.624695],[0.7808687,0,0.6246952],[0.7808687,0,0.6246952],[0.7808687,0,0.6246952],[0,0.7808688,-0.6246951],[0,0.7808688,-0.6246951],[0,0.7808688,-0.6246951],[-0.7808693,0,-0.6246944],[-0.7808693,0,-0.6246944],[-0.7808693,0,-0.6246944],[0,-0.7808688,-0.6246951],[0,-0.7808688,-0.6246951],[0,-0.7808688,-0.6246951],[0.7808685,0,-0.6246953],[0.7808685,0,-0.6246953],[0.7808685,0,-0.6246953],[0,0.7808688,0.6246951],[0,0.7808688,0.6246951],[0,0.7808688,0.6246951],[-0.7808693,0,0.6246944],[-0.7808693,0,0.6246944],[-0.7808693,0,0.6246944],[0,-0.7808688,0.6246951],[0,-0.7808688,0.6246951],[0,-0.7808688,0.6246951],[0.7808685,0,0.6246953],[0.7808685,0,0.6246953],[0.7808685,0,0.6246953],[0,0.7808683,-0.6246957],[0,0.7808683,-0.6246957],[0,0.7808683,-0.6246957],[-0.7808679,0,-0.6246961],[-0.7808679,0,-0.6246961],[-0.7808679,0,-0.6246961],[0,-0.7808683,-0.6246957],[0,-0.7808683,-0.6246957],[0,-0.7808683,-0.6246957],[0.7808683,0,-0.6246957],[0.7808683,0,-0.6246957],[0.7808683,0,-0.6246957],[0,0.7808695,0.6246942],[0,0.7808695,0.6246942],[0,0.7808695,0.6246942],[-0.7808691,0,0.6246946],[-0.7808691,0,0.6246946],[-0.7808691,0,0.6246946],[0,-0.7808695,0.6246942],[0,-0.7808695,0.6246942],[0,-0.7808695,0.6246942],[0.7808694,0,0.6246942],[0.7808694,0,0.6246942],[0.7808694,0,0.6246942]],"colors":[[1,0.4,0.4,1]],"centers":[[-0.303436,-0.1409587,-0.2633323],[-0.2951501,-0.1326727,-0.2633323],[-0.303436,-0.1243868,-0.2633323],[-0.311722,-0.1326727,-0.2633323],[-0.303436,-0.1409587,-0.2736897],[-0.2951501,-0.1326727,-0.2736897],[-0.303436,-0.1243868,-0.2736897],[-0.311722,-0.1326727,-0.2736897],[-0.2739766,0.7475436,0.2783719],[-0.2656906,0.7558296,0.2783719],[-0.2739765,0.7641156,0.2783719],[-0.2822625,0.7558296,0.2783719],[-0.2739765,0.7475436,0.2680145],[-0.2656906,0.7558296,0.2680145],[-0.2739766,0.7641156,0.2680145],[-0.2822625,0.7558296,0.2680145],[-0.3474344,-0.7146164,0.7340883],[-0.3391484,-0.7063305,0.7340883],[-0.3474344,-0.6980445,0.7340883],[-0.3557203,-0.7063304,0.7340883],[-0.3474344,-0.7146164,0.7237308],[-0.3391484,-0.7063304,0.7237308],[-0.3474344,-0.6980445,0.7237308],[-0.3557203,-0.7063305,0.7237308],[0.8296858,-0.0138825,0.1380067],[0.8379717,-0.005596545,0.1380067],[0.8296857,0.002689409,0.1380067],[0.8213999,-0.005596545,0.1380067],[0.8296857,-0.0138825,0.1276492],[0.8379717,-0.005596545,0.1276492],[0.8296858,0.002689409,0.1276492],[0.8213999,-0.005596545,0.1276492],[1.133781,-0.01151401,0.1791494],[1.142067,-0.003228057,0.1791494],[1.133781,0.005057897,0.1791494],[1.125495,-0.003228057,0.1791494],[1.133781,-0.01151401,0.168792],[1.142067,-0.003228057,0.168792],[1.133781,0.005057897,0.168792],[1.125495,-0.003228057,0.168792],[0.09375907,-0.09455124,-0.3256812],[0.102045,-0.08626529,-0.3256812],[0.09375906,-0.07797933,-0.3256812],[0.08547312,-0.08626529,-0.3256812],[0.09375906,-0.09455124,-0.3360386],[0.102045,-0.08626529,-0.3360386],[0.09375907,-0.07797933,-0.3360386],[0.08547312,-0.08626529,-0.3360386],[0.2796257,-0.009451725,0.007081765],[0.2879116,-0.001165771,0.007081765],[0.2796257,0.007120182,0.007081765],[0.2713397,-0.001165771,0.007081765],[0.2796257,-0.009451725,-0.003275677],[0.2879116,-0.001165771,-0.003275677],[0.2796257,0.007120182,-0.003275677],[0.2713397,-0.001165771,-0.003275677],[-0.1745666,-0.1834403,-0.5284026],[-0.1662806,-0.1751544,-0.5284026],[-0.1745666,-0.1668684,-0.5284026],[-0.1828525,-0.1751544,-0.5284026],[-0.1745666,-0.1834403,-0.53876],[-0.1662806,-0.1751544,-0.53876],[-0.1745666,-0.1668684,-0.53876],[-0.1828525,-0.1751544,-0.53876]],"ignoreExtent":false,"flags":3},"20":{"id":20,"type":"text","material":{"lit":false},"vertices":[[-0.303436,0.1111865,-0.111908],[-0.2739765,0.9996887,0.4297962],[-0.3474343,-0.4624712,0.8855125],[0.8296857,0.2382626,0.2894309],[1.133781,0.2406311,0.3305736],[0.09375907,0.1575939,-0.1742569],[0.2796257,0.2426934,0.158506],[-0.1745666,0.0687048,-0.3769783]],"colors":[[1,0,0,1]],"texts":[["Adelphi"],["Citiclub"],["CrownTowers"],["FlagstaffCity"],["HotelSophia"],["Larwill"],["Mercure"],["QT"]],"cex":[[0.95]],"adj":[[0.5,0.5]],"centers":[[-0.303436,0.1111865,-0.111908],[-0.2739765,0.9996887,0.4297962],[-0.3474343,-0.4624712,0.8855125],[0.8296857,0.2382626,0.2894309],[1.133781,0.2406311,0.3305736],[0.09375907,0.1575939,-0.1742569],[0.2796257,0.2426934,0.158506],[-0.1745666,0.0687048,-0.3769783]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":2064},"5":{"id":5,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"4":{"id":4,"type":"background","material":{"fog":true},"colors":[[0.2980392,0.2980392,0.2980392,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","flags":0},"6":{"id":6,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","flags":0},"1":{"id":1,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":1,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,11.2797],"modelMatrix":[[1,0,0,-0.8568536],[0,0.3420202,0.9396926,-0.3679106],[0,-0.9396926,0.3420202,-11.31109],[0,0,0,1]],"projMatrix":[[2.488034,0,0,0],[0,3.732051,0,0],[0,0,-3.863703,-40.66203],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.3420201,0.9396926,0],[0,-0.9396926,0.3420201,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-0.7921928,2.5059,-1.657999,1.850681,-1.294557,2.007471],"windowRect":[90,95,954,671],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"/home/anastasios/R/x86_64-pc-linux-gnu-library/3.6/rgl/fonts/FreeSans.ttf","maxClipPlanes":8,"glVersion":3,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5],"subscenes":[],"flags":2643}},"snapshot":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2AAAAJACAIAAABkK5JxAAAAHXRFWHRTb2Z0d2FyZQBSL1JHTCBwYWNrYWdlL2xpYnBuZ7GveO8AACAASURBVHic7N0JnM31/sfxM4t9J/seUYjKmmilkiFXGylrDW2kSIoa/HW13FSiJm24tJEa0iKSrWKIFl3ESKbFkmWMsczM9//5zPfnd87vzJkxpJnB6/k4j7m/8zu/9Zj7mHff7+/7+foMAAAAEMCX1xcAAACA/IWACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIiAAAAPAiIAAAA8CAgAgAAwIOACAAAAA8CIgAAADwIiAAAAPAgIAIAAMCDgAgAAAAPAiIAAAA8CIgAAADwICACAADAg4AIAAAADwIicKbbs2fPzJkzX3311ZUrV+b1tQAA8gUCInBGO3DgQKdOnR5//PHXXnvt6quvnjVrVl5fEQAg7xEQgTPa559/fvfdd9vljz76qG/fvnl7PQCA/ICACJzRduzY8csvv9jlN954Y+jQoXl7PQCA/ICACMAsX768Q4cOV111VWJiYl5fCwAg7xEQAZhDhw5JNHzuuef69++f19cCAMh7BETgjPbVV1999913djkpKalp06YHDhzI20sCAOQ5AiJwRnvnnXfuu+++9PT06OjoN998s127drKc1xcFAMhjBETgjHbgwIHevXt37979iiuuuPzyyxctWpTXVwQAyHsEROBMl56evn79+ltvvXXmzJl5fS0AgHyBgAhAxcTExMXF5fVVAADyBQIiAEVABAC4CIgAFAERAOAiIAJQEhBjY2Pz+ioAAPkCARGAis2Q11cBAMgXCIgAFAERAOAiIAJQBEQAgIuACEAREAEALgIiABUXFxcTE5PXVwEAyBcIiAAUAREA4CIg4kyRlqavYypXznz++T9/NfkPAREA4CIg4kxxzTXm0UePvVlEhPn443/+avIfAiIAwEVARL52+LA5eDB4ZXq62bfv2PsmJZnUVP/bzAFRPk1ODt7rjA2I8fHx0dHReX0VAIB8gYCIfGrrVnPddSYy0oSHm/btzbZturJBA7NggWnSRF9jx5obb/RvP3euadjQCXzTppkaNYzPZwoWNL16mUOHTJcupmhRU6aM6dRJN/jxR3PppfqpbCNbvvOO/zgERAAACIjIj1JTTaNGpmNHs3GjhrkWLUy7drq+UCFTq5YZNcosX24WLdLs+Mcfzi433ODkxU2bdP24cebXX80XX5hixczkyWbLFtOmjRkwwCQk6DaSL+XgGzaYxEQzeLApWVKbKi0CIgAABETkR/PmOeHPDitZtkzjnSxLQLz/fmcbeVu5spk0SZf37jWF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2rc327Y5B7cB8dAh3VJCnCV5St7GxzsBceLEEGOPj5MNiM2bO48DSv6TM3/wgTlwQB8u7N/fyXAS3WT9Dz9kud54A+LevXppAwY49ypp2ab3efP0Rpcu1c0kaD7yiDanyqFkS9mXgAgAx4WACISSfffuP23lSvPCC5prYmL056OP6mXI6+izg2+/PXdy1XY6N7PYsiWhWbPZXfr/ah89lO1lvSSjRo20ZszGjTokuEUL066dc3AbEFNSdEs38krIkrdyBBsQa9YMHnt8/CQgSqa94w7N2LVqaXobNsz5aP58U7q0qVDB1KihGfill46xPqgO4nvv6UUtX649zpUq6UOVdetqErbNjUIitGREOY682rQxV11FQASA40NABELJSfduerrZt8+zQci6zzmUlOTpyJZ8JpkoPl5/zp4dtO3AgQcmvXBg8TP/cd67zyCaowHRtqdt3+6sXLZMg5IdyCIBUQ4YMiBKEFy6VAPic885lyRB0449/hvWrDEffqhpM+h2P/nEfPSR/xqzX58VuQ+JlXJDW7d61v/+u5500SLnpgEAx4WACGRy+LA2Fo4dG7ze7d61Xb1NmujLZF3f+YYbtAnQevppbZKUrGS1aqVthKJxYw1zl1yi+xYqpINyLYluNrFlDoiJiVsatUwPC/OfTgLiuec655KVAwaYsmU14Aady9aVlg3kJdsHBsTzztO3deuaevWi69Xb/OCD2ognawoW1Cts3vxvf6cAgFMJARHIRGKcZKPly7PcQJJcrVpm1CjdJpv6ziNGaD+vdeml2i36zDO6vHGj//jFipnatc2nn+qzdc8+q+tXrtT1e/Zo4pwwITggSkKV47RooevffNM53ZVXagOhPZesl0gn21SvHnwuW1c6PNxMmWL69tX1s2b570jeSnycMuWR2rU1fY4bp326X3yhGVHCIgDgTEJABDKx3bubNmW5gcSp++93lrOp7yyxzBZ6OXhQd7n5Zm1oFK+8otvYvk8JiI884uybmqpP3n3wgfO2QwfNfEEBsVUr53S2K9me7rzztO/bnkt+FiigCVJ+ygHtuf73P3PZZU5dafsMYnKyvr3jDuewkgKPPoP4tCRLWV6/3vlIoufVV//NbxSnMbcKZw43y0mxTgB5joAIZGK7d7//PssNJO29956znE19Z/l7WK6cmTFDH4WT1PXpp1roWf483nqr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EIgAAABwIRABAADgQiACAADAhUAEAACAC4EIAAAAFwIRAAAALgQiAAAAXAhEAAAAuBCIAAAAcCEQAQAA4EIgAgAAwIVABAAAgAuBCAAAABcCEQAAAC4EIgAAAFwIRAAAALgQiAAAAHAhEAEAAOBCIAIAAMCFQAQAAIALgQgAAAAXAhEAAAAuBCIAAABcCEQAAAC4EIgAAABwIRABAADgQiACAADAhUAEAACAC4EIAAAAFwIRAAAALgQiAAAAXAhEAAAAuBCIAAAAcCEQAQAA4EIgAgAAwIVABAAAgAuBCAAAABcCEQAAAC4EIgAAAFwIRAAAALgQiAAAAHAhEAEAAOBCIAIAAMCFQAQAAIALgQgAAAAXAhEAAAAuBCIAAABcCEQAAAC4EIgAAABwIRABAADgQiACAADAhUAEAACAC4EIAAAAFwIRAAAALgQiAAAAXAhEAAAAuBCIAAAAcCEQAQAA4EIgAgAAwIVABAAAgAuBCAAAABcCEQAAAC4EIgAAAFwIRAAAALgQiAAAAHAhEAEAAOBCIAIAAMCFQAQAAIALgQgAAAAXAhEAAAAuBCIAAABcCEQAAAC4EIgAAABwIRABAADgQiACAADAhUAEAACAC4EIAAAAFwIRAAAALgQiAAAAXAhEAAAAuBCIAAAAcCEQAQAA4EIgAgAAwIVABAAAgAuBCAAAABcCEQAAAC4EIgAAAFwIRAAAALj8P6G6+PksONJIAAAAAElFTkSuQmCC","width":865,"height":577,"sphereVerts":{"vb":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.07465783,0.1464466,0.2126075,0.2705981,0.3181896,0.3535534,0.3753303,0.3826834,0.3753303,0.3535534,0.3181896,0.2705981,0.2126075,0.1464466,0.07465783,0,0,0.1379497,0.2705981,0.3928475,0.5,0.5879378,0.6532815,0.6935199,0.7071068,0.6935199,0.6532815,0.5879378,0.5,0.3928475,0.2705981,0.1379497,0,0,0.18024,0.3535534,0.51328,0.6532815,0.7681778,0.8535534,0.9061274,0.9238795,0.9061274,0.8535534,0.7681778,0.6532815,0.51328,0.3535534,0.18024,0,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,0.9807853,0.9238795,0.8314696,0.7071068,0.5555702,0.3826834,0.1950903,0,0,0.18024,0.3535534,0.51328,0.6532815,0.7681778,0.8535534,0.9061274,0.9238795,0.9061274,0.8535534,0.7681778,0.6532815,0.51328,0.3535534,0.18024,0,0,0.1379497,0.2705981,0.3928475,0.5,0.5879378,0.6532815,0.6935199,0.7071068,0.6935199,0.6532815,0.5879378,0.5,0.3928475,0.2705981,0.1379497,0,0,0.07465783,0.1464466,0.2126075,0.2705981,0.3181896,0.3535534,0.3753303,0.3826834,0.3753303,0.3535534,0.3181896,0.2705981,0.2126075,0.1464466,0.07465783,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0,-0.07465783,-0.1464466,-0.2126075,-0.2705981,-0.3181896,-0.3535534,-0.3753303,-0.3826834,-0.3753303,-0.3535534,-0.3181896,-0.2705981,-0.2126075,-0.1464466,-0.07465783,-0,-0,-0.1379497,-0.2705981,-0.3928475,-0.5,-0.5879378,-0.6532815,-0.6935199,-0.7071068,-0.6935199,-0.6532815,-0.5879378,-0.5,-0.3928475,-0.2705981,-0.1379497,-0,-0,-0.18024,-0.3535534,-0.51328,-0.6532815,-0.7681778,-0.8535534,-0.9061274,-0.9238795,-0.9061274,-0.8535534,-0.7681778,-0.6532815,-0.51328,-0.3535534,-0.18024,-0,-0,-0.1950903,-0.3826834,-0.5555702,-0.7071068,-0.8314696,-0.9238795,-0.9807853,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,-0,-0,-0.18024,-0.3535534,-0.51328,-0.6532815,-0.7681778,-0.8535534,-0.9061274,-0.9238795,-0.9061274,-0.8535534,-0.7681778,-0.6532815,-0.51328,-0.3535534,-0.18024,-0,-0,-0.1379497,-0.2705981,-0.3928475,-0.5,-0.5879378,-0.6532815,-0.6935199,-0.7071068,-0.6935199,-0.6532815,-0.5879378,-0.5,-0.3928475,-0.2705981,-0.1379497,-0,-0,-0.07465783,-0.1464466,-0.2126075,-0.2705981,-0.3181896,-0.3535534,-0.3753303,-0.3826834,-0.3753303,-0.3535534,-0.3181896,-0.2705981,-0.2126075,-0.1464466,-0.07465783,-0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1],[0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,0.9807853,0.9238795,0.8314696,0.7071068,0.5555702,0.3826834,0.1950903,0,0,0.18024,0.3535534,0.51328,0.6532815,0.7681778,0.8535534,0.9061274,0.9238795,0.9061274,0.8535534,0.7681778,0.6532815,0.51328,0.3535534,0.18024,0,0,0.1379497,0.2705981,0.3928475,0.5,0.5879378,0.6532815,0.6935199,0.7071068,0.6935199,0.6532815,0.5879378,0.5,0.3928475,0.2705981,0.1379497,0,0,0.07465783,0.1464466,0.2126075,0.2705981,0.3181896,0.3535534,0.3753303,0.3826834,0.3753303,0.3535534,0.3181896,0.2705981,0.2126075,0.1464466,0.07465783,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0,-0.07465783,-0.1464466,-0.2126075,-0.2705981,-0.3181896,-0.3535534,-0.3753303,-0.3826834,-0.3753303,-0.3535534,-0.3181896,-0.2705981,-0.2126075,-0.1464466,-0.07465783,-0,-0,-0.1379497,-0.2705981,-0.3928475,-0.5,-0.5879378,-0.6532815,-0.6935199,-0.7071068,-0.6935199,-0.6532815,-0.5879378,-0.5,-0.3928475,-0.2705981,-0.1379497,-0,-0,-0.18024,-0.3535534,-0.51328,-0.6532815,-0.7681778,-0.8535534,-0.9061274,-0.9238795,-0.9061274,-0.8535534,-0.7681778,-0.6532815,-0.51328,-0.3535534,-0.18024,-0,-0,-0.1950903,-0.3826834,-0.5555702,-0.7071068,-0.8314696,-0.9238795,-0.9807853,-1,-0.9807853,-0.9238795,-0.8314696,-0.7071068,-0.5555702,-0.3826834,-0.1950903,-0,-0,-0.18024,-0.3535534,-0.51328,-0.6532815,-0.7681778,-0.8535534,-0.9061274,-0.9238795,-0.9061274,-0.8535534,-0.7681778,-0.6532815,-0.51328,-0.3535534,-0.18024,-0,-0,-0.1379497,-0.2705981,-0.3928475,-0.5,-0.5879378,-0.6532815,-0.6935199,-0.7071068,-0.6935199,-0.6532815,-0.5879378,-0.5,-0.3928475,-0.2705981,-0.1379497,-0,-0,-0.07465783,-0.1464466,-0.2126075,-0.2705981,-0.3181896,-0.3535534,-0.3753303,-0.3826834,-0.3753303,-0.3535534,-0.3181896,-0.2705981,-0.2126075,-0.1464466,-0.07465783,-0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.07465783,0.1464466,0.2126075,0.2705981,0.3181896,0.3535534,0.3753303,0.3826834,0.3753303,0.3535534,0.3181896,0.2705981,0.2126075,0.1464466,0.07465783,0,0,0.1379497,0.2705981,0.3928475,0.5,0.5879378,0.6532815,0.6935199,0.7071068,0.6935199,0.6532815,0.5879378,0.5,0.3928475,0.2705981,0.1379497,0,0,0.18024,0.3535534,0.51328,0.6532815,0.7681778,0.8535534,0.9061274,0.9238795,0.9061274,0.8535534,0.7681778,0.6532815,0.51328,0.3535534,0.18024,0,0,0.1950903,0.3826834,0.5555702,0.7071068,0.8314696,0.9238795,0.9807853,1,0.9807853,0.9238795,0.8314696,0.7071068,0.5555702,0.3826834,0.1950903,0]],"it":[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270],[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288],[18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271]],"material":[],"normals":null,"texcoords":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.0625,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.1875,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.3125,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.4375,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.5625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.625,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.6875,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.75,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.8125,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.875,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,0.9375,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1,0,0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1]]},"context":{"shiny":false,"rmarkdown":"xaringan::moon_reader"},"crosstalk":{"key":[],"group":[],"id":[],"options":[]}});
testglrgl.prefix = "testgl";
&lt;/script&gt;
&lt;p id="testgldebug"&gt;
You must enable Javascript to view this page properly.&lt;/p&gt;
&lt;script&gt;testglrgl.start();&lt;/script&gt;

---

# Critique of the Analysis 

- Together the first two dimensions only explain slightly more than half of the inertia (52.2%)&lt;!--D--&gt; 
--

  + This suggests a large proportion of dependence is not explained by the plot&lt;!--D--&gt; 
--

- Counting the frequency of words can be problematic.&lt;!--D--&gt; 
--

  + Consider *clean* v *not clean*.&lt;!--D--&gt; 
--

- Also some aspects of the analysis are quite crude.  Why use top 20 words? Why not 100?&lt;!--D--&gt; 
--

  + More words more difficult to visualise. 


---

# Summary 

- Main things to know&lt;!--D--&gt; 
--

  + CA used for categorical data.&lt;!--D--&gt; 
--

  + Used to visualise two variable with many categories.&lt;!--D--&gt; 
--

  + Aim is to maximise proportion of explained inertia. &lt;!--D--&gt;
--

  + Know how can it be used in practice.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>
<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();

</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
